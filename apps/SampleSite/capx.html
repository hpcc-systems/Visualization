<!doctype html>
<html>
    <head>
        <title>HPCC Systems - Dynamic Grid Demo</title>
        <meta charset="utf-8">

        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
        <link rel="icon" href="favicon.ico" type="image/x-icon">

        <!-- CSS -->

        <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet" type="text/css">
        
        <link href="css/prettify.css" rel="stylesheet" type="text/css">
        <link href="css/bootstrap_theme.css" rel="stylesheet" type="text/css">
        <link href="css/dynamic_grid.css" rel="stylesheet" type="text/css">
        
        <link href="css/finance_styles.css" rel="stylesheet" type="text/css">
        <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
        
        <!-- JS -->

        <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>
        <script type="text/javascript" src="//code.jquery.com/ui/1.11.3/jquery-ui.min.js"></script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
        <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

        <!-- requirejs -->
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.1.18/require.min.js"></script>
        <script type="text/javascript" src="config.js"></script>

        <!-- custom js -->
        <script type="text/javascript" src="js/init_bootstrap_demo_page.js"></script>
        
        <script type="text/javascript" src="js/finance_data.js"></script>
        <script type="text/javascript" src="js/finance_page_logic.js"></script>
        <script type="text/javascript" src="js/init_finance_page.js"></script>

        <script>
            var g_fitTo = 'all';
            var _d = jsonData['CAPx'];
            var g_tabbedObjArr = [];
            g_tabbedObjArr.push(
                {
                    'tabLabel':'2015 CAPX Forecast',
                    'widgets':[
                        {
                            'src':'src/amchart/Bar',
                            'columns':["Label", "Jan Act", "Feb Act", "Mar Act", "Apr Act", "May Act", "Jun Act", "Jul Fcst", "Aug Fcst", "Sep Fcst", "Oct Fcst", "Nov Fcst", "Dec Fcst"],
                            'grid':{'x':0,'y':0,'title':'','xSpan':10,'ySpan':10},
                            'data':_parseRawJson(_d[0].section,[0,1,2,3,4,5,6,7,8,9,10,11,12]),
                            'params':{
                                'useClonedPalette':true,
                                'marginRight':60,
//                                'isStacked':true,
//                                'stackType':'3d',
                                'xAxisLabelRotation':45,
                                'xAxisGridPosition':'start',
                                'columnWidth':1,
                                'columnSpacing':0,
                                //'orientation':'vertical',
//                                'cylinderBars':true,
                                'Angle3D':0,
                                'Depth3D':0,
                                'tooltipTemplate':'[[category]]: [[value]]'
                            },
                            'click':function(row,col){
                                require(['src/amchart/Pie'],function(Pie){
                                    var pieData = [];
                                    for(var desc in row){
                                        pieData.push([desc,row[desc]]);
                                    }
                                    if(typeof(g_tabs) !== "undefined"){
                                        g_tabs.widgets()[0]
                                            .widget()
                                            .setContent(0,10,
                                                new Pie()
                                                    .columns(["Label", "Value"])
                                                    .data(pieData)
                                                ,col,10,5)
                                            .render();
                                    } else {
                                        g_grids.content()[0]
                                            .widget()
                                            .setContent(0,10,
                                                new Pie()
                                                    .columns(["Label", "Value"])
                                                    .data(pieData)
                                                ,col,10,5)
                                            .render();
                                    }
                                });
                            }
                        },
                    ]
                }
            );
            g_tabbedObjArr.push(
                {
                    'tabLabel':'2015 CAPX Forecast Totals',
                    'widgets':[
                        {
                            'src':'src/amchart/Pie',
                            'columns':["Label", "Totals"],
                            'grid':{'x':0,'y':0,'title':'','xSpan':10,'ySpan':10},
                            'data':_parseRawJson(_d[1].section,[0,13]),
                            'params':{
                                'useClonedPalette':true,
                                'marginRight':60,
//                                'isStacked':true,
//                                'stackType':'3d',
                                'xAxisLabelRotation':45,
                                'xAxisGridPosition':'start',
                                'columnWidth':1,
                                'columnSpacing':0,
                                'orientation':'vertical',
//                                'cylinderBars':true,
                                'Angle3D':30,
                                'Depth3D':10,
                                'tooltipTemplate':'<div style="text-align:left;"><b>[[title]]</b><br/>[[value]]</div>'
                            },
                        },
                    ]
                }
            );
            g_tabbedObjArr.push(
                {
                    'tabLabel':'CAPX Category',
                    'widgets':[
                        {
                            'src':'src/amchart/Pie',
                            'columns':["Label", "2014 Actual"],
                            'grid':{'x':0,'y':0,'title':'2014 Actual','xSpan':10,'ySpan':10},
                            'data':_parseRawJson(_d[3].section,[0,1]),
                            'params':{
                                'marginRight':60,
                                'Angle3D':30,
                                'Depth3D':5,
                                'holePercent':38,
                            },
                        },
                        {
                            'src':'src/amchart/Pie',
                            'columns':["Label", "2015 Fcst"],
                            'grid':{'x':0,'y':10,'title':'2015 Fcst','xSpan':10,'ySpan':10},
                            'data':_parseRawJson(_d[3].section,[0,2]),
                            'params':{
                                'useClonedPalette':true,
                                'marginRight':60,
                                'Angle3D':30,
                                'Depth3D':5,
                                'holePercent':38,
                            },
                        },
                    ]
                }
            );
            g_tabbedObjArr.push(
                {
                    'tabLabel':'CAPX Category',
                    'widgets':[
                        {
                            'src':'src/amchart/Line',
                            'columns':["CAPx", "Jan (Act)", "Feb (Act)", "Mar (Act)", "Apr (Act)", "May (Act)", "Jun (Act)", "Jul (RF2)", "Aug (RF2)", "Sep (RF2)", "Oct (RF2)", "Nov (RF2)", "Dec (RF2)"],
                            'grid':{'x':0,'y':0,'title':'','xSpan':10,'ySpan':10},
                            'data':_parseRawJson(_d[4].section,[0,1,2,3,4,5,6,7,8,9,10,11,12]),
                            'params':{
                                'useClonedPalette':true,
                                'paletteID':'category20c',
                                'bulletSize':8,
                                'bulletType':'square',
                                'lineWidth':4,
                                'xAxisLabelRotation':45,
                            },
                        },
                    ]
                }
            );
        </script>
    </head>
    <body onresize="doResize();">
        <nav class="navbar navbar-default" role="navigation">
            <div class="navbar-header">
                <a id="logo" class="navbar-brand" href="#"><img alt="Brand" width="120" height="40" src="hpcc-logo.png"></a>
            </div>
            <div id="links-navbar" class="collapse navbar-collapse navbar-ex1-collapse"></div>
        </nav>
        <div id="main"></div>
    </body>
</html>
