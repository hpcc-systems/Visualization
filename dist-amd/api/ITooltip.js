!function(t,o){"function"==typeof define&&define.amd?define(["d3","d3-tip","../common/Widget","css!./ITooltip"],o):t.api_ITooltip=o(t.d3,t.d3.tip,t.common_Widget)}(this,function(t,o,i,l,e){function p(){if(i.call(this),this._valueFormatter=t.format(this.tooltipValueFormat()),this.layerEnter){var o=this.layerEnter;this.layerEnter=function(t,i,l){this.tooltipEnter(i),o.apply(this,arguments)};var l=this.layerUpdate;this.layerUpdate=function(t){l.apply(this,arguments),this.tooltipUpdate()};var e=this.layerExit;this.layerExit=function(t){e.apply(this,arguments),this.tooltipExit()}}else{var p=this.enter;this.enter=function(t,o){this.tooltipEnter(o),p.apply(this,arguments)};var r=this.update;this.update=function(t,o){r.apply(this,arguments),this.tooltipUpdate()};var s=this.exit;this.exit=function(t,o){s.apply(this,arguments),this.tooltipExit()}}}p.prototype=Object.create(i.prototype),p.prototype.publish("tooltipStyle","default","set","Style",["default","none"],{}),p.prototype.publish("tooltipValueFormat",",.2f","string","Value Format",null,{}),p.prototype.publish("tooltipSeriesColor","#EAFFFF","html-color","Series Color",null,{}),p.prototype.publish("tooltipLabelColor","#CCFFFF","html-color","Label Color",null,{}),p.prototype.publish("tooltipValueColor","white","html-color","Value Color",null,{}),p.prototype.publish("tooltipTick",!0,"boolean","Show tooltip tick",null,{}),p.prototype.publish("tooltipOffset",8,"number","Offset from the cursor",null,{}),p.prototype.tooltipEnter=function(t){var i=this;this.tooltip=o().attr("class","d3-tip").offset(function(t){switch(i.tooltip.direction()()){case"e":return[0,i.tooltipOffset()];default:return[-i.tooltipOffset(),0]}}),t.call(this.tooltip)},p.prototype.tooltipUpdate=function(){var t=this.tooltip.attr("class");t=t.split(" notick").join("")+(this.tooltipTick()?"":" notick")+("none"===this.tooltipStyle()?" hidden":""),this.tooltip.attr("class",t)},p.prototype.tooltipExit=function(){this.tooltip&&this.tooltip.destroy()};var r=p.prototype.tooltipValueFormat;return p.prototype.tooltipValueFormat=function(o){var i=r.apply(this,arguments);return arguments.length&&(this._valueFormatter=t.format(o)),i},p.prototype._tooltipHTML=function(t){return t},p.prototype.tooltipHTML=function(t){return this.tooltip.html(t)},p.prototype.tooltipFormat=function(t){switch(t=t||{},t.label=void 0===t.label?"":t.label,t.series=t.series||"",t.value instanceof Date?t.value=t.value||"":t.value=this._valueFormatter(t.value)||"",this.tooltipStyle()){case"none":break;default:return t.series?"<span style='color:"+this.tooltipSeriesColor()+"'>"+t.series+"</span> / <span style='color:"+this.tooltipLabelColor()+"'>"+t.label+"</span>:  <span style='color:"+this.tooltipValueColor()+"'>"+t.value+"</span>":"<span style='color:"+this.tooltipLabelColor()+"'>"+t.label+"</span>:  <span style='color:"+this.tooltipValueColor()+"'>"+t.value+"</span>"}},p});