(function(e,t){typeof define=="function"&&define.amd?define(["d3","c3","../common/HTMLWidget","css!c3"],t):e.c3chart_Common=t(e.d3,e.c3,e.common_HTMLWidget)})(this,function(e,t,n){function r(e){n.call(this),this._tag="div",this._type="unknown",this._config={axis:{},legend:{position:"bottom",show:!0},data:{}},this._prevColumnIDs=[]}return r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype._class+=" c3chart_Common",r.prototype.publish("showLegend",!1,"boolean","Show/Hide Legend",null,{tags:["Basic","Shared"]}),r.prototype.publish("legendFontColor",null,"html-color","Legend Font Color",null,{tags:["Intermediate","Shared"]}),r.prototype.publish("legendFontSize",null,"number","Legend Font Size",null,{tags:["Intermediate","Shared"]}),r.prototype.publish("legendFontFamily",null,"string","Legend Font Name",null,{tags:["Private","Shared"]}),r.prototype.publish("legendFontBold",!1,"boolean","Legend Font Bold",null,{tags:["Private","Shared"]}),r.prototype.publish("legendFontItalic",!1,"boolean","Legend Font Italic",null,{tags:["Private","Shared"]}),r.prototype.publish("fontSize",null,"number","Font Size",null,{tags:["Basic","Shared"]}),r.prototype.publish("fontFamily",null,"string","Font Name",null,{tags:["Basic","Shared","Shared"]}),r.prototype.publish("fontColor",null,"html-color","Font Color",null,{tags:["Basic","Shared"]}),r.prototype.publish("legendPosition","right","set","Legend Position",["bottom","right"],{tags:["Intermediate"]}),r.prototype.publish("animationDuration",0,"number","Animation Duration",null,{tags:["Advanced"]}),r.prototype.type=function(e){return arguments.length?(this._type=e,this):this._type},r.prototype.getC3Series=function(){return this.columns().filter(function(e,t){return t>0})},r.prototype.getC3Rows=function(){var e=[this.columns().filter(function(e,t){return t>0})].concat(this.data().map(function(e){return e.filter(function(e,t){return t>0})}));return e},r.prototype.getC3Categories=function(){var e=this.data().map(function(e,t){return e[0]});return e},r.prototype.getC3Column=function(e){var t=[this.columns()[e]].concat(this.data().map(function(t,n){return t[e]}));return t},r.prototype.getC3Columns=function(e){if(!this.data().length)return[];e=e||this.columns().length;var t=[],n=typeof this.xAxisType=="function"&&this.xAxisType()==="time"?0:1;for(var r=n;r<e;++r)t.push(this.getC3Column(r));return t},r.prototype.enter=function(e,r){n.prototype.enter.apply(this,arguments),r.style("overflow","hidden"),this._config.size={width:this.width(),height:this.height()},this._config.transition={duration:this.animationDuration()},this._config.data.type=this._type,this._type!=="gauge"&&(this._config.legend={position:this.legendPosition()}),this._config.bindto=r.append("div").datum(null),this._config.data.columns=this.getC3Columns(),this.c3Chart=t.generate(this._config)},r.prototype.update=function(e,t){n.prototype.update.apply(this,arguments),this.showLegend()?this.c3Chart.legend.show():this.c3Chart.legend.hide(),this.c3Chart.resize({width:this.width(),height:this.height()});var r=this.getChartOptions(),i=r.columns.map(function(e){return e[0]});r.unload=this._prevColumnIDs.filter(function(e){return i.indexOf(e)<0}),this.c3Chart.load(r),this._prevColumnIDs=i,t.selectAll(".c3 text").style({stroke:this.fontColor(),fill:this.fontColor(),"font-size":this.fontSize()+"px","font-family":this.fontFamily()}).attr("font-family",this.fontFamily()),t.selectAll(".c3 .c3-legend-item text").style({fill:this.legendFontColor(),"font-size":this.legendFontSize()+"px","font-family":this.legendFontFamily(),"font-weight":this.legendFontBold()?"bold":"normal","font-style":this.legendFontItalic()?"italic":"normal"}).attr("font-family",this.legendFontFamily())},r.prototype.getChartOptions=function(){return{}},r});