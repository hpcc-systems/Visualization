(function(e,t){typeof define=="function"&&define.amd?define(["d3","./XYAxis","../api/INDChart","css!./Column"],t):e.chart_Column=t(e.d3,e.chart_XYAxis,e.api_INDChart)})(this,function(e,t,n){function r(e){t.call(this),n.call(this),this._linearGap=25}return r.prototype=Object.create(t.prototype),r.prototype._class+=" chart_Column",r.prototype.implements(n.prototype),r.prototype.publish("paletteID","default","set","Palette ID",r.prototype._palette.switch(),{tags:["Basic","Shared"]}),r.prototype.publish("stacked",!1,"boolean","Stacked Bars"),r.prototype.updateChart=function(t,n,r,i,s){var o=this;this._palette=this._palette.switch(this.paletteID());var u=10,a=0;switch(this.xAxisType()){case"ordinal":u=this.dataScale.rangeBand(),a=0;break;case"linear":case"time":u=Math.max(Math.abs(this.dataScale(2)-this.dataScale(1))*(100-this._linearGap)/100,u),a=-u/2}var f=e.scale.ordinal().domain(o._columns.filter(function(e,t){return t>0})).rangeRoundBands([0,u]),l=this.svgData.selectAll(".dataRow").data(this.formattedData());l.enter().append("g").attr("class","dataRow"),l.each(function(t,n){var r=e.select(this),i=r.selectAll("rect").data(t.filter(function(e,t){return t>0}));i.enter().append("rect").attr("class","columnRect").on("click",function(e,n){o.click(o.rowToObj(t),o._columns[n+1])}).append("title"),o.orientation()==="horizontal"?i.transition().attr("class","columnRect").attr("x",function(e,n){return o.dataScale(t[0])+(o.stacked()?0:f(o._columns[n+1]))+a}).attr("width",o.stacked()?u:f.rangeBand()).attr("y",function(e){return e instanceof Array?o.valueScale(e[1]):o.valueScale(e)}).attr("height",function(e){return e instanceof Array?o.valueScale(e[0])-o.valueScale(e[1]):s-o.valueScale(e)}).style("fill",function(e,t){return o._palette(o._columns[t+1])}):i.transition().attr("class","columnRect").attr("y",function(e,n){return o.dataScale(t[0])+(o.stacked()?0:f(o._columns[n+1]))+a}).attr("height",o.stacked()?u:f.rangeBand()).attr("x",function(e){return e instanceof Array?o.valueScale(e[0]):0}).attr("width",function(e){return e instanceof Array?o.valueScale(e[1])-o.valueScale(e[0]):o.valueScale(e)}).style("fill",function(e,t){return o._palette(o._columns[t+1])}),i.select("title").text(function(e,n){return t[0]+" ("+e+","+" "+o._columns[n+1]+")"}),o.stacked()&&i.sort(function(e,t){return t-e}),i.exit().transition().remove()}),l.exit().transition().remove()},r});