(function(e,t){typeof define=="function"&&define.amd?define(["./SVGWidget","css!./Text"],t):e.common_Text=t(e.common_SVGWidget)})(this,function(e){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype._class+=" common_Text",t.prototype.publish("text","","string","Display Text",null,{tags:["Private"]}),t.prototype.publish("fontFamily","","string","Font Family",null,{tags:["Private"]}),t.prototype.publish("fontSize",null,"number","Font Size (px)",null,{tags:["Private"]}),t.prototype.publish("anchor","middle","set","Anchor Position",["start","middle","end"],{tags:["Private"]}),t.prototype.publish("colorFill",null,"html-color","Fill Color",null,{tags:["Private"]}),t.prototype.testData=function(){return this.text("Hello\nand\nWelcome!"),this},t.prototype.enter=function(t,n){e.prototype.enter.apply(this,arguments),this._textElement=n.append("text")},t.prototype.update=function(t,n){e.prototype.update.apply(this,arguments),this._textElement.attr("font-family",this.fontFamily()).attr("font-size",this.fontSize());var r=this.text().split("\n"),i=this._textElement.selectAll("tspan").data(r,function(e){return e});i.enter().append("tspan").attr("class",function(e,t){return"tspan_"+t}).attr("dy","1em").attr("x","0"),i.style("fill",this.colorFill()).text(function(e){return e}),i.exit().remove();var s={width:0,height:0};try{s=this._textElement.node().getBBox()}catch(o){}var u=0;switch(this.anchor()){case"start":u=-s.width/2;break;case"end":u=s.width/2}var a=-(s.y+s.height/2);this._textElement.style("text-anchor",this.anchor()).attr("transform",function(e){return"translate("+u+","+a+")"})},t});