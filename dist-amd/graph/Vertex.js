!function(t,o){"function"==typeof define&&define.amd?define(["d3","../common/SVGWidget","../common/Icon","../common/TextBox","css!./Vertex"],o):t.graph_Vertex=o(t.d3,t.common_SVGWidget,t.common_Icon,t.common_TextBox)}(this,function(t,o,e,i){function n(){o.call(this),this._icon=new e,this._textBox=new i,this._annotationWidgets={}}return n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype._class+=" graph_Vertex",n.prototype.publishProxy("faChar","_icon"),n.prototype.publishProxy("imageUrl","_icon"),n.prototype.publishProxy("icon_shape_diameter","_icon","diameter"),n.prototype.publishProxy("icon_shape_colorFill","_icon","shape_colorFill"),n.prototype.publishProxy("icon_shape_colorStroke","_icon","shape_colorStroke"),n.prototype.publishProxy("icon_image_colorFill","_icon","image_colorFill"),n.prototype.publishProxy("text","_textBox"),n.prototype.publishProxy("anchor","_textBox"),n.prototype.publishProxy("textbox_shape_colorStroke","_textBox","shape_colorStroke"),n.prototype.publishProxy("textbox_shape_colorFill","_textBox","shape_colorFill"),n.prototype.publishProxy("textbox_text_colorFill","_textBox","text_colorFill"),n.prototype.publish("iconAnchor","start","set","Icon Anchor Position",["","start","middle","end"],{tags:["Basic"]}),n.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),n.prototype.publish("annotationDiameter",14,"number","Annotation Diameter",null,{tags:["Private"]}),n.prototype.publish("annotationSpacing",3,"number","Annotation Spacing",null,{tags:["Private"]}),n.prototype.publish("annotationIcons",[],"array","Annotations",null,{tags:["Private"]}),n.prototype.enter=function(t,e){o.prototype.enter.apply(this,arguments),this._icon.target(t).render(),this._textBox.target(t).render()},n.prototype.update=function(i,n){o.prototype.update.apply(this,arguments),this._icon.tooltip(this.tooltip()).render();var r=this._icon.getBBox(!0);this._textBox.tooltip(this.tooltip()).render();var a=this._textBox.getBBox(!0);switch(this.iconAnchor()){case"start":this._icon.move({x:-(a.width/2)+r.width/3,y:-(a.height/2)-r.height/3});break;case"middle":this._icon.move({x:0,y:-(a.height/2)-r.height/3});break;case"end":this._icon.move({x:a.width/2-r.width/3,y:-(a.height/2)-r.height/3})}var p=this,s=n.selectAll(".annotation").data(this.annotationIcons());s.enter().append("g").attr("class","annotation").each(function(t,o){p._annotationWidgets[o]=(new e).target(this).shape("square")});var h=a.width/2,c=a.height/2;s.each(function(t,o){var e=p._annotationWidgets[o];e.diameter(p.annotationDiameter()).shape_colorFill(p.textbox_shape_colorFill()).shape_colorStroke(p.textbox_shape_colorStroke());for(var i in t)e[i]?e[i](t[i]):console.log("Invalid annotation property:  "+i);e.render();var n=e.getBBox(!0);e.move({x:h-n.width/2+4,y:c+n.height/2-4}),h-=n.width+p.annotationSpacing()}),s.exit().each(function(o,e){var i=t.select(this);delete p._annotationWidgets[e],i.remove()})},n.prototype.intersection=function(t,o){var e=this._icon.intersection(t,o,this._pos);if(e)return e;var i=this._textBox.intersection(t,o,this._pos);return i?i:null},n});