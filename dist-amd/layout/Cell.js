(function(e,t){typeof define=="function"&&define.amd?define(["d3","./Surface"],t):e.layout_Cell=t(e.d3,e.layout_Surface)})(this,function(e,t){function n(){t.call(this),this._dragHandles=["nw","n","ne","e","se","s","sw","w"]}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype._class+=" layout_Cell",n.prototype.publish("gridRow",0,"number","Grid Row Position",null,{tags:["Private"]}),n.prototype.publish("gridCol",0,"number","Grid Column Position",null,{tags:["Private"]}),n.prototype.publish("gridRowSpan",1,"number","Grid Row Span",null,{tags:["Private"]}),n.prototype.publish("gridColSpan",1,"number","Grid Column Span",null,{tags:["Private"]}),n.prototype.publish("handleSize",6,"number","Grid Row Position",null,{tags:["Private"]}),n.prototype.publish("indicateTheseIds",[],"array","Array of DOM Ids to display update-indicators over.",null,{tags:["Private"]}),n.prototype.publish("indicatorGlowColor","#EEEE11","html-color","Glow color of update-indicator",null,{tags:["Basic"]}),n.prototype.publish("indicatorBorderColor","#F48A00","html-color","Border color of update-indicator",null,{tags:["Basic"]}),n.prototype.publish("indicatorOpacity",.8,"number","Opacity of update-indicator",null,{tags:["Basic"]}),n.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments),n.classed("layout_Surface",!0)},n.prototype.update=function(e,n){t.prototype.update.apply(this,arguments);var r=this,i;n.on("mouseenter",this.onMouseEnter()).on("mouseleave",this.onMouseLeave());var s=n.selectAll(".dragHandle").data(this._dragHandles,function(e){return e});s.enter().append("div").attr("class",function(e){return"dragHandle dragHandle_"+e}).style("position","absolute"),s.style({padding:"0px",margin:"0px",left:function(e){switch(e){case"ne":case"e":case"se":return r._size.width-r.handleSize()+"px";case"nw":case"w":case"sw":return"0px";case"n":return i=0,r._dragHandles.indexOf("nw")!==-1&&i++,r.handleSize()*i+"px";case"s":return i=0,r._dragHandles.indexOf("sw")!==-1&&i++,r.handleSize()*i+"px"}},top:function(e){switch(e){case"nw":case"n":case"ne":return"0px";case"e":return i=0,r._dragHandles.indexOf("ne")!==-1&&i++,r.handleSize()*i+"px";case"w":return i=0,r._dragHandles.indexOf("nw")!==-1&&i++,r.handleSize()*i+"px";case"sw":case"s":case"se":return r._size.height-r.handleSize()+"px"}},width:function(e){switch(e){case"n":return i=0,r._dragHandles.indexOf("ne")!==-1&&i++,r._dragHandles.indexOf("nw")!==-1&&i++,r._size.width-r.handleSize()*i+"px";case"s":return i=0,r._dragHandles.indexOf("se")!==-1&&i++,r._dragHandles.indexOf("sw")!==-1&&i++,r._size.width-r.handleSize()*i+"px";default:return r.handleSize()+"px"}},height:function(e){switch(e){case"w":return i=0,r._dragHandles.indexOf("nw")!==-1&&i++,r._dragHandles.indexOf("sw")!==-1&&i++,r._size.height-r.handleSize()*i+"px";case"e":return i=0,r._dragHandles.indexOf("ne")!==-1&&i++,r._dragHandles.indexOf("se")!==-1&&i++,r._size.height-r.handleSize()*i+"px";default:return r.handleSize()+"px"}}}),s.exit().remove()},n.prototype.onMouseEnter=function(t){var n=this.indicateTheseIds(),r=this.indicatorOpacity(),i=this.indicatorBorderColor(),s=this.indicatorGlowColor();return function(){for(var t=0;t<n.length;t++){var o=document.getElementById(n[t]),u=o.getBoundingClientRect();e.select(this).append("div").classed("update-indicator",!0).style({"box-sizing":"border-box",position:"fixed",top:u.top+"px",left:u.left+"px",width:u.width+"px",height:u.height+"px",opacity:r,padding:"0px","z-index":1e3,border:"4px solid "+i,"-webkit-box-shadow":"inset 0px 0px 30px 0px "+s,"-moz-box-shadow":"inset 0px 0px 30px 0px "+s,"box-shadow":"inset 0px 0px 30px 0px "+s})}}},n.prototype.onMouseLeave=function(){var e=this.element();return function(){e.selectAll(".update-indicator").remove()}},n});