(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/HTMLWidget","../layout/AbsoluteSurface","../common/TextBox","../common/Text","css!./Layered"],t):e.layout_Layered=t(e.d3,e.common_HTMLWidget,e.layout_AbsoluteSurface,e.common_TextBox,e.common_Text)})(this,function(e,t,n,r,i){function s(){t.call(this),this._tag="div"}return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.prototype._class+=" layout_Layered",s.prototype.publish("padding",0,"number","Padding"),s.prototype.publish("widgets",[],"widgetArray","widgets",null,{tags:["Private"]}),s.prototype.testData=function(){this.addLayer((new n).widgetX(0).widgetY(0).widgetWidth(100).widgetHeight(100).widget((new r).testData())).addLayer((new n).widgetX(40).widgetY(40).widgetWidth(50).widgetHeight(50).opacity(.66).widget((new r).testData())).addLayer((new n).widgetX(30).widgetY(10).widgetWidth(40).widgetHeight(30).widget((new r).testData()));var e=this;return setInterval(function(){e.widgets().sort(function(e,t){return Math.random()<.5?-1:1}),e.render()},3e3),this},s.prototype.addLayer=function(e){var t=this.widgets();return t.push(e?e:(new i).text("No widget defined for layer.")),this.widgets(t),this},s.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments),this._contentContainer=n.append("div").attr("class","container")},s.prototype.update=function(e,n){t.prototype.update.apply(this,arguments);var r=this;n.style("padding",this.padding()+"px");var i=this._contentContainer.selectAll(".content.id"+this.id()).data(this.widgets(),function(e){return e.id()});i.enter().append("div").attr("class","content id"+this.id()).each(function(e,t){e.target(this)}),i.each(function(e,t){e.resize({width:r.clientWidth(),height:r.clientHeight()}).render()}),i.exit().each(function(e,t){e.target(null)}).remove(),i.order()},s});