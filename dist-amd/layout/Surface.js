(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/HTMLWidget","../common/TextBox","css!./Surface","css!font-awesome"],t):e.layout_Surface=t(e.d3,e.common_HTMLWidget,e.common_TextBox)})(this,function(e,t,n){function r(){t.call(this),this._tag="div",this._surfaceButtons=[]}return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype._class+=" layout_Surface",r.prototype.publish("title","","string","Title",null,{tags:["Intermediate"]}),r.prototype.publish("widget",null,"widget","Widget",null,{tags:["Basic"]}),r.prototype.publish("surfaceTitlePadding",null,"number","Title Padding (px)",null,{tags:["Advanced"]}),r.prototype.publish("surfaceTitleFontSize",null,"number","Title Font Size (px)",null,{tags:["Advanced"]}),r.prototype.publish("surfaceTitleFontColor",null,"html-color","Title Font Color",null,{tags:["Advanced"]}),r.prototype.publish("surfaceTitleFontFamily",null,"string","Title Font Family",null,{tags:["Advanced"]}),r.prototype.publish("surfaceTitleFontBold",!0,"boolean","Enable Bold Title Font",null,{tags:["Advanced"]}),r.prototype.publish("surfaceTitleBackgroundColor",null,"html-color","Title Background Color",null,{tags:["Advanced"]}),r.prototype.publish("surfacePadding",null,"string","Surface Padding (px)",null,{tags:["Intermediate"]}),r.prototype.publish("surfaceBackgroundColor",null,"html-color","Surface Background Color",null,{tags:["Advanced"]}),r.prototype.publish("surfaceBorderWidth",null,"number","Surface Border Width (px)",null,{tags:["Advanced"]}),r.prototype.publish("surfaceBorderColor",null,"html-color","Surface Border Color",null,{tags:["Advanced"]}),r.prototype.publish("surfaceBorderRadius",null,"number","Surface Border Radius (px)",null,{tags:["Advanced"]}),r.prototype.publish("surfaceTitleAlignment","center","set","Title Alignment",["left","right","center"],{tags:["Basic"]}),r.prototype.publish("buttonAnnotations",[],"array","Button Array",null,{tags:["Private"]}),r.prototype.testData=function(){return this.title("ABC"),this.widget((new r).widget((new n).testData())),this.buttonAnnotations([{id:"button_1",label:"",width:60,padding:"5px","class":"",font:"FontAwesome",callback:function(e){console.log("Click Override on button "+e)}},{id:"button_2",label:"",width:30,padding:"5px","class":"",font:"FontAwesome",callback:function(e){console.log("Click Override on button "+e)}}]),this},r.prototype.widgetSize=function(e,t){var n=this.clientWidth(),r=this.clientHeight();return this.title()&&(r-=this.calcHeight(e)),r-=this.calcFrameHeight(t),n-=this.calcFrameWidth(t),{width:n,height:r}},r.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments)},r.prototype.update=function(n,r){t.prototype.update.apply(this,arguments);var i=this;r.style("border-width",this.surfaceBorderWidth_modified()?this.surfaceBorderWidth()+"px":null).style("border-color",this.surfaceBorderColor()).style("border-radius",this.surfaceBorderRadius_modified()?this.surfaceBorderRadius()+"px":null).style("background-color",this.surfaceBackgroundColor());var s=r.selectAll(".surfaceTitle").data(this.title()?[this.title()]:[]);s.enter().insert("h3","div").attr("class","surfaceTitle"),s.text(function(e){return e}).style("text-align",this.surfaceTitleAlignment()).style("color",this.surfaceTitleFontColor()).style("font-size",this.surfaceTitleFontSize()+"px").style("font-family",this.surfaceTitleFontFamily()).style("font-weight",this.surfaceTitleFontBold()?"bold":"normal").style("background-color",this.surfaceTitleBackgroundColor()).style("padding",this.surfaceTitlePadding()+"px"),s.exit().remove();var o=r.select(".surfaceTitle"),u=o.append("div").attr("class","html-button-container").selectAll(".surface-button").data(this.buttonAnnotations());u.enter().append("button").classed("surface-button",!0).each(function(t,n){var r=i._surfaceButtons[n]=e.select(this).attr("class","surface-button "+t.class).attr("id",t.id).style("padding",t.padding).style("width",t.width).style("height",t.height).style("cursor","pointer");t.font==="FontAwesome"?r.append("i").attr("class","fa").text(function(e){return t.label}).on("click",function(e){i.click(e)}):r.text(function(e){return t.label}).on("click",function(e){i.click(e)})}),u.exit().each(function(t,n){var r=e.select(this);delete i._surfaceButtons[n],r.remove()});var a=r.selectAll("#"+this._id+" > .surfaceWidget").data(this.widget()?[this.widget()]:[],function(e){return e._id});a.enter().append("div").attr("class","surfaceWidget").each(function(e){e.target(this)}),a.style("padding",this.surfacePadding()?this.surfacePadding()+"px":null).each(function(t){var n=i.widgetSize(r.select("h3"),e.select(this));n.width<0&&(n.width=0),n.height<0&&(n.height=0),t.resize({width:n.width,height:n.height})}),a.exit().each(function(e){e.target(null)}).remove()},r.prototype.exit=function(e,n){this.widget()&&(this.widget(null),this.render()),t.prototype.exit.apply(this,arguments)},r.prototype.render=function(e){var n=this;return t.prototype.render.call(this,function(t){n.widget()?n.widget().render(function(t){e&&e(t)}):e&&e(t)})},r.prototype.click=function(e){console.log("Clicked: "+e.id)},r});