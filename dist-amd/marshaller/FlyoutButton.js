!function(t,e){"function"==typeof define&&define.amd?define(["../form/Button","../layout/Popup","../layout/Surface"],e):t.marshaller_FlyoutButton=e(t.form_Button,t.layout_Popup,t.layout_Surface)}(this,function(t,e,o){function p(){t.call(this),this.value("^");var p=this;this._popupSurface=(new o).surfaceBackgroundColor("rgb(234, 249, 255)").buttonAnnotations([{id:"",label:"ÔÄç",width:20,padding:"0px 5px","class":"close",font:"FontAwesome"}]).on("click",function(t){"close"===t["class"]&&p._popup.visible(!1).popupState(!1).render()}),this._popup=(new e).size({width:400,height:400}).position("absolute").widget(this._popupSurface)}return p.prototype=Object.create(t.prototype),p.prototype.constructor=p,p.prototype._class+=" marshaller_FlyoutButton",p.prototype.publishProxy("title","_popupSurface"),p.prototype.publishProxy("widget","_popupSurface"),p.prototype.publish("autoClose",!0,"boolean","Auto Close"),p.prototype.reference=function(e){var o=(new t).value(this.value()),p=this;return o.click=function(t){p.click()},o},p.prototype.click=function(t){var e=this;this._popup.visible(!0).popupState(!0).render(function(t){var o=e._popupSurface.widget().getBBox();e._popupSurface.resize({width:o.width,height:o.height+e._popupSurface.calcHeight(e._popupSurface.element().select(".surfaceTitle"))+18}),e._popup.render()})},p.prototype.enter=function(e,o){t.prototype.enter.apply(this,arguments);for(var p=this;p&&-1===["marshaller_HTML","marshaller_Graph","composite_MegaChart"].indexOf(p.classID());)p=p.locateParentWidget();p&&(this._popupParentWidget=p,this._popup.target(p.node()))},p.prototype.render=function(e){var o=this,p=this._popup.popupState();t.prototype.render.call(o,function(t){var r=o._popupParentWidget.getBBox(),u=t.getBBox();o._popup.left(u.x-r.x+u.width-o._popup.width()).top(u.y-r.y+u.height).visible(p&&o.autoClose()?!1:p).popupState(p&&o.autoClose()?!1:p).render(),e&&e(t)})},p});