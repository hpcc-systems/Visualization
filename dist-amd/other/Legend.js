(function(e,t){typeof define=="function"&&define.amd?define(["d3","./Table","css!./Legend"],t):e.other_Legend=t(e.d3,e.other_Table)})(this,function(e,t){function n(){t.call(this),this._tag="div",this.showHeader(!1)}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype._class+=" other_Legend",n.prototype.publish("dataFamily","ND","set","Type of data",["1D","2D","ND","any"],{tags:["Private"]}),n.prototype.publish("orientation","vertical","set","Orientation of Legend rows",["vertical","horizontal"],{tags:["Private"]}),n.prototype.targetWidget=function(e){function d(e){return'<div class="colorBlock" style="background-color:'+e+';"></div>'}function v(e){var t=e.toString().split(".")[0],n=e.toString().split(".")[1];while(/(\d+)(\d{3})/.test(t.toString()))t=t.toString().replace(/(\d+)(\d{3})/,"$1,$2");return typeof n!="undefined"?t+"."+n:t}var t=this;if(e===undefined)return t._targetWidget;var n=["Key","Label"],r=[],i=e.columns(),s=e._palette.toString().split("function ")[1].split("(")[0];if(s==="ordinal")switch(this.dataFamily()){case"2D":r=e.data().map(function(t){return[d(e._palette(t[0])),t[0]]});break;case"ND":r=i.filter(function(e,t){return t>0}).map(function(t){return[d(e._palette(t)),t]})}else if(s==="rainbow"){var o=e._palette.colors().reverse(),u=o.length,a=e._dataMinWeight,f=e._dataMaxWeight;for(var l=0;l<u;l++){var c=parseInt((f-a)/u),h,p;l===0?(p=v(a+c*(l+1)),r.push([d(o[l]),"0 - "+p])):l+1===u?(h=v(a+c*l+1),r.push([d(o[l]),h+"+"])):(h=v(a+c*l+1),p=v(a+c*(l+1)),r.push([d(o[l]),h+" - "+p]))}}return t.columns(n),t.data(r),t._targetWidget=e,this},n.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments),this.renderHtmlDataCells(!0),this.fixedHeader(!1),this.fixedSize(!0),n.classed("other_Legend",!0)},n.prototype.update=function(e,n){t.prototype.update.apply(this,arguments);var r=this;typeof this._targetWidget!="undefined"&&this.targetWidget(this._targetWidget),n.classed("horiz-legend",this.orientation()==="horizontal");var i=n.select(".tableDiv > table"),s=i.node().getBoundingClientRect(),o=this._parentElement.node().getBoundingClientRect();n.select(".tableDiv").style({overflow:"visible"});var u=o.height/2-s.height/2,a=o.width/2-s.width/2;i.style({position:"absolute",top:u+"px",left:a+"px"});var f=this.pageNumber()-1,l=this.itemsPerPage(),c=f*l,h=parseInt(f*l)+parseInt(l),p=null;this.pagination()?p=this.data().slice(c,h):p=this.data();var d=this.tbody.selectAll("tr").data(p);d.on("click",function(e,t){r.onClick(e,t)}).on("mouseover",function(e,t){r.onMouseOver(e,t)})},n.prototype.onClick=function(e,t){console.log("Legend onClick method"),console.log("rowData: "+e),console.log("rowIdx: "+t)},n.prototype.onMouseOver=function(e,t){console.log("Legend onMouseOver method"),console.log("rowData: "+e),console.log("rowIdx: "+t)},n});