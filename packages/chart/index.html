<!DOCTYPE html>
<html>

<head>
    <title>Home</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
        }

        h1 {
            text-align: center;
            margin-top: 50px;
        }

        .controls {
            max-width: 800px;
            margin: 20px auto;
            padding: 15px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .control-group {
            margin: 10px 0;
        }

        .control-group label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 14px;
        }

        .control-group input[type="checkbox"] {
            margin-right: 10px;
            cursor: pointer;
            width: 18px;
            height: 18px;
        }

        .control-group .description {
            margin-left: 28px;
            font-size: 12px;
            color: #666;
            font-style: italic;
        }

        #placeholder,
        #placeholder2,
        #placeholder3 {
            width: 100%;
            height: 500px;
            background-color: #fff;
            margin-top: 20px;
        }
    </style>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@hpcc-js/dgrid-shim@2.26.0/dist/index.min.js"></script>
</head>

<body onresize="doResize()">
    <h1>ESM Quick Test</h1>

    <div class="controls">
        <div class="control-group">
            <label>
                <input type="checkbox" checked id="tabNavigationToggleScatter">
                Enable Tab Navigation for Scatter Chart
            </label>
            <div class="description">
                When enabled, you can use Tab to navigate through points and Space/Enter to select them
            </div>
        </div>
        <div class="control-group">
            <label for="scatterVariantSelect" style="cursor: default;">
                Scatter Variant
            </label>
            <select id="scatterVariantSelect" style="margin-left: 0; width: 220px; padding: 4px;">
                <option value="points" selected>Points Only</option>
                <option value="line">Points + Line</option>
                <option value="area">Line + Area Fill</option>
            </select>
            <div class="description">
                Quickly preview how scatter behaves with lines or area fill enabled
            </div>
        </div>
        <div class="control-group">
            <label>
                <input type="checkbox" checked id="tabNavigationToggle">
                Enable Tab Navigation for Column Chart
            </label>
            <div class="description">
                When enabled, you can use Tab to navigate through columns and Space/Enter to select them
            </div>
        </div>
        <div class="control-group">
            <label>
                <input type="checkbox" checked id="tabNavigationTogglePie">
                Enable Tab Navigation for Pie Chart
            </label>
            <div class="description">
                When enabled, you can use Tab to navigate through slices and Space/Enter to select them
            </div>
        </div>
    </div>

    <div id="placeholder2" tabindex="0"></div>
    <div id="placeholder3" tabindex="0"></div>
    <div id="placeholder" tabindex="0"></div>

    <script type="module">
        import { Column } from "./src/index.ts";

        const simple = {
            ND: {
                columns: ["Subject", "Year 1", "Year 2", "Year 3", "Year 4"],
                data: [
                    ["English", 5, 43, 41, 92],
                    ["English II", 17, 43, 83, 93],
                    ["English III", 6, 43, 64, 93],
                    ["Geography", 7, 45, 52, 83],
                    ["Geography II", 16, 73, 52, 83],
                    ["Geography III", 26, 83, 11, 72],
                    ["Science", 66, 60, 85, 6],
                    ["Science II", 46, 20, 53, 7],
                    ["Science III", 46, 20, 38, 7],
                    ["Math", 98, 30, 23, 13],
                    ["Math II", 76, 30, 34, 6],
                    ["Math III", 80, 30, 27, 8]
                ]
            },
            WordCloud: {
                columns: ["Word", "Weight"],
                words: ["Myriel", "Napoleon", "Mlle.Baptistine", "Mme.Magloire", "CountessdeLo", "Geborand", "Champtercier", "Cravatte", "Count", "OldMan", "Labarre", "Valjean", "Marguerite", "Mme.deR", "Isabeau", "Gervais", "Tholomyes", "Listolier", "Fameuil", "Blacheville", "Favourite", "Dahlia", "Zephine", "Fantine", "Mme.Thenardier", "Thenardier", "Cosette", "Javert", "Fauchelevent", "Bamatabois", "Perpetue", "Simplice", "Scaufflaire", "Woman1", "Judge", "Champmathieu", "Brevet", "Chenildieu", "Cochepaille", "Pontmercy", "Boulatruelle", "Eponine", "Anzelma", "Woman2", "MotherInnocent", "Gribier", "Jondrette", "Mme.Burgon", "Gavroche", "Gillenormand", "Magnon", "Mlle.Gillenormand", "Mme.Pontmercy", "Mlle.Vaubois", "Lt.Gillenormand", "Marius", "BaronessT", "Mabeuf", "Enjolras", "Combeferre", "Prouvaire", "Feuilly", "Courfeyrac", "Bahorel", "Bossuet", "Joly", "Grantaire", "MotherPlutarch", "Gueulemer", "Babet", "Claquesous", "Montparnasse", "Toussaint", "Child1", "Child2", "Brujon", "Mme.Hucheloup"]
            }
        };

        window.__column = new Column()
            .target("placeholder")
            .columns(["Category", "Series-1", "Series-2"])
            .data([
                ["A", 34, 21],
                ["B", 55, 34],
                ["C", 54, 90],
                ["D", 80, 153],
                ["E", 86, 92],
                ["F", 144, 233]
            ])
            .tooltipValueFormat(",.0f")
            .showValue(true)
            .xAxisFocus(false)
            .tabNavigation(true)
            .render()
            ;
    </script>

    <script type="module">
        import { Pie } from "./src/index.ts";

        window.__pie = new Pie()
            .target("placeholder2")
            .columns(["Category", "Series-1", "Series-2"])
            .data([
                ["B", 55],
                ["C", 54],
                ["D", 80],
                ["E", 86],
                ["A", 34],
                ["F", 144]
            ])
            .tabNavigation(true)
            .render()
            ;
    </script>

    <script type="module">
        import { Scatter } from "./src/index.ts";

        window.__scatter = new Scatter()
            .target("placeholder3")
            .columns(["Category", "Series-1", "Series-2"])
            .data([
                ["A", 15, 25],
                ["B", 25, 45],
                ["C", 40, 60],
                ["D", 55, 75],
                ["E", 65, 90],
                ["F", 80, 110]
            ])
            .pointShape("cross")
            .pointSize(10)
            .showValue(false)
            .tabNavigation(true)
            .render()
            ;
    </script>
    <script>

        function doResize() {
            window.__column?.resize()?.render();
            window.__pie?.resize()?.render();
            window.__scatter?.resize()?.render();
        }

        document.getElementById('tabNavigationToggle').addEventListener('change', function (e) {
            window.__column
                .tabNavigation(e.target.checked)
                .lazyRender()
                ;
        });

        document.getElementById('tabNavigationTogglePie').addEventListener('change', function (e) {
            window.__pie
                .tabNavigation(e.target.checked)
                .lazyRender()
                ;
        });

        document.getElementById('tabNavigationToggleScatter').addEventListener('change', function (e) {
            window.__scatter
                .tabNavigation(e.target.checked)
                .lazyRender()
                ;
        });

        const scatterVariantSelect = document.getElementById('scatterVariantSelect');

        function applyScatterVariant(variant) {
            if (!window.__scatter) return;
            switch (variant) {
                case "line":
                    window.__scatter
                        .interpolate("linear")
                        .interpolateFill(false)
                        .showValue(false)
                        ;
                    break;
                case "area":
                    window.__scatter
                        .interpolate("linear")
                        .interpolateFill(true)
                        .interpolateFillOpacity(0.35)
                        .showValue(false)
                        ;
                    break;
                case "points":
                default:
                    window.__scatter
                        .interpolate("")
                        .interpolateFill(false)
                        .pointShape("cross")
                        .pointSize(10)
                        .showValue(false)
                        ;
                    break;
            }
            window.__scatter.lazyRender();
        }

        scatterVariantSelect.addEventListener('change', function (e) {
            applyScatterVariant(e.target.value);
        });

        applyScatterVariant(scatterVariantSelect.value);


    </script>
</body>

</html>