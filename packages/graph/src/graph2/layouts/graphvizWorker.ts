export type Engine = "circo" | "dot" | "fdp" | "neato" | "osage" | "patchwork" | "twopi";

export interface Cluster {
    id: string;
    text: string;
    children: Array<Cluster | Node>;

    // result  ---
    x?: number;
    y?: number;
    width?: number;
    height?: number;
}

export interface Node {
    id: string;
    text: string;
    width: number;
    height: number;

    // result  ---
    x?: number;
    y?: number;
}

export function isCluster(item: Cluster | Node): item is Cluster {
    return (item as Cluster).children !== undefined;
}

export interface Link {
    id: string;
    source: Node;
    target: Node;
    text: string;

    // result  ---
    points?: Array<[number, number]>;
}

export interface Data {
    items: Array<Cluster | Node>;
    links: Link[];
}

export interface Options {
    engine: Engine;
    wasmFolder: string;
}

export function graphviz(data: Data, options: Options) {
    return new Promise(resolve => {
        // eslint-disable-next-line quotes
        const workerCode = `!function(){"use strict";function t(t){var e={exports:{}};return t(e,e.exports),e.exports}t(function(t,e){var r,n=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t){var e,n,o=void 0!==(t=t||{})?t:{};o.ready=new Promise(function(t,r){e=t,n=r});var i,a={};for(i in o)o.hasOwnProperty(i)&&(a[i]=o[i]);var s,u,c="./this.program",f=!0,l="";"undefined"!=typeof document&&document.currentScript&&(l=document.currentScript.src),r&&(l=r),l=0!==l.indexOf("blob:")?l.substr(0,l.lastIndexOf("/")+1):"",s=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText};var d=o.print||console.log.bind(console),p=o.printErr||console.warn.bind(console);for(i in a)a.hasOwnProperty(i)&&(o[i]=a[i]);a=null,o.arguments&&o.arguments,o.thisProgram&&(c=o.thisProgram),o.quit&&o.quit;var h,m,_=16;o.wasmBinary&&(h=o.wasmBinary),o.noExitRuntime&&o.noExitRuntime,"object"!=typeof WebAssembly&&I("no native wasm support detected");var v=!1;function w(t,e){t||I("Assertion failed: "+e)}var y,g,E,b,k,D="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function S(t,e,r){for(var n=e+r,o=e;t[o]&&!(o>=n);)++o;if(o-e>16&&t.subarray&&D)return D.decode(t.subarray(e,o));for(var i="";e<o;){var a=t[e++];if(128&a){var s=63&t[e++];if(192!=(224&a)){var u=63&t[e++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&t[e++])<65536)i+=String.fromCharCode(a);else{var c=a-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}function F(t,e){return t?S(E,t,e):""}function P(t,e,r,n){if(!(n>0))return 0;for(var o=r,i=r+n-1,a=0;a<t.length;++a){var s=t.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++a)),s<=127){if(r>=i)break;e[r++]=s}else if(s<=2047){if(r+1>=i)break;e[r++]=192|s>>6,e[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;e[r++]=224|s>>12,e[r++]=128|s>>6&63,e[r++]=128|63&s}else{if(r+3>=i)break;e[r++]=240|s>>18,e[r++]=128|s>>12&63,e[r++]=128|s>>6&63,e[r++]=128|63&s}}return e[r]=0,r-o}function x(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&t.charCodeAt(++r)),n<=127?++e:e+=n<=2047?2:n<=65535?3:4}return e}function M(t){y=t,o.HEAP8=g=new Int8Array(t),o.HEAP16=new Int16Array(t),o.HEAP32=b=new Int32Array(t),o.HEAPU8=E=new Uint8Array(t),o.HEAPU16=new Uint16Array(t),o.HEAPU32=new Uint32Array(t),o.HEAPF32=new Float32Array(t),o.HEAPF64=k=new Float64Array(t)}o.INITIAL_MEMORY;var A,R=[],T=[],O=[],C=[],j=0,N=null;function B(t){j++,o.monitorRunDependencies&&o.monitorRunDependencies(j)}function z(t){if(j--,o.monitorRunDependencies&&o.monitorRunDependencies(j),0==j&&N){var e=N;N=null,e()}}function I(t){o.onAbort&&o.onAbort(t),p(t+=""),v=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(t);throw n(e),e}o.preloadedImages={},o.preloadedAudios={};var L="data:application/octet-stream;base64,";function U(t){return e=t,r=L,String.prototype.startsWith?e.startsWith(r):0===e.indexOf(r);var e,r}var H,W,Y,q="expatlib.wasm";function V(t){try{if(t==q&&h)return new Uint8Array(h);if(!u)throw"both async and sync fetching of the wasm failed"}catch(t){I(t)}}U(q)||(H=q,q=o.locateFile?o.locateFile(H,l):l+H);var J={1284:function(t){var e=o.getCache(o.CExpatJS)[t];if(!e.hasOwnProperty("startElement"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::startElement.";e.startElement()},1504:function(t){var e=o.getCache(o.CExpatJS)[t];if(!e.hasOwnProperty("endElement"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::endElement.";e.endElement()},1716:function(t){var e=o.getCache(o.CExpatJS)[t];if(!e.hasOwnProperty("characterData"))throw"a JSImplementation must implement all functions, you forgot CExpatJS::characterData.";e.characterData()}};function X(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var r=e.func;"number"==typeof r?void 0===e.arg?A.get(r)():A.get(r)(e.arg):r(void 0===e.arg?null:e.arg)}else e(o)}}var G={splitPath:function(t){return/^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/.exec(t).slice(1)},normalizeArray:function(t,e){for(var r=0,n=t.length-1;n>=0;n--){var o=t[n];"."===o?t.splice(n,1):".."===o?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r;r--)t.unshift("..");return t},normalize:function(t){var e="/"===t.charAt(0),r="/"===t.substr(-1);return(t=G.normalizeArray(t.split("/").filter(function(t){return!!t}),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},dirname:function(t){var e=G.splitPath(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},basename:function(t){if("/"===t)return"/";var e=(t=(t=G.normalize(t)).replace(/\\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)},extname:function(t){return G.splitPath(t)[3]},join:function(){var t=Array.prototype.slice.call(arguments,0);return G.normalize(t.join("/"))},join2:function(t,e){return G.normalize(t+"/"+e)}},K={resolve:function(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var n=r>=0?arguments[r]:tt.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";t=n+"/"+t,e="/"===n.charAt(0)}return(e?"/":"")+(t=G.normalizeArray(t.split("/").filter(function(t){return!!t}),!e).join("/"))||"."},relative:function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=K.resolve(t).substr(1),e=K.resolve(e).substr(1);for(var n=r(t.split("/")),o=r(e.split("/")),i=Math.min(n.length,o.length),a=i,s=0;s<i;s++)if(n[s]!==o[s]){a=s;break}var u=[];for(s=a;s<n.length;s++)u.push("..");return(u=u.concat(o.slice(a))).join("/")}},Z={ttys:[],init:function(){},shutdown:function(){},register:function(t,e){Z.ttys[t]={input:[],output:[],ops:e},tt.registerDevice(t,Z.stream_ops)},stream_ops:{open:function(t){var e=Z.ttys[t.node.rdev];if(!e)throw new tt.ErrnoError(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.ops.flush(t.tty)},flush:function(t){t.tty.ops.flush(t.tty)},read:function(t,e,r,n,o){if(!t.tty||!t.tty.ops.get_char)throw new tt.ErrnoError(60);for(var i=0,a=0;a<n;a++){var s;try{s=t.tty.ops.get_char(t.tty)}catch(t){throw new tt.ErrnoError(29)}if(void 0===s&&0===i)throw new tt.ErrnoError(6);if(null==s)break;i++,e[r+a]=s}return i&&(t.node.timestamp=Date.now()),i},write:function(t,e,r,n,o){if(!t.tty||!t.tty.ops.put_char)throw new tt.ErrnoError(60);try{for(var i=0;i<n;i++)t.tty.ops.put_char(t.tty,e[r+i])}catch(t){throw new tt.ErrnoError(29)}return n&&(t.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(t){if(!t.input.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\\n"),!e)return null;t.input=st(e,!0)}return t.input.shift()},put_char:function(t,e){null===e||10===e?(d(S(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&t.output.length>0&&(d(S(t.output,0)),t.output=[])}},default_tty1_ops:{put_char:function(t,e){null===e||10===e?(p(S(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&t.output.length>0&&(p(S(t.output,0)),t.output=[])}}};function $(t){for(var e=function(t,e){return e||(e=_),Math.ceil(t/e)*e}(t,16384),r=xt(e);t<e;)g[r+t++]=0;return r}var Q={ops_table:null,mount:function(t){return Q.createNode(null,"/",16895,0)},createNode:function(t,e,r,n){if(tt.isBlkdev(r)||tt.isFIFO(r))throw new tt.ErrnoError(63);Q.ops_table||(Q.ops_table={dir:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr,lookup:Q.node_ops.lookup,mknod:Q.node_ops.mknod,rename:Q.node_ops.rename,unlink:Q.node_ops.unlink,rmdir:Q.node_ops.rmdir,readdir:Q.node_ops.readdir,symlink:Q.node_ops.symlink},stream:{llseek:Q.stream_ops.llseek}},file:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr},stream:{llseek:Q.stream_ops.llseek,read:Q.stream_ops.read,write:Q.stream_ops.write,allocate:Q.stream_ops.allocate,mmap:Q.stream_ops.mmap,msync:Q.stream_ops.msync}},link:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr,readlink:Q.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr},stream:tt.chrdev_stream_ops}});var o=tt.createNode(t,e,r,n);return tt.isDir(o.mode)?(o.node_ops=Q.ops_table.dir.node,o.stream_ops=Q.ops_table.dir.stream,o.contents={}):tt.isFile(o.mode)?(o.node_ops=Q.ops_table.file.node,o.stream_ops=Q.ops_table.file.stream,o.usedBytes=0,o.contents=null):tt.isLink(o.mode)?(o.node_ops=Q.ops_table.link.node,o.stream_ops=Q.ops_table.link.stream):tt.isChrdev(o.mode)&&(o.node_ops=Q.ops_table.chrdev.node,o.stream_ops=Q.ops_table.chrdev.stream),o.timestamp=Date.now(),t&&(t.contents[e]=o),o},getFileDataAsRegularArray:function(t){if(t.contents&&t.contents.subarray){for(var e=[],r=0;r<t.usedBytes;++r)e.push(t.contents[r]);return e}return t.contents},getFileDataAsTypedArray:function(t){return t.contents?t.contents.subarray?t.contents.subarray(0,t.usedBytes):new Uint8Array(t.contents):new Uint8Array(0)},expandFileStorage:function(t,e){var r=t.contents?t.contents.length:0;if(!(r>=e)){e=Math.max(e,r*(r<1048576?2:1.125)>>>0),0!=r&&(e=Math.max(e,256));var n=t.contents;t.contents=new Uint8Array(e),t.usedBytes>0&&t.contents.set(n.subarray(0,t.usedBytes),0)}},resizeFileStorage:function(t,e){if(t.usedBytes!=e){if(0==e)return t.contents=null,void(t.usedBytes=0);if(!t.contents||t.contents.subarray){var r=t.contents;return t.contents=new Uint8Array(e),r&&t.contents.set(r.subarray(0,Math.min(e,t.usedBytes))),void(t.usedBytes=e)}if(t.contents||(t.contents=[]),t.contents.length>e)t.contents.length=e;else for(;t.contents.length<e;)t.contents.push(0);t.usedBytes=e}},node_ops:{getattr:function(t){var e={};return e.dev=tt.isChrdev(t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,tt.isDir(t.mode)?e.size=4096:tt.isFile(t.mode)?e.size=t.usedBytes:tt.isLink(t.mode)?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&Q.resizeFileStorage(t,e.size)},lookup:function(t,e){throw tt.genericErrors[44]},mknod:function(t,e,r,n){return Q.createNode(t,e,r,n)},rename:function(t,e,r){if(tt.isDir(t.mode)){var n;try{n=tt.lookupNode(e,r)}catch(t){}if(n)for(var o in n.contents)throw new tt.ErrnoError(55)}delete t.parent.contents[t.name],t.name=r,e.contents[r]=t,t.parent=e},unlink:function(t,e){delete t.contents[e]},rmdir:function(t,e){var r=tt.lookupNode(t,e);for(var n in r.contents)throw new tt.ErrnoError(55);delete t.contents[e]},readdir:function(t){var e=[".",".."];for(var r in t.contents)t.contents.hasOwnProperty(r)&&e.push(r);return e},symlink:function(t,e,r){var n=Q.createNode(t,e,41471,0);return n.link=r,n},readlink:function(t){if(!tt.isLink(t.mode))throw new tt.ErrnoError(28);return t.link}},stream_ops:{read:function(t,e,r,n,o){var i=t.node.contents;if(o>=t.node.usedBytes)return 0;var a=Math.min(t.node.usedBytes-o,n);if(a>8&&i.subarray)e.set(i.subarray(o,o+a),r);else for(var s=0;s<a;s++)e[r+s]=i[o+s];return a},write:function(t,e,r,n,o,i){if(e.buffer===g.buffer&&(i=!1),!n)return 0;var a=t.node;if(a.timestamp=Date.now(),e.subarray&&(!a.contents||a.contents.subarray)){if(i)return a.contents=e.subarray(r,r+n),a.usedBytes=n,n;if(0===a.usedBytes&&0===o)return a.contents=e.slice(r,r+n),a.usedBytes=n,n;if(o+n<=a.usedBytes)return a.contents.set(e.subarray(r,r+n),o),n}if(Q.expandFileStorage(a,o+n),a.contents.subarray&&e.subarray)a.contents.set(e.subarray(r,r+n),o);else for(var s=0;s<n;s++)a.contents[o+s]=e[r+s];return a.usedBytes=Math.max(a.usedBytes,o+n),n},llseek:function(t,e,r){var n=e;if(1===r?n+=t.position:2===r&&tt.isFile(t.node.mode)&&(n+=t.node.usedBytes),n<0)throw new tt.ErrnoError(28);return n},allocate:function(t,e,r){Q.expandFileStorage(t.node,e+r),t.node.usedBytes=Math.max(t.node.usedBytes,e+r)},mmap:function(t,e,r,n,o,i){if(w(0===e),!tt.isFile(t.node.mode))throw new tt.ErrnoError(43);var a,s,u=t.node.contents;if(2&i||u.buffer!==y){if((n>0||n+r<u.length)&&(u=u.subarray?u.subarray(n,n+r):Array.prototype.slice.call(u,n,n+r)),s=!0,!(a=$(r)))throw new tt.ErrnoError(48);g.set(u,a)}else s=!1,a=u.byteOffset;return{ptr:a,allocated:s}},msync:function(t,e,r,n,o){if(!tt.isFile(t.node.mode))throw new tt.ErrnoError(43);return 2&o?0:(Q.stream_ops.write(t,e,0,n,r,!1),0)}}},tt={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(t,e){if(e=e||{},!(t=K.resolve(tt.cwd(),t)))return{path:"",node:null};var r={follow_mount:!0,recurse_count:0};for(var n in r)void 0===e[n]&&(e[n]=r[n]);if(e.recurse_count>8)throw new tt.ErrnoError(32);for(var o=G.normalizeArray(t.split("/").filter(function(t){return!!t}),!1),i=tt.root,a="/",s=0;s<o.length;s++){var u=s===o.length-1;if(u&&e.parent)break;if(i=tt.lookupNode(i,o[s]),a=G.join2(a,o[s]),tt.isMountpoint(i)&&(!u||u&&e.follow_mount)&&(i=i.mounted.root),!u||e.follow)for(var c=0;tt.isLink(i.mode);){var f=tt.readlink(a);if(a=K.resolve(G.dirname(a),f),i=tt.lookupPath(a,{recurse_count:e.recurse_count}).node,c++>40)throw new tt.ErrnoError(32)}}return{path:a,node:i}},getPath:function(t){for(var e;;){if(tt.isRoot(t)){var r=t.mount.mountpoint;return e?"/"!==r[r.length-1]?r+"/"+e:r+e:r}e=e?t.name+"/"+e:t.name,t=t.parent}},hashName:function(t,e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n)|0;return(t+r>>>0)%tt.nameTable.length},hashAddNode:function(t){var e=tt.hashName(t.parent.id,t.name);t.name_next=tt.nameTable[e],tt.nameTable[e]=t},hashRemoveNode:function(t){var e=tt.hashName(t.parent.id,t.name);if(tt.nameTable[e]===t)tt.nameTable[e]=t.name_next;else for(var r=tt.nameTable[e];r;){if(r.name_next===t){r.name_next=t.name_next;break}r=r.name_next}},lookupNode:function(t,e){var r=tt.mayLookup(t);if(r)throw new tt.ErrnoError(r,t);for(var n=tt.hashName(t.id,e),o=tt.nameTable[n];o;o=o.name_next){var i=o.name;if(o.parent.id===t.id&&i===e)return o}return tt.lookup(t,e)},createNode:function(t,e,r,n){var o=new tt.FSNode(t,e,r,n);return tt.hashAddNode(o),o},destroyNode:function(t){tt.hashRemoveNode(t)},isRoot:function(t){return t===t.parent},isMountpoint:function(t){return!!t.mounted},isFile:function(t){return 32768==(61440&t)},isDir:function(t){return 16384==(61440&t)},isLink:function(t){return 40960==(61440&t)},isChrdev:function(t){return 8192==(61440&t)},isBlkdev:function(t){return 24576==(61440&t)},isFIFO:function(t){return 4096==(61440&t)},isSocket:function(t){return 49152==(49152&t)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(t){var e=tt.flagModes[t];if(void 0===e)throw new Error("Unknown file open mode: "+t);return e},flagsToPermissionString:function(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e},nodePermissions:function(t,e){return tt.ignorePermissions?0:(-1===e.indexOf("r")||292&t.mode)&&(-1===e.indexOf("w")||146&t.mode)&&(-1===e.indexOf("x")||73&t.mode)?0:2},mayLookup:function(t){var e=tt.nodePermissions(t,"x");return e||(t.node_ops.lookup?0:2)},mayCreate:function(t,e){try{return tt.lookupNode(t,e),20}catch(t){}return tt.nodePermissions(t,"wx")},mayDelete:function(t,e,r){var n;try{n=tt.lookupNode(t,e)}catch(t){return t.errno}var o=tt.nodePermissions(t,"wx");if(o)return o;if(r){if(!tt.isDir(n.mode))return 54;if(tt.isRoot(n)||tt.getPath(n)===tt.cwd())return 10}else if(tt.isDir(n.mode))return 31;return 0},mayOpen:function(t,e){return t?tt.isLink(t.mode)?32:tt.isDir(t.mode)&&("r"!==tt.flagsToPermissionString(e)||512&e)?31:tt.nodePermissions(t,tt.flagsToPermissionString(e)):44},MAX_OPEN_FDS:4096,nextfd:function(t,e){t=t||0,e=e||tt.MAX_OPEN_FDS;for(var r=t;r<=e;r++)if(!tt.streams[r])return r;throw new tt.ErrnoError(33)},getStream:function(t){return tt.streams[t]},createStream:function(t,e,r){tt.FSStream||(tt.FSStream=function(){},tt.FSStream.prototype={object:{get:function(){return this.node},set:function(t){this.node=t}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var n=new tt.FSStream;for(var o in t)n[o]=t[o];t=n;var i=tt.nextfd(e,r);return t.fd=i,tt.streams[i]=t,t},closeStream:function(t){tt.streams[t]=null},chrdev_stream_ops:{open:function(t){var e=tt.getDevice(t.node.rdev);t.stream_ops=e.stream_ops,t.stream_ops.open&&t.stream_ops.open(t)},llseek:function(){throw new tt.ErrnoError(70)}},major:function(t){return t>>8},minor:function(t){return 255&t},makedev:function(t,e){return t<<8|e},registerDevice:function(t,e){tt.devices[t]={stream_ops:e}},getDevice:function(t){return tt.devices[t]},getMounts:function(t){for(var e=[],r=[t];r.length;){var n=r.pop();e.push(n),r.push.apply(r,n.mounts)}return e},syncfs:function(t,e){"function"==typeof t&&(e=t,t=!1),tt.syncFSRequests++,tt.syncFSRequests>1&&p("warning: "+tt.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var r=tt.getMounts(tt.root.mount),n=0;function o(t){return tt.syncFSRequests--,e(t)}function i(t){if(t)return i.errored?void 0:(i.errored=!0,o(t));++n>=r.length&&o(null)}r.forEach(function(e){if(!e.type.syncfs)return i(null);e.type.syncfs(e,t,i)})},mount:function(t,e,r){var n,o="/"===r,i=!r;if(o&&tt.root)throw new tt.ErrnoError(10);if(!o&&!i){var a=tt.lookupPath(r,{follow_mount:!1});if(r=a.path,n=a.node,tt.isMountpoint(n))throw new tt.ErrnoError(10);if(!tt.isDir(n.mode))throw new tt.ErrnoError(54)}var s={type:t,opts:e,mountpoint:r,mounts:[]},u=t.mount(s);return u.mount=s,s.root=u,o?tt.root=u:n&&(n.mounted=s,n.mount&&n.mount.mounts.push(s)),u},unmount:function(t){var e=tt.lookupPath(t,{follow_mount:!1});if(!tt.isMountpoint(e.node))throw new tt.ErrnoError(28);var r=e.node,n=r.mounted,o=tt.getMounts(n);Object.keys(tt.nameTable).forEach(function(t){for(var e=tt.nameTable[t];e;){var r=e.name_next;-1!==o.indexOf(e.mount)&&tt.destroyNode(e),e=r}}),r.mounted=null;var i=r.mount.mounts.indexOf(n);r.mount.mounts.splice(i,1)},lookup:function(t,e){return t.node_ops.lookup(t,e)},mknod:function(t,e,r){var n=tt.lookupPath(t,{parent:!0}).node,o=G.basename(t);if(!o||"."===o||".."===o)throw new tt.ErrnoError(28);var i=tt.mayCreate(n,o);if(i)throw new tt.ErrnoError(i);if(!n.node_ops.mknod)throw new tt.ErrnoError(63);return n.node_ops.mknod(n,o,e,r)},create:function(t,e){return e=void 0!==e?e:438,e&=4095,e|=32768,tt.mknod(t,e,0)},mkdir:function(t,e){return e=void 0!==e?e:511,e&=1023,e|=16384,tt.mknod(t,e,0)},mkdirTree:function(t,e){for(var r=t.split("/"),n="",o=0;o<r.length;++o)if(r[o]){n+="/"+r[o];try{tt.mkdir(n,e)}catch(t){if(20!=t.errno)throw t}}},mkdev:function(t,e,r){return void 0===r&&(r=e,e=438),e|=8192,tt.mknod(t,e,r)},symlink:function(t,e){if(!K.resolve(t))throw new tt.ErrnoError(44);var r=tt.lookupPath(e,{parent:!0}).node;if(!r)throw new tt.ErrnoError(44);var n=G.basename(e),o=tt.mayCreate(r,n);if(o)throw new tt.ErrnoError(o);if(!r.node_ops.symlink)throw new tt.ErrnoError(63);return r.node_ops.symlink(r,n,t)},rename:function(t,e){var r,n,o=G.dirname(t),i=G.dirname(e),a=G.basename(t),s=G.basename(e);if(r=tt.lookupPath(t,{parent:!0}).node,n=tt.lookupPath(e,{parent:!0}).node,!r||!n)throw new tt.ErrnoError(44);if(r.mount!==n.mount)throw new tt.ErrnoError(75);var u,c=tt.lookupNode(r,a),f=K.relative(t,i);if("."!==f.charAt(0))throw new tt.ErrnoError(28);if("."!==(f=K.relative(e,o)).charAt(0))throw new tt.ErrnoError(55);try{u=tt.lookupNode(n,s)}catch(t){}if(c!==u){var l=tt.isDir(c.mode),d=tt.mayDelete(r,a,l);if(d)throw new tt.ErrnoError(d);if(d=u?tt.mayDelete(n,s,l):tt.mayCreate(n,s))throw new tt.ErrnoError(d);if(!r.node_ops.rename)throw new tt.ErrnoError(63);if(tt.isMountpoint(c)||u&&tt.isMountpoint(u))throw new tt.ErrnoError(10);if(n!==r&&(d=tt.nodePermissions(r,"w")))throw new tt.ErrnoError(d);try{tt.trackingDelegate.willMovePath&&tt.trackingDelegate.willMovePath(t,e)}catch(r){p("FS.trackingDelegate['willMovePath']('"+t+"', '"+e+"') threw an exception: "+r.message)}tt.hashRemoveNode(c);try{r.node_ops.rename(c,n,s)}catch(t){throw t}finally{tt.hashAddNode(c)}try{tt.trackingDelegate.onMovePath&&tt.trackingDelegate.onMovePath(t,e)}catch(r){p("FS.trackingDelegate['onMovePath']('"+t+"', '"+e+"') threw an exception: "+r.message)}}},rmdir:function(t){var e=tt.lookupPath(t,{parent:!0}).node,r=G.basename(t),n=tt.lookupNode(e,r),o=tt.mayDelete(e,r,!0);if(o)throw new tt.ErrnoError(o);if(!e.node_ops.rmdir)throw new tt.ErrnoError(63);if(tt.isMountpoint(n))throw new tt.ErrnoError(10);try{tt.trackingDelegate.willDeletePath&&tt.trackingDelegate.willDeletePath(t)}catch(e){p("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+e.message)}e.node_ops.rmdir(e,r),tt.destroyNode(n);try{tt.trackingDelegate.onDeletePath&&tt.trackingDelegate.onDeletePath(t)}catch(e){p("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+e.message)}},readdir:function(t){var e=tt.lookupPath(t,{follow:!0}).node;if(!e.node_ops.readdir)throw new tt.ErrnoError(54);return e.node_ops.readdir(e)},unlink:function(t){var e=tt.lookupPath(t,{parent:!0}).node,r=G.basename(t),n=tt.lookupNode(e,r),o=tt.mayDelete(e,r,!1);if(o)throw new tt.ErrnoError(o);if(!e.node_ops.unlink)throw new tt.ErrnoError(63);if(tt.isMountpoint(n))throw new tt.ErrnoError(10);try{tt.trackingDelegate.willDeletePath&&tt.trackingDelegate.willDeletePath(t)}catch(e){p("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+e.message)}e.node_ops.unlink(e,r),tt.destroyNode(n);try{tt.trackingDelegate.onDeletePath&&tt.trackingDelegate.onDeletePath(t)}catch(e){p("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+e.message)}},readlink:function(t){var e=tt.lookupPath(t).node;if(!e)throw new tt.ErrnoError(44);if(!e.node_ops.readlink)throw new tt.ErrnoError(28);return K.resolve(tt.getPath(e.parent),e.node_ops.readlink(e))},stat:function(t,e){var r=tt.lookupPath(t,{follow:!e}).node;if(!r)throw new tt.ErrnoError(44);if(!r.node_ops.getattr)throw new tt.ErrnoError(63);return r.node_ops.getattr(r)},lstat:function(t){return tt.stat(t,!0)},chmod:function(t,e,r){var n;if(!(n="string"==typeof t?tt.lookupPath(t,{follow:!r}).node:t).node_ops.setattr)throw new tt.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&e|-4096&n.mode,timestamp:Date.now()})},lchmod:function(t,e){tt.chmod(t,e,!0)},fchmod:function(t,e){var r=tt.getStream(t);if(!r)throw new tt.ErrnoError(8);tt.chmod(r.node,e)},chown:function(t,e,r,n){var o;if(!(o="string"==typeof t?tt.lookupPath(t,{follow:!n}).node:t).node_ops.setattr)throw new tt.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:function(t,e,r){tt.chown(t,e,r,!0)},fchown:function(t,e,r){var n=tt.getStream(t);if(!n)throw new tt.ErrnoError(8);tt.chown(n.node,e,r)},truncate:function(t,e){if(e<0)throw new tt.ErrnoError(28);var r;if(!(r="string"==typeof t?tt.lookupPath(t,{follow:!0}).node:t).node_ops.setattr)throw new tt.ErrnoError(63);if(tt.isDir(r.mode))throw new tt.ErrnoError(31);if(!tt.isFile(r.mode))throw new tt.ErrnoError(28);var n=tt.nodePermissions(r,"w");if(n)throw new tt.ErrnoError(n);r.node_ops.setattr(r,{size:e,timestamp:Date.now()})},ftruncate:function(t,e){var r=tt.getStream(t);if(!r)throw new tt.ErrnoError(8);if(0==(2097155&r.flags))throw new tt.ErrnoError(28);tt.truncate(r.node,e)},utime:function(t,e,r){var n=tt.lookupPath(t,{follow:!0}).node;n.node_ops.setattr(n,{timestamp:Math.max(e,r)})},open:function(t,e,r,n,i){if(""===t)throw new tt.ErrnoError(44);var a;if(r=void 0===r?438:r,r=64&(e="string"==typeof e?tt.modeStringToFlags(e):e)?4095&r|32768:0,"object"==typeof t)a=t;else{t=G.normalize(t);try{a=tt.lookupPath(t,{follow:!(131072&e)}).node}catch(t){}}var s=!1;if(64&e)if(a){if(128&e)throw new tt.ErrnoError(20)}else a=tt.mknod(t,r,0),s=!0;if(!a)throw new tt.ErrnoError(44);if(tt.isChrdev(a.mode)&&(e&=-513),65536&e&&!tt.isDir(a.mode))throw new tt.ErrnoError(54);if(!s){var u=tt.mayOpen(a,e);if(u)throw new tt.ErrnoError(u)}512&e&&tt.truncate(a,0),e&=-131713;var c=tt.createStream({node:a,path:tt.getPath(a),flags:e,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1},n,i);c.stream_ops.open&&c.stream_ops.open(c),!o.logReadFiles||1&e||(tt.readFiles||(tt.readFiles={}),t in tt.readFiles||(tt.readFiles[t]=1,p("FS.trackingDelegate error on read file: "+t)));try{if(tt.trackingDelegate.onOpenFile){var f=0;1!=(2097155&e)&&(f|=tt.tracking.openFlags.READ),0!=(2097155&e)&&(f|=tt.tracking.openFlags.WRITE),tt.trackingDelegate.onOpenFile(t,f)}}catch(e){p("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+e.message)}return c},close:function(t){if(tt.isClosed(t))throw new tt.ErrnoError(8);t.getdents&&(t.getdents=null);try{t.stream_ops.close&&t.stream_ops.close(t)}catch(t){throw t}finally{tt.closeStream(t.fd)}t.fd=null},isClosed:function(t){return null===t.fd},llseek:function(t,e,r){if(tt.isClosed(t))throw new tt.ErrnoError(8);if(!t.seekable||!t.stream_ops.llseek)throw new tt.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new tt.ErrnoError(28);return t.position=t.stream_ops.llseek(t,e,r),t.ungotten=[],t.position},read:function(t,e,r,n,o){if(n<0||o<0)throw new tt.ErrnoError(28);if(tt.isClosed(t))throw new tt.ErrnoError(8);if(1==(2097155&t.flags))throw new tt.ErrnoError(8);if(tt.isDir(t.node.mode))throw new tt.ErrnoError(31);if(!t.stream_ops.read)throw new tt.ErrnoError(28);var i=void 0!==o;if(i){if(!t.seekable)throw new tt.ErrnoError(70)}else o=t.position;var a=t.stream_ops.read(t,e,r,n,o);return i||(t.position+=a),a},write:function(t,e,r,n,o,i){if(n<0||o<0)throw new tt.ErrnoError(28);if(tt.isClosed(t))throw new tt.ErrnoError(8);if(0==(2097155&t.flags))throw new tt.ErrnoError(8);if(tt.isDir(t.node.mode))throw new tt.ErrnoError(31);if(!t.stream_ops.write)throw new tt.ErrnoError(28);t.seekable&&1024&t.flags&&tt.llseek(t,0,2);var a=void 0!==o;if(a){if(!t.seekable)throw new tt.ErrnoError(70)}else o=t.position;var s=t.stream_ops.write(t,e,r,n,o,i);a||(t.position+=s);try{t.path&&tt.trackingDelegate.onWriteToFile&&tt.trackingDelegate.onWriteToFile(t.path)}catch(e){p("FS.trackingDelegate['onWriteToFile']('"+t.path+"') threw an exception: "+e.message)}return s},allocate:function(t,e,r){if(tt.isClosed(t))throw new tt.ErrnoError(8);if(e<0||r<=0)throw new tt.ErrnoError(28);if(0==(2097155&t.flags))throw new tt.ErrnoError(8);if(!tt.isFile(t.node.mode)&&!tt.isDir(t.node.mode))throw new tt.ErrnoError(43);if(!t.stream_ops.allocate)throw new tt.ErrnoError(138);t.stream_ops.allocate(t,e,r)},mmap:function(t,e,r,n,o,i){if(0!=(2&o)&&0==(2&i)&&2!=(2097155&t.flags))throw new tt.ErrnoError(2);if(1==(2097155&t.flags))throw new tt.ErrnoError(2);if(!t.stream_ops.mmap)throw new tt.ErrnoError(43);return t.stream_ops.mmap(t,e,r,n,o,i)},msync:function(t,e,r,n,o){return t&&t.stream_ops.msync?t.stream_ops.msync(t,e,r,n,o):0},munmap:function(t){return 0},ioctl:function(t,e,r){if(!t.stream_ops.ioctl)throw new tt.ErrnoError(59);return t.stream_ops.ioctl(t,e,r)},readFile:function(t,e){if((e=e||{}).flags=e.flags||0,e.encoding=e.encoding||"binary","utf8"!==e.encoding&&"binary"!==e.encoding)throw new Error('Invalid encoding type "'+e.encoding+'"');var r,n=tt.open(t,e.flags),o=tt.stat(t).size,i=new Uint8Array(o);return tt.read(n,i,0,o,0),"utf8"===e.encoding?r=S(i,0):"binary"===e.encoding&&(r=i),tt.close(n),r},writeFile:function(t,e,r){(r=r||{}).flags=r.flags||577;var n=tt.open(t,r.flags,r.mode);if("string"==typeof e){var o=new Uint8Array(x(e)+1),i=P(e,o,0,o.length);tt.write(n,o,0,i,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(e))throw new Error("Unsupported data type");tt.write(n,e,0,e.byteLength,void 0,r.canOwn)}tt.close(n)},cwd:function(){return tt.currentPath},chdir:function(t){var e=tt.lookupPath(t,{follow:!0});if(null===e.node)throw new tt.ErrnoError(44);if(!tt.isDir(e.node.mode))throw new tt.ErrnoError(54);var r=tt.nodePermissions(e.node,"x");if(r)throw new tt.ErrnoError(r);tt.currentPath=e.path},createDefaultDirectories:function(){tt.mkdir("/tmp"),tt.mkdir("/home"),tt.mkdir("/home/web_user")},createDefaultDevices:function(){tt.mkdir("/dev"),tt.registerDevice(tt.makedev(1,3),{read:function(){return 0},write:function(t,e,r,n,o){return n}}),tt.mkdev("/dev/null",tt.makedev(1,3)),Z.register(tt.makedev(5,0),Z.default_tty_ops),Z.register(tt.makedev(6,0),Z.default_tty1_ops),tt.mkdev("/dev/tty",tt.makedev(5,0)),tt.mkdev("/dev/tty1",tt.makedev(6,0));var t=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return function(){return crypto.getRandomValues(t),t[0]}}return function(){I("randomDevice")}}();tt.createDevice("/dev","random",t),tt.createDevice("/dev","urandom",t),tt.mkdir("/dev/shm"),tt.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){tt.mkdir("/proc"),tt.mkdir("/proc/self"),tt.mkdir("/proc/self/fd"),tt.mount({mount:function(){var t=tt.createNode("/proc/self","fd",16895,73);return t.node_ops={lookup:function(t,e){var r=+e,n=tt.getStream(r);if(!n)throw new tt.ErrnoError(8);var o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return n.path}}};return o.parent=o,o}},t}},{},"/proc/self/fd")},createStandardStreams:function(){o.stdin?tt.createDevice("/dev","stdin",o.stdin):tt.symlink("/dev/tty","/dev/stdin"),o.stdout?tt.createDevice("/dev","stdout",null,o.stdout):tt.symlink("/dev/tty","/dev/stdout"),o.stderr?tt.createDevice("/dev","stderr",null,o.stderr):tt.symlink("/dev/tty1","/dev/stderr"),tt.open("/dev/stdin",0),tt.open("/dev/stdout",1),tt.open("/dev/stderr",1)},ensureErrnoError:function(){tt.ErrnoError||(tt.ErrnoError=function(t,e){this.node=e,this.setErrno=function(t){this.errno=t},this.setErrno(t),this.message="FS error"},tt.ErrnoError.prototype=new Error,tt.ErrnoError.prototype.constructor=tt.ErrnoError,[44].forEach(function(t){tt.genericErrors[t]=new tt.ErrnoError(t),tt.genericErrors[t].stack="<generic error, no stack>"}))},staticInit:function(){tt.ensureErrnoError(),tt.nameTable=new Array(4096),tt.mount(Q,{},"/"),tt.createDefaultDirectories(),tt.createDefaultDevices(),tt.createSpecialDirectories(),tt.filesystems={MEMFS:Q}},init:function(t,e,r){tt.init.initialized=!0,tt.ensureErrnoError(),o.stdin=t||o.stdin,o.stdout=e||o.stdout,o.stderr=r||o.stderr,tt.createStandardStreams()},quit:function(){tt.init.initialized=!1;var t=o._fflush;t&&t(0);for(var e=0;e<tt.streams.length;e++){var r=tt.streams[e];r&&tt.close(r)}},getMode:function(t,e){var r=0;return t&&(r|=365),e&&(r|=146),r},findObject:function(t,e){var r=tt.analyzePath(t,e);return r.exists?r.object:null},analyzePath:function(t,e){try{t=(n=tt.lookupPath(t,{follow:!e})).path}catch(t){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=tt.lookupPath(t,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=G.basename(t),n=tt.lookupPath(t,{follow:!e}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot="/"===n.path}catch(t){r.error=t.errno}return r},createPath:function(t,e,r,n){t="string"==typeof t?t:tt.getPath(t);for(var o=e.split("/").reverse();o.length;){var i=o.pop();if(i){var a=G.join2(t,i);try{tt.mkdir(a)}catch(t){}t=a}}return a},createFile:function(t,e,r,n,o){var i=G.join2("string"==typeof t?t:tt.getPath(t),e),a=tt.getMode(n,o);return tt.create(i,a)},createDataFile:function(t,e,r,n,o,i){var a=e?G.join2("string"==typeof t?t:tt.getPath(t),e):t,s=tt.getMode(n,o),u=tt.create(a,s);if(r){if("string"==typeof r){for(var c=new Array(r.length),f=0,l=r.length;f<l;++f)c[f]=r.charCodeAt(f);r=c}tt.chmod(u,146|s);var d=tt.open(u,577);tt.write(d,r,0,r.length,0,i),tt.close(d),tt.chmod(u,s)}return u},createDevice:function(t,e,r,n){var o=G.join2("string"==typeof t?t:tt.getPath(t),e),i=tt.getMode(!!r,!!n);tt.createDevice.major||(tt.createDevice.major=64);var a=tt.makedev(tt.createDevice.major++,0);return tt.registerDevice(a,{open:function(t){t.seekable=!1},close:function(t){n&&n.buffer&&n.buffer.length&&n(10)},read:function(t,e,n,o,i){for(var a=0,s=0;s<o;s++){var u;try{u=r()}catch(t){throw new tt.ErrnoError(29)}if(void 0===u&&0===a)throw new tt.ErrnoError(6);if(null==u)break;a++,e[n+s]=u}return a&&(t.node.timestamp=Date.now()),a},write:function(t,e,r,o,i){for(var a=0;a<o;a++)try{n(e[r+a])}catch(t){throw new tt.ErrnoError(29)}return o&&(t.node.timestamp=Date.now()),a}}),tt.mkdev(o,i,a)},forceLoadFile:function(t){if(t.isDevice||t.isFolder||t.link||t.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!s)throw new Error("Cannot load without read() or XMLHttpRequest.");try{t.contents=st(s(t.url),!0),t.usedBytes=t.contents.length}catch(t){throw new tt.ErrnoError(29)}},createLazyFile:function(t,e,r,n,o){function i(){this.lengthKnown=!1,this.chunks=[]}if(i.prototype.get=function(t){if(!(t>this.length-1||t<0)){var e=t%this.chunkSize,r=t/this.chunkSize|0;return this.getter(r)[e]}},i.prototype.setDataGetter=function(t){this.getter=t},i.prototype.cacheLength=function(){var t=new XMLHttpRequest;if(t.open("HEAD",r,!1),t.send(null),!(t.status>=200&&t.status<300||304===t.status))throw new Error("Couldn't load "+r+". Status: "+t.status);var e,n=Number(t.getResponseHeader("Content-length")),o=(e=t.getResponseHeader("Accept-Ranges"))&&"bytes"===e,i=(e=t.getResponseHeader("Content-Encoding"))&&"gzip"===e,a=1048576;o||(a=n);var s=this;s.setDataGetter(function(t){var e=t*a,o=(t+1)*a-1;if(o=Math.min(o,n-1),void 0===s.chunks[t]&&(s.chunks[t]=function(t,e){if(t>e)throw new Error("invalid range ("+t+", "+e+") or no bytes requested!");if(e>n-1)throw new Error("only "+n+" bytes available! programmer error!");var o=new XMLHttpRequest;if(o.open("GET",r,!1),n!==a&&o.setRequestHeader("Range","bytes="+t+"-"+e),"undefined"!=typeof Uint8Array&&(o.responseType="arraybuffer"),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.send(null),!(o.status>=200&&o.status<300||304===o.status))throw new Error("Couldn't load "+r+". Status: "+o.status);return void 0!==o.response?new Uint8Array(o.response||[]):st(o.responseText||"",!0)}(e,o)),void 0===s.chunks[t])throw new Error("doXHR failed!");return s.chunks[t]}),!i&&n||(a=n=1,n=this.getter(0).length,a=n,d("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a={isDevice:!1,url:r},s=tt.createFile(t,e,a,n,o);a.contents?s.contents=a.contents:a.url&&(s.contents=null,s.url=a.url),Object.defineProperties(s,{usedBytes:{get:function(){return this.contents.length}}});var u={};return Object.keys(s.stream_ops).forEach(function(t){var e=s.stream_ops[t];u[t]=function(){return tt.forceLoadFile(s),e.apply(null,arguments)}}),u.read=function(t,e,r,n,o){tt.forceLoadFile(s);var i=t.node.contents;if(o>=i.length)return 0;var a=Math.min(i.length-o,n);if(i.slice)for(var u=0;u<a;u++)e[r+u]=i[o+u];else for(u=0;u<a;u++)e[r+u]=i.get(o+u);return a},s.stream_ops=u,s},createPreloadedFile:function(t,e,r,n,i,a,s,u,c,f){Browser.init();var l=e?K.resolve(G.join2(t,e)):t;function d(r){function d(r){f&&f(),u||tt.createDataFile(t,e,r,n,i,c),a&&a(),z()}var p=!1;o.preloadPlugins.forEach(function(t){p||t.canHandle(l)&&(t.handle(r,l,d,function(){s&&s(),z()}),p=!0)}),p||d(r)}B(),"string"==typeof r?Browser.asyncLoad(r,function(t){d(t)},s):d(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(t,e,r){e=e||function(){},r=r||function(){};var n=tt.indexedDB();try{var o=n.open(tt.DB_NAME(),tt.DB_VERSION)}catch(t){return r(t)}o.onupgradeneeded=function(){d("creating db"),o.result.createObjectStore(tt.DB_STORE_NAME)},o.onsuccess=function(){var n=o.result.transaction([tt.DB_STORE_NAME],"readwrite"),i=n.objectStore(tt.DB_STORE_NAME),a=0,s=0,u=t.length;function c(){0==s?e():r()}t.forEach(function(t){var e=i.put(tt.analyzePath(t).object.contents,t);e.onsuccess=function(){++a+s==u&&c()},e.onerror=function(){a+ ++s==u&&c()}}),n.onerror=r},o.onerror=r},loadFilesFromDB:function(t,e,r){e=e||function(){},r=r||function(){};var n=tt.indexedDB();try{var o=n.open(tt.DB_NAME(),tt.DB_VERSION)}catch(t){return r(t)}o.onupgradeneeded=r,o.onsuccess=function(){var n=o.result;try{var i=n.transaction([tt.DB_STORE_NAME],"readonly")}catch(t){return void r(t)}var a=i.objectStore(tt.DB_STORE_NAME),s=0,u=0,c=t.length;function f(){0==u?e():r()}t.forEach(function(t){var e=a.get(t);e.onsuccess=function(){tt.analyzePath(t).exists&&tt.unlink(t),tt.createDataFile(G.dirname(t),G.basename(t),e.result,!0,!0,!0),++s+u==c&&f()},e.onerror=function(){s+ ++u==c&&f()}}),i.onerror=r},o.onerror=r}},et={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(t,e){if("/"!==e[0]){var r;if(-100===t)r=tt.cwd();else{var n=tt.getStream(t);if(!n)throw new tt.ErrnoError(8);r=n.path}e=G.join2(r,e)}return e},doStat:function(t,e,r){try{var n=t(e)}catch(t){if(t&&t.node&&G.normalize(e)!==G.normalize(tt.getPath(t.node)))return-54;throw t}return b[r>>2]=n.dev,b[r+4>>2]=0,b[r+8>>2]=n.ino,b[r+12>>2]=n.mode,b[r+16>>2]=n.nlink,b[r+20>>2]=n.uid,b[r+24>>2]=n.gid,b[r+28>>2]=n.rdev,b[r+32>>2]=0,Y=[n.size>>>0,(W=n.size,+Math.abs(W)>=1?W>0?(0|Math.min(+Math.floor(W/4294967296),4294967295))>>>0:~~+Math.ceil((W-+(~~W>>>0))/4294967296)>>>0:0)],b[r+40>>2]=Y[0],b[r+44>>2]=Y[1],b[r+48>>2]=4096,b[r+52>>2]=n.blocks,b[r+56>>2]=n.atime.getTime()/1e3|0,b[r+60>>2]=0,b[r+64>>2]=n.mtime.getTime()/1e3|0,b[r+68>>2]=0,b[r+72>>2]=n.ctime.getTime()/1e3|0,b[r+76>>2]=0,Y=[n.ino>>>0,(W=n.ino,+Math.abs(W)>=1?W>0?(0|Math.min(+Math.floor(W/4294967296),4294967295))>>>0:~~+Math.ceil((W-+(~~W>>>0))/4294967296)>>>0:0)],b[r+80>>2]=Y[0],b[r+84>>2]=Y[1],0},doMsync:function(t,e,r,n,o){var i=E.slice(t,t+r);tt.msync(e,i,o,r,n)},doMkdir:function(t,e){return"/"===(t=G.normalize(t))[t.length-1]&&(t=t.substr(0,t.length-1)),tt.mkdir(t,e,0),0},doMknod:function(t,e,r){switch(61440&e){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return tt.mknod(t,e,r),0},doReadlink:function(t,e,r){if(r<=0)return-28;var n=tt.readlink(t),o=Math.min(r,x(n)),i=g[e+o];return P(n,E,e,r+1),g[e+o]=i,o},doAccess:function(t,e){if(-8&e)return-28;var r;if(!(r=tt.lookupPath(t,{follow:!0}).node))return-44;var n="";return 4&e&&(n+="r"),2&e&&(n+="w"),1&e&&(n+="x"),n&&tt.nodePermissions(r,n)?-2:0},doDup:function(t,e,r){var n=tt.getStream(r);return n&&tt.close(n),tt.open(t,e,0,r,r).fd},doReadv:function(t,e,r,n){for(var o=0,i=0;i<r;i++){var a=b[e+8*i>>2],s=b[e+(8*i+4)>>2],u=tt.read(t,g,a,s,n);if(u<0)return-1;if(o+=u,u<s)break}return o},doWritev:function(t,e,r,n){for(var o=0,i=0;i<r;i++){var a=b[e+8*i>>2],s=b[e+(8*i+4)>>2],u=tt.write(t,g,a,s,n);if(u<0)return-1;o+=u}return o},varargs:void 0,get:function(){return et.varargs+=4,b[et.varargs-4>>2]},getStr:function(t){return F(t)},getStreamFromFD:function(t){var e=tt.getStream(t);if(!e)throw new tt.ErrnoError(8);return e},get64:function(t,e){return t}};function rt(t){try{return m.grow(t-y.byteLength+65535>>>16),M(m.buffer),1}catch(t){}}var nt={};function ot(){if(!ot.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(var e in nt)t[e]=nt[e];var r=[];for(var e in t)r.push(e+"="+t[e]);ot.strings=r}return ot.strings}var it=[],at=function(t,e,r,n){t||(t=this),this.parent=t,this.mount=t.mount,this.mounted=null,this.id=tt.nextInode++,this.name=e,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n};function st(t,e,r){var n=r>0?r:x(t)+1,o=new Array(n),i=P(t,o,0,o.length);return e&&(o.length=i),o}Object.defineProperties(at.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(t){t?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return tt.isDir(this.mode)}},isDevice:{get:function(){return tt.isChrdev(this.mode)}}}),tt.FSNode=at,tt.staticInit(),T.push({func:function(){ft()}});var ut,ct={i:function(){return 42},b:function(){I()},a:function(t,e,r){var n=function(t,e){var r;for(it.length=0,e>>=2;r=E[t++];){var n=r<105;n&&1&e&&e++,it.push(n?k[e++>>1]:b[e]),++e}return it}(e,r);return J[t].apply(null,n)},d:function(t,e,r){E.copyWithin(t,e,e+r)},e:function(t){t>>>=0;var e=E.length;if(t>2147483648)return!1;for(var r,n,o=1;o<=4;o*=2){var i=e*(1+.2/o);if(i=Math.min(i,t+100663296),rt(Math.min(2147483648,((r=Math.max(16777216,t,i))%(n=65536)>0&&(r+=n-r%n),r))))return!0}return!1},f:function(t,e){try{var r=0;return ot().forEach(function(n,o){var i=e+r;b[t+4*o>>2]=i,function(t,e,r){for(var n=0;n<t.length;++n)g[e++>>0]=t.charCodeAt(n);r||(g[e>>0]=0)}(n,i),r+=n.length+1}),0}catch(t){return void 0!==tt&&t instanceof tt.ErrnoError||I(t),t.errno}},g:function(t,e){try{var r=ot();b[t>>2]=r.length;var n=0;return r.forEach(function(t){n+=t.length+1}),b[e>>2]=n,0}catch(t){return void 0!==tt&&t instanceof tt.ErrnoError||I(t),t.errno}},h:function(t){try{var e=et.getStreamFromFD(t);return tt.close(e),0}catch(t){return void 0!==tt&&t instanceof tt.ErrnoError||I(t),t.errno}},j:function(t,e,r,n,o){try{var i=et.getStreamFromFD(t),a=4294967296*r+(e>>>0);return a<=-9007199254740992||a>=9007199254740992?-61:(tt.llseek(i,a,n),Y=[i.position>>>0,(W=i.position,+Math.abs(W)>=1?W>0?(0|Math.min(+Math.floor(W/4294967296),4294967295))>>>0:~~+Math.ceil((W-+(~~W>>>0))/4294967296)>>>0:0)],b[o>>2]=Y[0],b[o+4>>2]=Y[1],i.getdents&&0===a&&0===n&&(i.getdents=null),0)}catch(t){return void 0!==tt&&t instanceof tt.ErrnoError||I(t),t.errno}},c:function(t,e,r,n){try{var o=et.getStreamFromFD(t),i=et.doWritev(o,e,r);return b[n>>2]=i,0}catch(t){return void 0!==tt&&t instanceof tt.ErrnoError||I(t),t.errno}},k:function(t){var e=Date.now();return b[t>>2]=e/1e3|0,b[t+4>>2]=e%1e3*1e3|0,0}},ft=(function(){var t={a:ct};function e(t,e){var r=t.exports;o.asm=r,M((m=o.asm.l).buffer),A=o.asm.m,z()}function r(t){e(t.instance)}function i(e){return(!h&&f&&"function"==typeof fetch?fetch(q,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+q+"'";return t.arrayBuffer()}).catch(function(){return V(q)}):Promise.resolve().then(function(){return V(q)})).then(function(e){return WebAssembly.instantiate(e,t)}).then(e,function(t){p("failed to asynchronously prepare wasm: "+t),I(t)})}if(B(),o.instantiateWasm)try{return o.instantiateWasm(t,e)}catch(t){return p("Module.instantiateWasm callback failed with error: "+t),!1}(h||"function"!=typeof WebAssembly.instantiateStreaming||U(q)||"function"!=typeof fetch?i(r):fetch(q,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,t).then(r,function(t){return p("wasm streaming compile failed: "+t),p("falling back to ArrayBuffer instantiation"),i(r)})})).catch(n)}(),o.___wasm_call_ctors=function(){return(ft=o.___wasm_call_ctors=o.asm.n).apply(null,arguments)}),lt=(o.___em_js__array_bounds_check_error=function(){return(o.___em_js__array_bounds_check_error=o.asm.o).apply(null,arguments)},o._emscripten_bind_CExpat_CExpat_0=function(){return(lt=o._emscripten_bind_CExpat_CExpat_0=o.asm.p).apply(null,arguments)}),dt=o._emscripten_bind_CExpat_create_0=function(){return(dt=o._emscripten_bind_CExpat_create_0=o.asm.q).apply(null,arguments)},pt=o._emscripten_bind_CExpat_destroy_0=function(){return(pt=o._emscripten_bind_CExpat_destroy_0=o.asm.r).apply(null,arguments)},ht=o._emscripten_bind_CExpat_parse_1=function(){return(ht=o._emscripten_bind_CExpat_parse_1=o.asm.s).apply(null,arguments)},mt=o._emscripten_bind_CExpat_tag_0=function(){return(mt=o._emscripten_bind_CExpat_tag_0=o.asm.t).apply(null,arguments)},_t=o._emscripten_bind_CExpat_attrs_0=function(){return(_t=o._emscripten_bind_CExpat_attrs_0=o.asm.u).apply(null,arguments)},vt=o._emscripten_bind_CExpat_content_0=function(){return(vt=o._emscripten_bind_CExpat_content_0=o.asm.v).apply(null,arguments)},wt=o._emscripten_bind_CExpat_startElement_0=function(){return(wt=o._emscripten_bind_CExpat_startElement_0=o.asm.w).apply(null,arguments)},yt=o._emscripten_bind_CExpat_endElement_0=function(){return(yt=o._emscripten_bind_CExpat_endElement_0=o.asm.x).apply(null,arguments)},gt=o._emscripten_bind_CExpat_characterData_0=function(){return(gt=o._emscripten_bind_CExpat_characterData_0=o.asm.y).apply(null,arguments)},Et=o._emscripten_bind_CExpat___destroy___0=function(){return(Et=o._emscripten_bind_CExpat___destroy___0=o.asm.z).apply(null,arguments)},bt=o._emscripten_bind_VoidPtr___destroy___0=function(){return(bt=o._emscripten_bind_VoidPtr___destroy___0=o.asm.A).apply(null,arguments)},kt=o._emscripten_bind_CExpatJS_CExpatJS_0=function(){return(kt=o._emscripten_bind_CExpatJS_CExpatJS_0=o.asm.B).apply(null,arguments)},Dt=o._emscripten_bind_CExpatJS_startElement_0=function(){return(Dt=o._emscripten_bind_CExpatJS_startElement_0=o.asm.C).apply(null,arguments)},St=o._emscripten_bind_CExpatJS_endElement_0=function(){return(St=o._emscripten_bind_CExpatJS_endElement_0=o.asm.D).apply(null,arguments)},Ft=o._emscripten_bind_CExpatJS_characterData_0=function(){return(Ft=o._emscripten_bind_CExpatJS_characterData_0=o.asm.E).apply(null,arguments)},Pt=o._emscripten_bind_CExpatJS___destroy___0=function(){return(Pt=o._emscripten_bind_CExpatJS___destroy___0=o.asm.F).apply(null,arguments)},xt=o._malloc=function(){return(xt=o._malloc=o.asm.G).apply(null,arguments)};function Mt(t){function r(){ut||(ut=!0,o.calledRun=!0,v||(o.noFSInit||tt.init.initialized||tt.init(),Z.init(),X(T),tt.ignorePermissions=!1,X(O),e(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),function(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)t=o.postRun.shift(),C.unshift(t);var t;X(C)}()))}j>0||(function(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)t=o.preRun.shift(),R.unshift(t);var t;X(R)}(),j>0||(o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),r()},1)):r()))}if(o._free=function(){return(o._free=o.asm.H).apply(null,arguments)},N=function t(){ut||Mt(),ut||(N=t)},o.run=Mt,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();function At(){}function Rt(t){return(t||At).__cache__}function Tt(t,e){var r=Rt(e),n=r[t];return n||((n=Object.create((e||At).prototype)).ptr=t,r[t]=n)}Mt(),At.prototype=Object.create(At.prototype),At.prototype.constructor=At,At.prototype.__class__=At,At.__cache__={},o.WrapperObject=At,o.getCache=Rt,o.wrapPointer=Tt,o.castObject=function(t,e){return Tt(t.ptr,e)},o.NULL=Tt(0),o.destroy=function(t){if(!t.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";t.__destroy__(),delete Rt(t.__class__)[t.ptr]},o.compare=function(t,e){return t.ptr===e.ptr},o.getPointer=function(t){return t.ptr},o.getClass=function(t){return t.__class__};var Ot={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(Ot.needed){for(var t=0;t<Ot.temps.length;t++)o._free(Ot.temps[t]);Ot.temps.length=0,o._free(Ot.buffer),Ot.buffer=0,Ot.size+=Ot.needed,Ot.needed=0}Ot.buffer||(Ot.size+=128,Ot.buffer=o._malloc(Ot.size),w(Ot.buffer)),Ot.pos=0},alloc:function(t,e){w(Ot.buffer);var r,n=e.BYTES_PER_ELEMENT,i=t.length*n;return i=i+7&-8,Ot.pos+i>=Ot.size?(w(i>0),Ot.needed+=i,r=o._malloc(i),Ot.temps.push(r)):(r=Ot.buffer+Ot.pos,Ot.pos+=i),r},copy:function(t,e,r){switch(r>>>=0,e.BYTES_PER_ELEMENT){case 2:r>>>=1;break;case 4:r>>>=2;break;case 8:r>>>=3}for(var n=0;n<t.length;n++)e[r+n]=t[n]}};function Ct(){this.ptr=lt(),Rt(Ct)[this.ptr]=this}function jt(){throw"cannot construct a VoidPtr, no constructor in IDL"}function Nt(){this.ptr=kt(),Rt(Nt)[this.ptr]=this}return Ct.prototype=Object.create(At.prototype),Ct.prototype.constructor=Ct,Ct.prototype.__class__=Ct,Ct.__cache__={},o.CExpat=Ct,Ct.prototype.create=Ct.prototype.create=function(){var t=this.ptr;return!!dt(t)},Ct.prototype.destroy=Ct.prototype.destroy=function(){var t=this.ptr;pt(t)},Ct.prototype.parse=Ct.prototype.parse=function(t){var e=this.ptr;return Ot.prepare(),t=t&&"object"==typeof t?t.ptr:function(t){if("string"==typeof t){var e=st(t),r=Ot.alloc(e,g);return Ot.copy(e,g,r),r}return t}(t),!!ht(e,t)},Ct.prototype.tag=Ct.prototype.tag=function(){var t=this.ptr;return F(mt(t))},Ct.prototype.attrs=Ct.prototype.attrs=function(){var t=this.ptr;return F(_t(t))},Ct.prototype.content=Ct.prototype.content=function(){var t=this.ptr;return F(vt(t))},Ct.prototype.startElement=Ct.prototype.startElement=function(){var t=this.ptr;wt(t)},Ct.prototype.endElement=Ct.prototype.endElement=function(){var t=this.ptr;yt(t)},Ct.prototype.characterData=Ct.prototype.characterData=function(){var t=this.ptr;gt(t)},Ct.prototype.__destroy__=Ct.prototype.__destroy__=function(){var t=this.ptr;Et(t)},jt.prototype=Object.create(At.prototype),jt.prototype.constructor=jt,jt.prototype.__class__=jt,jt.__cache__={},o.VoidPtr=jt,jt.prototype.__destroy__=jt.prototype.__destroy__=function(){var t=this.ptr;bt(t)},Nt.prototype=Object.create(Ct.prototype),Nt.prototype.constructor=Nt,Nt.prototype.__class__=Nt,Nt.__cache__={},o.CExpatJS=Nt,Nt.prototype.startElement=Nt.prototype.startElement=function(){var t=this.ptr;Dt(t)},Nt.prototype.endElement=Nt.prototype.endElement=function(){var t=this.ptr;St(t)},Nt.prototype.characterData=Nt.prototype.characterData=function(){var t=this.ptr;Ft(t)},Nt.prototype.__destroy__=Nt.prototype.__destroy__=function(){var t=this.ptr;Pt(t)},t.ready});t.exports=n});var e=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}().__hpcc_wasmFolder||void 0;function r(t,r,n){var o=t.default||t;return o.__hpcc_promise||(o.__hpcc_promise=new Promise(function(t){o({wasmBinary:n,locateFile:function(t,n){return function(t,e){for(;t.charAt(t.length-1)===e;)t=t.substring(0,t.length-1);return t}(r||function(t){if(!arguments.length)return e;var r=e;return e=t,r}()||n||".","/")+"/"+function(t,e){for(;t.charAt(0)===e;)t=t.substring(1);return t}(t,"/")}}).then(function(e){delete e.then,t(e)})})),o.__hpcc_promise}!function(){function t(t,e){this.tag=t,this.attrs=e,this._content=""}Object.defineProperty(t.prototype,"content",{get:function(){return this._content},enumerable:!1,configurable:!0}),t.prototype.appendContent=function(t){this._content+=t}}();var n=t(function(t,e){var r,n=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t){var e,n,o=void 0!==(t=t||{})?t:{};o.ready=new Promise(function(t,r){e=t,n=r});var i,a={};for(i in o)o.hasOwnProperty(i)&&(a[i]=o[i]);var s,u,c="./this.program",f=function(t,e){throw e},l=!0,d="";"undefined"!=typeof document&&document.currentScript&&(d=document.currentScript.src),r&&(d=r),d=0!==d.indexOf("blob:")?d.substr(0,d.lastIndexOf("/")+1):"",s=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText};var p=o.print||console.log.bind(console),h=o.printErr||console.warn.bind(console);for(i in a)a.hasOwnProperty(i)&&(o[i]=a[i]);a=null,o.arguments&&o.arguments,o.thisProgram&&(c=o.thisProgram),o.quit&&(f=o.quit);var m,_,v,w=16,y=0,g=function(t){y=t},E=function(){return y};o.wasmBinary&&(m=o.wasmBinary),o.noExitRuntime&&(_=o.noExitRuntime),"object"!=typeof WebAssembly&&q("no native wasm support detected");var b=!1;function k(t,e){t||q("Assertion failed: "+e)}var D,S,F,P,x,M,A="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,r){for(var n=e+r,o=e;t[o]&&!(o>=n);)++o;if(o-e>16&&t.subarray&&A)return A.decode(t.subarray(e,o));for(var i="";e<o;){var a=t[e++];if(128&a){var s=63&t[e++];if(192!=(224&a)){var u=63&t[e++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&t[e++])<65536)i+=String.fromCharCode(a);else{var c=a-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}function T(t,e){return t?R(F,t,e):""}function O(t,e,r,n){if(!(n>0))return 0;for(var o=r,i=r+n-1,a=0;a<t.length;++a){var s=t.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++a)),s<=127){if(r>=i)break;e[r++]=s}else if(s<=2047){if(r+1>=i)break;e[r++]=192|s>>6,e[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;e[r++]=224|s>>12,e[r++]=128|s>>6&63,e[r++]=128|63&s}else{if(r+3>=i)break;e[r++]=240|s>>18,e[r++]=128|s>>12&63,e[r++]=128|s>>6&63,e[r++]=128|63&s}}return e[r]=0,r-o}function C(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&t.charCodeAt(++r)),n<=127?++e:e+=n<=2047?2:n<=65535?3:4}return e}function j(t){D=t,o.HEAP8=S=new Int8Array(t),o.HEAP16=P=new Int16Array(t),o.HEAP32=x=new Int32Array(t),o.HEAPU8=F=new Uint8Array(t),o.HEAPU16=new Uint16Array(t),o.HEAPU32=new Uint32Array(t),o.HEAPF32=new Float32Array(t),o.HEAPF64=M=new Float64Array(t)}o.INITIAL_MEMORY;var N,B=[],z=[],I=[],L=[],U=0,H=null;function W(t){U++,o.monitorRunDependencies&&o.monitorRunDependencies(U)}function Y(t){if(U--,o.monitorRunDependencies&&o.monitorRunDependencies(U),0==U&&H){var e=H;H=null,e()}}function q(t){o.onAbort&&o.onAbort(t),h(t+=""),b=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(t);throw n(e),e}o.preloadedImages={},o.preloadedAudios={};var V="data:application/octet-stream;base64,";function J(t){return e=t,r=V,String.prototype.startsWith?e.startsWith(r):0===e.indexOf(r);var e,r}var X,G,K,Z="graphvizlib.wasm";function $(t){try{if(t==Z&&m)return new Uint8Array(m);if(!u)throw"both async and sync fetching of the wasm failed"}catch(t){q(t)}}J(Z)||(X=Z,Z=o.locateFile?o.locateFile(X,d):d+X);var Q,tt={1186:function(t,e){var r=T(t),n=T(e);lt.createPath("/",at.dirname(r)),lt.writeFile(at.join("/",r),n)}};function et(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var r=e.func;"number"==typeof r?void 0===e.arg?N.get(r)():N.get(r)(e.arg):r(void 0===e.arg?null:e.arg)}else e(o)}}Q=function(){return performance.now()};var rt=!0;function nt(t){return x[Bt()>>2]=t,t}var ot={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function it(t){this.excPtr=t,this.ptr=t-ot.SIZE,this.set_type=function(t){x[this.ptr+ot.TYPE_OFFSET>>2]=t},this.get_type=function(){return x[this.ptr+ot.TYPE_OFFSET>>2]},this.set_destructor=function(t){x[this.ptr+ot.DESTRUCTOR_OFFSET>>2]=t},this.get_destructor=function(){return x[this.ptr+ot.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(t){x[this.ptr+ot.REFCOUNT_OFFSET>>2]=t},this.set_caught=function(t){t=t?1:0,S[this.ptr+ot.CAUGHT_OFFSET>>0]=t},this.get_caught=function(){return 0!=S[this.ptr+ot.CAUGHT_OFFSET>>0]},this.set_rethrown=function(t){t=t?1:0,S[this.ptr+ot.RETHROWN_OFFSET>>0]=t},this.get_rethrown=function(){return 0!=S[this.ptr+ot.RETHROWN_OFFSET>>0]},this.init=function(t,e){this.set_type(t),this.set_destructor(e),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var t=x[this.ptr+ot.REFCOUNT_OFFSET>>2];x[this.ptr+ot.REFCOUNT_OFFSET>>2]=t+1},this.release_ref=function(){var t=x[this.ptr+ot.REFCOUNT_OFFSET>>2];return x[this.ptr+ot.REFCOUNT_OFFSET>>2]=t-1,1===t}}var at={splitPath:function(t){return/^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/.exec(t).slice(1)},normalizeArray:function(t,e){for(var r=0,n=t.length-1;n>=0;n--){var o=t[n];"."===o?t.splice(n,1):".."===o?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r;r--)t.unshift("..");return t},normalize:function(t){var e="/"===t.charAt(0),r="/"===t.substr(-1);return(t=at.normalizeArray(t.split("/").filter(function(t){return!!t}),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},dirname:function(t){var e=at.splitPath(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},basename:function(t){if("/"===t)return"/";var e=(t=(t=at.normalize(t)).replace(/\\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)},extname:function(t){return at.splitPath(t)[3]},join:function(){var t=Array.prototype.slice.call(arguments,0);return at.normalize(t.join("/"))},join2:function(t,e){return at.normalize(t+"/"+e)}},st={resolve:function(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var n=r>=0?arguments[r]:lt.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";t=n+"/"+t,e="/"===n.charAt(0)}return(e?"/":"")+(t=at.normalizeArray(t.split("/").filter(function(t){return!!t}),!e).join("/"))||"."},relative:function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=st.resolve(t).substr(1),e=st.resolve(e).substr(1);for(var n=r(t.split("/")),o=r(e.split("/")),i=Math.min(n.length,o.length),a=i,s=0;s<i;s++)if(n[s]!==o[s]){a=s;break}var u=[];for(s=a;s<n.length;s++)u.push("..");return(u=u.concat(o.slice(a))).join("/")}},ut={ttys:[],init:function(){},shutdown:function(){},register:function(t,e){ut.ttys[t]={input:[],output:[],ops:e},lt.registerDevice(t,ut.stream_ops)},stream_ops:{open:function(t){var e=ut.ttys[t.node.rdev];if(!e)throw new lt.ErrnoError(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.ops.flush(t.tty)},flush:function(t){t.tty.ops.flush(t.tty)},read:function(t,e,r,n,o){if(!t.tty||!t.tty.ops.get_char)throw new lt.ErrnoError(60);for(var i=0,a=0;a<n;a++){var s;try{s=t.tty.ops.get_char(t.tty)}catch(t){throw new lt.ErrnoError(29)}if(void 0===s&&0===i)throw new lt.ErrnoError(6);if(null==s)break;i++,e[r+a]=s}return i&&(t.node.timestamp=Date.now()),i},write:function(t,e,r,n,o){if(!t.tty||!t.tty.ops.put_char)throw new lt.ErrnoError(60);try{for(var i=0;i<n;i++)t.tty.ops.put_char(t.tty,e[r+i])}catch(t){throw new lt.ErrnoError(29)}return n&&(t.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(t){if(!t.input.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\\n"),!e)return null;t.input=Dt(e,!0)}return t.input.shift()},put_char:function(t,e){null===e||10===e?(p(R(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&t.output.length>0&&(p(R(t.output,0)),t.output=[])}},default_tty1_ops:{put_char:function(t,e){null===e||10===e?(h(R(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&t.output.length>0&&(h(R(t.output,0)),t.output=[])}}};function ct(t){for(var e=function(t,e){return e||(e=w),Math.ceil(t/e)*e}(t,16384),r=jt(e);t<e;)S[r+t++]=0;return r}var ft={ops_table:null,mount:function(t){return ft.createNode(null,"/",16895,0)},createNode:function(t,e,r,n){if(lt.isBlkdev(r)||lt.isFIFO(r))throw new lt.ErrnoError(63);ft.ops_table||(ft.ops_table={dir:{node:{getattr:ft.node_ops.getattr,setattr:ft.node_ops.setattr,lookup:ft.node_ops.lookup,mknod:ft.node_ops.mknod,rename:ft.node_ops.rename,unlink:ft.node_ops.unlink,rmdir:ft.node_ops.rmdir,readdir:ft.node_ops.readdir,symlink:ft.node_ops.symlink},stream:{llseek:ft.stream_ops.llseek}},file:{node:{getattr:ft.node_ops.getattr,setattr:ft.node_ops.setattr},stream:{llseek:ft.stream_ops.llseek,read:ft.stream_ops.read,write:ft.stream_ops.write,allocate:ft.stream_ops.allocate,mmap:ft.stream_ops.mmap,msync:ft.stream_ops.msync}},link:{node:{getattr:ft.node_ops.getattr,setattr:ft.node_ops.setattr,readlink:ft.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ft.node_ops.getattr,setattr:ft.node_ops.setattr},stream:lt.chrdev_stream_ops}});var o=lt.createNode(t,e,r,n);return lt.isDir(o.mode)?(o.node_ops=ft.ops_table.dir.node,o.stream_ops=ft.ops_table.dir.stream,o.contents={}):lt.isFile(o.mode)?(o.node_ops=ft.ops_table.file.node,o.stream_ops=ft.ops_table.file.stream,o.usedBytes=0,o.contents=null):lt.isLink(o.mode)?(o.node_ops=ft.ops_table.link.node,o.stream_ops=ft.ops_table.link.stream):lt.isChrdev(o.mode)&&(o.node_ops=ft.ops_table.chrdev.node,o.stream_ops=ft.ops_table.chrdev.stream),o.timestamp=Date.now(),t&&(t.contents[e]=o),o},getFileDataAsRegularArray:function(t){if(t.contents&&t.contents.subarray){for(var e=[],r=0;r<t.usedBytes;++r)e.push(t.contents[r]);return e}return t.contents},getFileDataAsTypedArray:function(t){return t.contents?t.contents.subarray?t.contents.subarray(0,t.usedBytes):new Uint8Array(t.contents):new Uint8Array(0)},expandFileStorage:function(t,e){var r=t.contents?t.contents.length:0;if(!(r>=e)){e=Math.max(e,r*(r<1048576?2:1.125)>>>0),0!=r&&(e=Math.max(e,256));var n=t.contents;t.contents=new Uint8Array(e),t.usedBytes>0&&t.contents.set(n.subarray(0,t.usedBytes),0)}},resizeFileStorage:function(t,e){if(t.usedBytes!=e){if(0==e)return t.contents=null,void(t.usedBytes=0);if(!t.contents||t.contents.subarray){var r=t.contents;return t.contents=new Uint8Array(e),r&&t.contents.set(r.subarray(0,Math.min(e,t.usedBytes))),void(t.usedBytes=e)}if(t.contents||(t.contents=[]),t.contents.length>e)t.contents.length=e;else for(;t.contents.length<e;)t.contents.push(0);t.usedBytes=e}},node_ops:{getattr:function(t){var e={};return e.dev=lt.isChrdev(t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,lt.isDir(t.mode)?e.size=4096:lt.isFile(t.mode)?e.size=t.usedBytes:lt.isLink(t.mode)?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&ft.resizeFileStorage(t,e.size)},lookup:function(t,e){throw lt.genericErrors[44]},mknod:function(t,e,r,n){return ft.createNode(t,e,r,n)},rename:function(t,e,r){if(lt.isDir(t.mode)){var n;try{n=lt.lookupNode(e,r)}catch(t){}if(n)for(var o in n.contents)throw new lt.ErrnoError(55)}delete t.parent.contents[t.name],t.name=r,e.contents[r]=t,t.parent=e},unlink:function(t,e){delete t.contents[e]},rmdir:function(t,e){var r=lt.lookupNode(t,e);for(var n in r.contents)throw new lt.ErrnoError(55);delete t.contents[e]},readdir:function(t){var e=[".",".."];for(var r in t.contents)t.contents.hasOwnProperty(r)&&e.push(r);return e},symlink:function(t,e,r){var n=ft.createNode(t,e,41471,0);return n.link=r,n},readlink:function(t){if(!lt.isLink(t.mode))throw new lt.ErrnoError(28);return t.link}},stream_ops:{read:function(t,e,r,n,o){var i=t.node.contents;if(o>=t.node.usedBytes)return 0;var a=Math.min(t.node.usedBytes-o,n);if(a>8&&i.subarray)e.set(i.subarray(o,o+a),r);else for(var s=0;s<a;s++)e[r+s]=i[o+s];return a},write:function(t,e,r,n,o,i){if(e.buffer===S.buffer&&(i=!1),!n)return 0;var a=t.node;if(a.timestamp=Date.now(),e.subarray&&(!a.contents||a.contents.subarray)){if(i)return a.contents=e.subarray(r,r+n),a.usedBytes=n,n;if(0===a.usedBytes&&0===o)return a.contents=e.slice(r,r+n),a.usedBytes=n,n;if(o+n<=a.usedBytes)return a.contents.set(e.subarray(r,r+n),o),n}if(ft.expandFileStorage(a,o+n),a.contents.subarray&&e.subarray)a.contents.set(e.subarray(r,r+n),o);else for(var s=0;s<n;s++)a.contents[o+s]=e[r+s];return a.usedBytes=Math.max(a.usedBytes,o+n),n},llseek:function(t,e,r){var n=e;if(1===r?n+=t.position:2===r&&lt.isFile(t.node.mode)&&(n+=t.node.usedBytes),n<0)throw new lt.ErrnoError(28);return n},allocate:function(t,e,r){ft.expandFileStorage(t.node,e+r),t.node.usedBytes=Math.max(t.node.usedBytes,e+r)},mmap:function(t,e,r,n,o,i){if(k(0===e),!lt.isFile(t.node.mode))throw new lt.ErrnoError(43);var a,s,u=t.node.contents;if(2&i||u.buffer!==D){if((n>0||n+r<u.length)&&(u=u.subarray?u.subarray(n,n+r):Array.prototype.slice.call(u,n,n+r)),s=!0,!(a=ct(r)))throw new lt.ErrnoError(48);S.set(u,a)}else s=!1,a=u.byteOffset;return{ptr:a,allocated:s}},msync:function(t,e,r,n,o){if(!lt.isFile(t.node.mode))throw new lt.ErrnoError(43);return 2&o?0:(ft.stream_ops.write(t,e,0,n,r,!1),0)}}},lt={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(t,e){if(e=e||{},!(t=st.resolve(lt.cwd(),t)))return{path:"",node:null};var r={follow_mount:!0,recurse_count:0};for(var n in r)void 0===e[n]&&(e[n]=r[n]);if(e.recurse_count>8)throw new lt.ErrnoError(32);for(var o=at.normalizeArray(t.split("/").filter(function(t){return!!t}),!1),i=lt.root,a="/",s=0;s<o.length;s++){var u=s===o.length-1;if(u&&e.parent)break;if(i=lt.lookupNode(i,o[s]),a=at.join2(a,o[s]),lt.isMountpoint(i)&&(!u||u&&e.follow_mount)&&(i=i.mounted.root),!u||e.follow)for(var c=0;lt.isLink(i.mode);){var f=lt.readlink(a);if(a=st.resolve(at.dirname(a),f),i=lt.lookupPath(a,{recurse_count:e.recurse_count}).node,c++>40)throw new lt.ErrnoError(32)}}return{path:a,node:i}},getPath:function(t){for(var e;;){if(lt.isRoot(t)){var r=t.mount.mountpoint;return e?"/"!==r[r.length-1]?r+"/"+e:r+e:r}e=e?t.name+"/"+e:t.name,t=t.parent}},hashName:function(t,e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n)|0;return(t+r>>>0)%lt.nameTable.length},hashAddNode:function(t){var e=lt.hashName(t.parent.id,t.name);t.name_next=lt.nameTable[e],lt.nameTable[e]=t},hashRemoveNode:function(t){var e=lt.hashName(t.parent.id,t.name);if(lt.nameTable[e]===t)lt.nameTable[e]=t.name_next;else for(var r=lt.nameTable[e];r;){if(r.name_next===t){r.name_next=t.name_next;break}r=r.name_next}},lookupNode:function(t,e){var r=lt.mayLookup(t);if(r)throw new lt.ErrnoError(r,t);for(var n=lt.hashName(t.id,e),o=lt.nameTable[n];o;o=o.name_next){var i=o.name;if(o.parent.id===t.id&&i===e)return o}return lt.lookup(t,e)},createNode:function(t,e,r,n){var o=new lt.FSNode(t,e,r,n);return lt.hashAddNode(o),o},destroyNode:function(t){lt.hashRemoveNode(t)},isRoot:function(t){return t===t.parent},isMountpoint:function(t){return!!t.mounted},isFile:function(t){return 32768==(61440&t)},isDir:function(t){return 16384==(61440&t)},isLink:function(t){return 40960==(61440&t)},isChrdev:function(t){return 8192==(61440&t)},isBlkdev:function(t){return 24576==(61440&t)},isFIFO:function(t){return 4096==(61440&t)},isSocket:function(t){return 49152==(49152&t)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(t){var e=lt.flagModes[t];if(void 0===e)throw new Error("Unknown file open mode: "+t);return e},flagsToPermissionString:function(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e},nodePermissions:function(t,e){return lt.ignorePermissions?0:(-1===e.indexOf("r")||292&t.mode)&&(-1===e.indexOf("w")||146&t.mode)&&(-1===e.indexOf("x")||73&t.mode)?0:2},mayLookup:function(t){var e=lt.nodePermissions(t,"x");return e||(t.node_ops.lookup?0:2)},mayCreate:function(t,e){try{return lt.lookupNode(t,e),20}catch(t){}return lt.nodePermissions(t,"wx")},mayDelete:function(t,e,r){var n;try{n=lt.lookupNode(t,e)}catch(t){return t.errno}var o=lt.nodePermissions(t,"wx");if(o)return o;if(r){if(!lt.isDir(n.mode))return 54;if(lt.isRoot(n)||lt.getPath(n)===lt.cwd())return 10}else if(lt.isDir(n.mode))return 31;return 0},mayOpen:function(t,e){return t?lt.isLink(t.mode)?32:lt.isDir(t.mode)&&("r"!==lt.flagsToPermissionString(e)||512&e)?31:lt.nodePermissions(t,lt.flagsToPermissionString(e)):44},MAX_OPEN_FDS:4096,nextfd:function(t,e){t=t||0,e=e||lt.MAX_OPEN_FDS;for(var r=t;r<=e;r++)if(!lt.streams[r])return r;throw new lt.ErrnoError(33)},getStream:function(t){return lt.streams[t]},createStream:function(t,e,r){lt.FSStream||(lt.FSStream=function(){},lt.FSStream.prototype={object:{get:function(){return this.node},set:function(t){this.node=t}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var n=new lt.FSStream;for(var o in t)n[o]=t[o];t=n;var i=lt.nextfd(e,r);return t.fd=i,lt.streams[i]=t,t},closeStream:function(t){lt.streams[t]=null},chrdev_stream_ops:{open:function(t){var e=lt.getDevice(t.node.rdev);t.stream_ops=e.stream_ops,t.stream_ops.open&&t.stream_ops.open(t)},llseek:function(){throw new lt.ErrnoError(70)}},major:function(t){return t>>8},minor:function(t){return 255&t},makedev:function(t,e){return t<<8|e},registerDevice:function(t,e){lt.devices[t]={stream_ops:e}},getDevice:function(t){return lt.devices[t]},getMounts:function(t){for(var e=[],r=[t];r.length;){var n=r.pop();e.push(n),r.push.apply(r,n.mounts)}return e},syncfs:function(t,e){"function"==typeof t&&(e=t,t=!1),lt.syncFSRequests++,lt.syncFSRequests>1&&h("warning: "+lt.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var r=lt.getMounts(lt.root.mount),n=0;function o(t){return lt.syncFSRequests--,e(t)}function i(t){if(t)return i.errored?void 0:(i.errored=!0,o(t));++n>=r.length&&o(null)}r.forEach(function(e){if(!e.type.syncfs)return i(null);e.type.syncfs(e,t,i)})},mount:function(t,e,r){var n,o="/"===r,i=!r;if(o&&lt.root)throw new lt.ErrnoError(10);if(!o&&!i){var a=lt.lookupPath(r,{follow_mount:!1});if(r=a.path,n=a.node,lt.isMountpoint(n))throw new lt.ErrnoError(10);if(!lt.isDir(n.mode))throw new lt.ErrnoError(54)}var s={type:t,opts:e,mountpoint:r,mounts:[]},u=t.mount(s);return u.mount=s,s.root=u,o?lt.root=u:n&&(n.mounted=s,n.mount&&n.mount.mounts.push(s)),u},unmount:function(t){var e=lt.lookupPath(t,{follow_mount:!1});if(!lt.isMountpoint(e.node))throw new lt.ErrnoError(28);var r=e.node,n=r.mounted,o=lt.getMounts(n);Object.keys(lt.nameTable).forEach(function(t){for(var e=lt.nameTable[t];e;){var r=e.name_next;-1!==o.indexOf(e.mount)&&lt.destroyNode(e),e=r}}),r.mounted=null;var i=r.mount.mounts.indexOf(n);r.mount.mounts.splice(i,1)},lookup:function(t,e){return t.node_ops.lookup(t,e)},mknod:function(t,e,r){var n=lt.lookupPath(t,{parent:!0}).node,o=at.basename(t);if(!o||"."===o||".."===o)throw new lt.ErrnoError(28);var i=lt.mayCreate(n,o);if(i)throw new lt.ErrnoError(i);if(!n.node_ops.mknod)throw new lt.ErrnoError(63);return n.node_ops.mknod(n,o,e,r)},create:function(t,e){return e=void 0!==e?e:438,e&=4095,e|=32768,lt.mknod(t,e,0)},mkdir:function(t,e){return e=void 0!==e?e:511,e&=1023,e|=16384,lt.mknod(t,e,0)},mkdirTree:function(t,e){for(var r=t.split("/"),n="",o=0;o<r.length;++o)if(r[o]){n+="/"+r[o];try{lt.mkdir(n,e)}catch(t){if(20!=t.errno)throw t}}},mkdev:function(t,e,r){return void 0===r&&(r=e,e=438),e|=8192,lt.mknod(t,e,r)},symlink:function(t,e){if(!st.resolve(t))throw new lt.ErrnoError(44);var r=lt.lookupPath(e,{parent:!0}).node;if(!r)throw new lt.ErrnoError(44);var n=at.basename(e),o=lt.mayCreate(r,n);if(o)throw new lt.ErrnoError(o);if(!r.node_ops.symlink)throw new lt.ErrnoError(63);return r.node_ops.symlink(r,n,t)},rename:function(t,e){var r,n,o=at.dirname(t),i=at.dirname(e),a=at.basename(t),s=at.basename(e);if(r=lt.lookupPath(t,{parent:!0}).node,n=lt.lookupPath(e,{parent:!0}).node,!r||!n)throw new lt.ErrnoError(44);if(r.mount!==n.mount)throw new lt.ErrnoError(75);var u,c=lt.lookupNode(r,a),f=st.relative(t,i);if("."!==f.charAt(0))throw new lt.ErrnoError(28);if("."!==(f=st.relative(e,o)).charAt(0))throw new lt.ErrnoError(55);try{u=lt.lookupNode(n,s)}catch(t){}if(c!==u){var l=lt.isDir(c.mode),d=lt.mayDelete(r,a,l);if(d)throw new lt.ErrnoError(d);if(d=u?lt.mayDelete(n,s,l):lt.mayCreate(n,s))throw new lt.ErrnoError(d);if(!r.node_ops.rename)throw new lt.ErrnoError(63);if(lt.isMountpoint(c)||u&&lt.isMountpoint(u))throw new lt.ErrnoError(10);if(n!==r&&(d=lt.nodePermissions(r,"w")))throw new lt.ErrnoError(d);try{lt.trackingDelegate.willMovePath&&lt.trackingDelegate.willMovePath(t,e)}catch(r){h("FS.trackingDelegate['willMovePath']('"+t+"', '"+e+"') threw an exception: "+r.message)}lt.hashRemoveNode(c);try{r.node_ops.rename(c,n,s)}catch(t){throw t}finally{lt.hashAddNode(c)}try{lt.trackingDelegate.onMovePath&&lt.trackingDelegate.onMovePath(t,e)}catch(r){h("FS.trackingDelegate['onMovePath']('"+t+"', '"+e+"') threw an exception: "+r.message)}}},rmdir:function(t){var e=lt.lookupPath(t,{parent:!0}).node,r=at.basename(t),n=lt.lookupNode(e,r),o=lt.mayDelete(e,r,!0);if(o)throw new lt.ErrnoError(o);if(!e.node_ops.rmdir)throw new lt.ErrnoError(63);if(lt.isMountpoint(n))throw new lt.ErrnoError(10);try{lt.trackingDelegate.willDeletePath&&lt.trackingDelegate.willDeletePath(t)}catch(e){h("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+e.message)}e.node_ops.rmdir(e,r),lt.destroyNode(n);try{lt.trackingDelegate.onDeletePath&&lt.trackingDelegate.onDeletePath(t)}catch(e){h("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+e.message)}},readdir:function(t){var e=lt.lookupPath(t,{follow:!0}).node;if(!e.node_ops.readdir)throw new lt.ErrnoError(54);return e.node_ops.readdir(e)},unlink:function(t){var e=lt.lookupPath(t,{parent:!0}).node,r=at.basename(t),n=lt.lookupNode(e,r),o=lt.mayDelete(e,r,!1);if(o)throw new lt.ErrnoError(o);if(!e.node_ops.unlink)throw new lt.ErrnoError(63);if(lt.isMountpoint(n))throw new lt.ErrnoError(10);try{lt.trackingDelegate.willDeletePath&&lt.trackingDelegate.willDeletePath(t)}catch(e){h("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+e.message)}e.node_ops.unlink(e,r),lt.destroyNode(n);try{lt.trackingDelegate.onDeletePath&&lt.trackingDelegate.onDeletePath(t)}catch(e){h("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+e.message)}},readlink:function(t){var e=lt.lookupPath(t).node;if(!e)throw new lt.ErrnoError(44);if(!e.node_ops.readlink)throw new lt.ErrnoError(28);return st.resolve(lt.getPath(e.parent),e.node_ops.readlink(e))},stat:function(t,e){var r=lt.lookupPath(t,{follow:!e}).node;if(!r)throw new lt.ErrnoError(44);if(!r.node_ops.getattr)throw new lt.ErrnoError(63);return r.node_ops.getattr(r)},lstat:function(t){return lt.stat(t,!0)},chmod:function(t,e,r){var n;if(!(n="string"==typeof t?lt.lookupPath(t,{follow:!r}).node:t).node_ops.setattr)throw new lt.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&e|-4096&n.mode,timestamp:Date.now()})},lchmod:function(t,e){lt.chmod(t,e,!0)},fchmod:function(t,e){var r=lt.getStream(t);if(!r)throw new lt.ErrnoError(8);lt.chmod(r.node,e)},chown:function(t,e,r,n){var o;if(!(o="string"==typeof t?lt.lookupPath(t,{follow:!n}).node:t).node_ops.setattr)throw new lt.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:function(t,e,r){lt.chown(t,e,r,!0)},fchown:function(t,e,r){var n=lt.getStream(t);if(!n)throw new lt.ErrnoError(8);lt.chown(n.node,e,r)},truncate:function(t,e){if(e<0)throw new lt.ErrnoError(28);var r;if(!(r="string"==typeof t?lt.lookupPath(t,{follow:!0}).node:t).node_ops.setattr)throw new lt.ErrnoError(63);if(lt.isDir(r.mode))throw new lt.ErrnoError(31);if(!lt.isFile(r.mode))throw new lt.ErrnoError(28);var n=lt.nodePermissions(r,"w");if(n)throw new lt.ErrnoError(n);r.node_ops.setattr(r,{size:e,timestamp:Date.now()})},ftruncate:function(t,e){var r=lt.getStream(t);if(!r)throw new lt.ErrnoError(8);if(0==(2097155&r.flags))throw new lt.ErrnoError(28);lt.truncate(r.node,e)},utime:function(t,e,r){var n=lt.lookupPath(t,{follow:!0}).node;n.node_ops.setattr(n,{timestamp:Math.max(e,r)})},open:function(t,e,r,n,i){if(""===t)throw new lt.ErrnoError(44);var a;if(r=void 0===r?438:r,r=64&(e="string"==typeof e?lt.modeStringToFlags(e):e)?4095&r|32768:0,"object"==typeof t)a=t;else{t=at.normalize(t);try{a=lt.lookupPath(t,{follow:!(131072&e)}).node}catch(t){}}var s=!1;if(64&e)if(a){if(128&e)throw new lt.ErrnoError(20)}else a=lt.mknod(t,r,0),s=!0;if(!a)throw new lt.ErrnoError(44);if(lt.isChrdev(a.mode)&&(e&=-513),65536&e&&!lt.isDir(a.mode))throw new lt.ErrnoError(54);if(!s){var u=lt.mayOpen(a,e);if(u)throw new lt.ErrnoError(u)}512&e&&lt.truncate(a,0),e&=-131713;var c=lt.createStream({node:a,path:lt.getPath(a),flags:e,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1},n,i);c.stream_ops.open&&c.stream_ops.open(c),!o.logReadFiles||1&e||(lt.readFiles||(lt.readFiles={}),t in lt.readFiles||(lt.readFiles[t]=1,h("FS.trackingDelegate error on read file: "+t)));try{if(lt.trackingDelegate.onOpenFile){var f=0;1!=(2097155&e)&&(f|=lt.tracking.openFlags.READ),0!=(2097155&e)&&(f|=lt.tracking.openFlags.WRITE),lt.trackingDelegate.onOpenFile(t,f)}}catch(e){h("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+e.message)}return c},close:function(t){if(lt.isClosed(t))throw new lt.ErrnoError(8);t.getdents&&(t.getdents=null);try{t.stream_ops.close&&t.stream_ops.close(t)}catch(t){throw t}finally{lt.closeStream(t.fd)}t.fd=null},isClosed:function(t){return null===t.fd},llseek:function(t,e,r){if(lt.isClosed(t))throw new lt.ErrnoError(8);if(!t.seekable||!t.stream_ops.llseek)throw new lt.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new lt.ErrnoError(28);return t.position=t.stream_ops.llseek(t,e,r),t.ungotten=[],t.position},read:function(t,e,r,n,o){if(n<0||o<0)throw new lt.ErrnoError(28);if(lt.isClosed(t))throw new lt.ErrnoError(8);if(1==(2097155&t.flags))throw new lt.ErrnoError(8);if(lt.isDir(t.node.mode))throw new lt.ErrnoError(31);if(!t.stream_ops.read)throw new lt.ErrnoError(28);var i=void 0!==o;if(i){if(!t.seekable)throw new lt.ErrnoError(70)}else o=t.position;var a=t.stream_ops.read(t,e,r,n,o);return i||(t.position+=a),a},write:function(t,e,r,n,o,i){if(n<0||o<0)throw new lt.ErrnoError(28);if(lt.isClosed(t))throw new lt.ErrnoError(8);if(0==(2097155&t.flags))throw new lt.ErrnoError(8);if(lt.isDir(t.node.mode))throw new lt.ErrnoError(31);if(!t.stream_ops.write)throw new lt.ErrnoError(28);t.seekable&&1024&t.flags&&lt.llseek(t,0,2);var a=void 0!==o;if(a){if(!t.seekable)throw new lt.ErrnoError(70)}else o=t.position;var s=t.stream_ops.write(t,e,r,n,o,i);a||(t.position+=s);try{t.path&&lt.trackingDelegate.onWriteToFile&&lt.trackingDelegate.onWriteToFile(t.path)}catch(e){h("FS.trackingDelegate['onWriteToFile']('"+t.path+"') threw an exception: "+e.message)}return s},allocate:function(t,e,r){if(lt.isClosed(t))throw new lt.ErrnoError(8);if(e<0||r<=0)throw new lt.ErrnoError(28);if(0==(2097155&t.flags))throw new lt.ErrnoError(8);if(!lt.isFile(t.node.mode)&&!lt.isDir(t.node.mode))throw new lt.ErrnoError(43);if(!t.stream_ops.allocate)throw new lt.ErrnoError(138);t.stream_ops.allocate(t,e,r)},mmap:function(t,e,r,n,o,i){if(0!=(2&o)&&0==(2&i)&&2!=(2097155&t.flags))throw new lt.ErrnoError(2);if(1==(2097155&t.flags))throw new lt.ErrnoError(2);if(!t.stream_ops.mmap)throw new lt.ErrnoError(43);return t.stream_ops.mmap(t,e,r,n,o,i)},msync:function(t,e,r,n,o){return t&&t.stream_ops.msync?t.stream_ops.msync(t,e,r,n,o):0},munmap:function(t){return 0},ioctl:function(t,e,r){if(!t.stream_ops.ioctl)throw new lt.ErrnoError(59);return t.stream_ops.ioctl(t,e,r)},readFile:function(t,e){if((e=e||{}).flags=e.flags||0,e.encoding=e.encoding||"binary","utf8"!==e.encoding&&"binary"!==e.encoding)throw new Error('Invalid encoding type "'+e.encoding+'"');var r,n=lt.open(t,e.flags),o=lt.stat(t).size,i=new Uint8Array(o);return lt.read(n,i,0,o,0),"utf8"===e.encoding?r=R(i,0):"binary"===e.encoding&&(r=i),lt.close(n),r},writeFile:function(t,e,r){(r=r||{}).flags=r.flags||577;var n=lt.open(t,r.flags,r.mode);if("string"==typeof e){var o=new Uint8Array(C(e)+1),i=O(e,o,0,o.length);lt.write(n,o,0,i,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(e))throw new Error("Unsupported data type");lt.write(n,e,0,e.byteLength,void 0,r.canOwn)}lt.close(n)},cwd:function(){return lt.currentPath},chdir:function(t){var e=lt.lookupPath(t,{follow:!0});if(null===e.node)throw new lt.ErrnoError(44);if(!lt.isDir(e.node.mode))throw new lt.ErrnoError(54);var r=lt.nodePermissions(e.node,"x");if(r)throw new lt.ErrnoError(r);lt.currentPath=e.path},createDefaultDirectories:function(){lt.mkdir("/tmp"),lt.mkdir("/home"),lt.mkdir("/home/web_user")},createDefaultDevices:function(){lt.mkdir("/dev"),lt.registerDevice(lt.makedev(1,3),{read:function(){return 0},write:function(t,e,r,n,o){return n}}),lt.mkdev("/dev/null",lt.makedev(1,3)),ut.register(lt.makedev(5,0),ut.default_tty_ops),ut.register(lt.makedev(6,0),ut.default_tty1_ops),lt.mkdev("/dev/tty",lt.makedev(5,0)),lt.mkdev("/dev/tty1",lt.makedev(6,0));var t=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return function(){return crypto.getRandomValues(t),t[0]}}return function(){q("randomDevice")}}();lt.createDevice("/dev","random",t),lt.createDevice("/dev","urandom",t),lt.mkdir("/dev/shm"),lt.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){lt.mkdir("/proc"),lt.mkdir("/proc/self"),lt.mkdir("/proc/self/fd"),lt.mount({mount:function(){var t=lt.createNode("/proc/self","fd",16895,73);return t.node_ops={lookup:function(t,e){var r=+e,n=lt.getStream(r);if(!n)throw new lt.ErrnoError(8);var o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return n.path}}};return o.parent=o,o}},t}},{},"/proc/self/fd")},createStandardStreams:function(){o.stdin?lt.createDevice("/dev","stdin",o.stdin):lt.symlink("/dev/tty","/dev/stdin"),o.stdout?lt.createDevice("/dev","stdout",null,o.stdout):lt.symlink("/dev/tty","/dev/stdout"),o.stderr?lt.createDevice("/dev","stderr",null,o.stderr):lt.symlink("/dev/tty1","/dev/stderr"),lt.open("/dev/stdin",0),lt.open("/dev/stdout",1),lt.open("/dev/stderr",1)},ensureErrnoError:function(){lt.ErrnoError||(lt.ErrnoError=function(t,e){this.node=e,this.setErrno=function(t){this.errno=t},this.setErrno(t),this.message="FS error"},lt.ErrnoError.prototype=new Error,lt.ErrnoError.prototype.constructor=lt.ErrnoError,[44].forEach(function(t){lt.genericErrors[t]=new lt.ErrnoError(t),lt.genericErrors[t].stack="<generic error, no stack>"}))},staticInit:function(){lt.ensureErrnoError(),lt.nameTable=new Array(4096),lt.mount(ft,{},"/"),lt.createDefaultDirectories(),lt.createDefaultDevices(),lt.createSpecialDirectories(),lt.filesystems={MEMFS:ft}},init:function(t,e,r){lt.init.initialized=!0,lt.ensureErrnoError(),o.stdin=t||o.stdin,o.stdout=e||o.stdout,o.stderr=r||o.stderr,lt.createStandardStreams()},quit:function(){lt.init.initialized=!1;var t=o._fflush;t&&t(0);for(var e=0;e<lt.streams.length;e++){var r=lt.streams[e];r&&lt.close(r)}},getMode:function(t,e){var r=0;return t&&(r|=365),e&&(r|=146),r},findObject:function(t,e){var r=lt.analyzePath(t,e);return r.exists?r.object:null},analyzePath:function(t,e){try{t=(n=lt.lookupPath(t,{follow:!e})).path}catch(t){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=lt.lookupPath(t,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=at.basename(t),n=lt.lookupPath(t,{follow:!e}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot="/"===n.path}catch(t){r.error=t.errno}return r},createPath:function(t,e,r,n){t="string"==typeof t?t:lt.getPath(t);for(var o=e.split("/").reverse();o.length;){var i=o.pop();if(i){var a=at.join2(t,i);try{lt.mkdir(a)}catch(t){}t=a}}return a},createFile:function(t,e,r,n,o){var i=at.join2("string"==typeof t?t:lt.getPath(t),e),a=lt.getMode(n,o);return lt.create(i,a)},createDataFile:function(t,e,r,n,o,i){var a=e?at.join2("string"==typeof t?t:lt.getPath(t),e):t,s=lt.getMode(n,o),u=lt.create(a,s);if(r){if("string"==typeof r){for(var c=new Array(r.length),f=0,l=r.length;f<l;++f)c[f]=r.charCodeAt(f);r=c}lt.chmod(u,146|s);var d=lt.open(u,577);lt.write(d,r,0,r.length,0,i),lt.close(d),lt.chmod(u,s)}return u},createDevice:function(t,e,r,n){var o=at.join2("string"==typeof t?t:lt.getPath(t),e),i=lt.getMode(!!r,!!n);lt.createDevice.major||(lt.createDevice.major=64);var a=lt.makedev(lt.createDevice.major++,0);return lt.registerDevice(a,{open:function(t){t.seekable=!1},close:function(t){n&&n.buffer&&n.buffer.length&&n(10)},read:function(t,e,n,o,i){for(var a=0,s=0;s<o;s++){var u;try{u=r()}catch(t){throw new lt.ErrnoError(29)}if(void 0===u&&0===a)throw new lt.ErrnoError(6);if(null==u)break;a++,e[n+s]=u}return a&&(t.node.timestamp=Date.now()),a},write:function(t,e,r,o,i){for(var a=0;a<o;a++)try{n(e[r+a])}catch(t){throw new lt.ErrnoError(29)}return o&&(t.node.timestamp=Date.now()),a}}),lt.mkdev(o,i,a)},forceLoadFile:function(t){if(t.isDevice||t.isFolder||t.link||t.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!s)throw new Error("Cannot load without read() or XMLHttpRequest.");try{t.contents=Dt(s(t.url),!0),t.usedBytes=t.contents.length}catch(t){throw new lt.ErrnoError(29)}},createLazyFile:function(t,e,r,n,o){function i(){this.lengthKnown=!1,this.chunks=[]}if(i.prototype.get=function(t){if(!(t>this.length-1||t<0)){var e=t%this.chunkSize,r=t/this.chunkSize|0;return this.getter(r)[e]}},i.prototype.setDataGetter=function(t){this.getter=t},i.prototype.cacheLength=function(){var t=new XMLHttpRequest;if(t.open("HEAD",r,!1),t.send(null),!(t.status>=200&&t.status<300||304===t.status))throw new Error("Couldn't load "+r+". Status: "+t.status);var e,n=Number(t.getResponseHeader("Content-length")),o=(e=t.getResponseHeader("Accept-Ranges"))&&"bytes"===e,i=(e=t.getResponseHeader("Content-Encoding"))&&"gzip"===e,a=1048576;o||(a=n);var s=this;s.setDataGetter(function(t){var e=t*a,o=(t+1)*a-1;if(o=Math.min(o,n-1),void 0===s.chunks[t]&&(s.chunks[t]=function(t,e){if(t>e)throw new Error("invalid range ("+t+", "+e+") or no bytes requested!");if(e>n-1)throw new Error("only "+n+" bytes available! programmer error!");var o=new XMLHttpRequest;if(o.open("GET",r,!1),n!==a&&o.setRequestHeader("Range","bytes="+t+"-"+e),"undefined"!=typeof Uint8Array&&(o.responseType="arraybuffer"),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.send(null),!(o.status>=200&&o.status<300||304===o.status))throw new Error("Couldn't load "+r+". Status: "+o.status);return void 0!==o.response?new Uint8Array(o.response||[]):Dt(o.responseText||"",!0)}(e,o)),void 0===s.chunks[t])throw new Error("doXHR failed!");return s.chunks[t]}),!i&&n||(a=n=1,n=this.getter(0).length,a=n,p("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a={isDevice:!1,url:r},s=lt.createFile(t,e,a,n,o);a.contents?s.contents=a.contents:a.url&&(s.contents=null,s.url=a.url),Object.defineProperties(s,{usedBytes:{get:function(){return this.contents.length}}});var u={};return Object.keys(s.stream_ops).forEach(function(t){var e=s.stream_ops[t];u[t]=function(){return lt.forceLoadFile(s),e.apply(null,arguments)}}),u.read=function(t,e,r,n,o){lt.forceLoadFile(s);var i=t.node.contents;if(o>=i.length)return 0;var a=Math.min(i.length-o,n);if(i.slice)for(var u=0;u<a;u++)e[r+u]=i[o+u];else for(u=0;u<a;u++)e[r+u]=i.get(o+u);return a},s.stream_ops=u,s},createPreloadedFile:function(t,e,r,n,i,a,s,u,c,f){Browser.init();var l=e?st.resolve(at.join2(t,e)):t;function d(r){function d(r){f&&f(),u||lt.createDataFile(t,e,r,n,i,c),a&&a(),Y()}var p=!1;o.preloadPlugins.forEach(function(t){p||t.canHandle(l)&&(t.handle(r,l,d,function(){s&&s(),Y()}),p=!0)}),p||d(r)}W(),"string"==typeof r?Browser.asyncLoad(r,function(t){d(t)},s):d(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(t,e,r){e=e||function(){},r=r||function(){};var n=lt.indexedDB();try{var o=n.open(lt.DB_NAME(),lt.DB_VERSION)}catch(t){return r(t)}o.onupgradeneeded=function(){p("creating db"),o.result.createObjectStore(lt.DB_STORE_NAME)},o.onsuccess=function(){var n=o.result.transaction([lt.DB_STORE_NAME],"readwrite"),i=n.objectStore(lt.DB_STORE_NAME),a=0,s=0,u=t.length;function c(){0==s?e():r()}t.forEach(function(t){var e=i.put(lt.analyzePath(t).object.contents,t);e.onsuccess=function(){++a+s==u&&c()},e.onerror=function(){a+ ++s==u&&c()}}),n.onerror=r},o.onerror=r},loadFilesFromDB:function(t,e,r){e=e||function(){},r=r||function(){};var n=lt.indexedDB();try{var o=n.open(lt.DB_NAME(),lt.DB_VERSION)}catch(t){return r(t)}o.onupgradeneeded=r,o.onsuccess=function(){var n=o.result;try{var i=n.transaction([lt.DB_STORE_NAME],"readonly")}catch(t){return void r(t)}var a=i.objectStore(lt.DB_STORE_NAME),s=0,u=0,c=t.length;function f(){0==u?e():r()}t.forEach(function(t){var e=a.get(t);e.onsuccess=function(){lt.analyzePath(t).exists&&lt.unlink(t),lt.createDataFile(at.dirname(t),at.basename(t),e.result,!0,!0,!0),++s+u==c&&f()},e.onerror=function(){s+ ++u==c&&f()}}),i.onerror=r},o.onerror=r}},dt={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(t,e){if("/"!==e[0]){var r;if(-100===t)r=lt.cwd();else{var n=lt.getStream(t);if(!n)throw new lt.ErrnoError(8);r=n.path}e=at.join2(r,e)}return e},doStat:function(t,e,r){try{var n=t(e)}catch(t){if(t&&t.node&&at.normalize(e)!==at.normalize(lt.getPath(t.node)))return-54;throw t}return x[r>>2]=n.dev,x[r+4>>2]=0,x[r+8>>2]=n.ino,x[r+12>>2]=n.mode,x[r+16>>2]=n.nlink,x[r+20>>2]=n.uid,x[r+24>>2]=n.gid,x[r+28>>2]=n.rdev,x[r+32>>2]=0,K=[n.size>>>0,(G=n.size,+Math.abs(G)>=1?G>0?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],x[r+40>>2]=K[0],x[r+44>>2]=K[1],x[r+48>>2]=4096,x[r+52>>2]=n.blocks,x[r+56>>2]=n.atime.getTime()/1e3|0,x[r+60>>2]=0,x[r+64>>2]=n.mtime.getTime()/1e3|0,x[r+68>>2]=0,x[r+72>>2]=n.ctime.getTime()/1e3|0,x[r+76>>2]=0,K=[n.ino>>>0,(G=n.ino,+Math.abs(G)>=1?G>0?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],x[r+80>>2]=K[0],x[r+84>>2]=K[1],0},doMsync:function(t,e,r,n,o){var i=F.slice(t,t+r);lt.msync(e,i,o,r,n)},doMkdir:function(t,e){return"/"===(t=at.normalize(t))[t.length-1]&&(t=t.substr(0,t.length-1)),lt.mkdir(t,e,0),0},doMknod:function(t,e,r){switch(61440&e){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return lt.mknod(t,e,r),0},doReadlink:function(t,e,r){if(r<=0)return-28;var n=lt.readlink(t),o=Math.min(r,C(n)),i=S[e+o];return O(n,F,e,r+1),S[e+o]=i,o},doAccess:function(t,e){if(-8&e)return-28;var r;if(!(r=lt.lookupPath(t,{follow:!0}).node))return-44;var n="";return 4&e&&(n+="r"),2&e&&(n+="w"),1&e&&(n+="x"),n&&lt.nodePermissions(r,n)?-2:0},doDup:function(t,e,r){var n=lt.getStream(r);return n&&lt.close(n),lt.open(t,e,0,r,r).fd},doReadv:function(t,e,r,n){for(var o=0,i=0;i<r;i++){var a=x[e+8*i>>2],s=x[e+(8*i+4)>>2],u=lt.read(t,S,a,s,n);if(u<0)return-1;if(o+=u,u<s)break}return o},doWritev:function(t,e,r,n){for(var o=0,i=0;i<r;i++){var a=x[e+8*i>>2],s=x[e+(8*i+4)>>2],u=lt.write(t,S,a,s,n);if(u<0)return-1;o+=u}return o},varargs:void 0,get:function(){return dt.varargs+=4,x[dt.varargs-4>>2]},getStr:function(t){return T(t)},getStreamFromFD:function(t){var e=lt.getStream(t);if(!e)throw new lt.ErrnoError(8);return e},get64:function(t,e){return t}};function pt(t){try{return v.grow(t-D.byteLength+65535>>>16),j(v.buffer),1}catch(t){}}var ht={};function mt(){if(!mt.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(var e in ht)t[e]=ht[e];var r=[];for(var e in t)r.push(e+"="+t[e]);mt.strings=r}return mt.strings}function _t(t){return t%4==0&&(t%100!=0||t%400==0)}function vt(t,e){for(var r=0,n=0;n<=e;r+=t[n++]);return r}var wt=[31,29,31,30,31,30,31,31,30,31,30,31],yt=[31,28,31,30,31,30,31,31,30,31,30,31];function gt(t,e){for(var r=new Date(t.getTime());e>0;){var n=_t(r.getFullYear()),o=r.getMonth(),i=(n?wt:yt)[o];if(!(e>i-r.getDate()))return r.setDate(r.getDate()+e),r;e-=i-r.getDate()+1,r.setDate(1),o<11?r.setMonth(o+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r}function Et(t,e,r,n){var o=x[n+40>>2],i={tm_sec:x[n>>2],tm_min:x[n+4>>2],tm_hour:x[n+8>>2],tm_mday:x[n+12>>2],tm_mon:x[n+16>>2],tm_year:x[n+20>>2],tm_wday:x[n+24>>2],tm_yday:x[n+28>>2],tm_isdst:x[n+32>>2],tm_gmtoff:x[n+36>>2],tm_zone:o?T(o):""},a=T(r),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var u in s)a=a.replace(new RegExp(u,"g"),s[u]);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f=["January","February","March","April","May","June","July","August","September","October","November","December"];function l(t,e,r){for(var n="number"==typeof t?t.toString():t||"";n.length<e;)n=r[0]+n;return n}function d(t,e){return l(t,e,"0")}function p(t,e){function r(t){return t<0?-1:t>0?1:0}var n;return 0===(n=r(t.getFullYear()-e.getFullYear()))&&0===(n=r(t.getMonth()-e.getMonth()))&&(n=r(t.getDate()-e.getDate())),n}function h(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function m(t){var e=gt(new Date(t.tm_year+1900,0,1),t.tm_yday),r=new Date(e.getFullYear(),0,4),n=new Date(e.getFullYear()+1,0,4),o=h(r),i=h(n);return p(o,e)<=0?p(i,e)<=0?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var _={"%a":function(t){return c[t.tm_wday].substring(0,3)},"%A":function(t){return c[t.tm_wday]},"%b":function(t){return f[t.tm_mon].substring(0,3)},"%B":function(t){return f[t.tm_mon]},"%C":function(t){return d((t.tm_year+1900)/100|0,2)},"%d":function(t){return d(t.tm_mday,2)},"%e":function(t){return l(t.tm_mday,2," ")},"%g":function(t){return m(t).toString().substring(2)},"%G":function(t){return m(t)},"%H":function(t){return d(t.tm_hour,2)},"%I":function(t){var e=t.tm_hour;return 0==e?e=12:e>12&&(e-=12),d(e,2)},"%j":function(t){return d(t.tm_mday+vt(_t(t.tm_year+1900)?wt:yt,t.tm_mon-1),3)},"%m":function(t){return d(t.tm_mon+1,2)},"%M":function(t){return d(t.tm_min,2)},"%n":function(){return"\\n"},"%p":function(t){return t.tm_hour>=0&&t.tm_hour<12?"AM":"PM"},"%S":function(t){return d(t.tm_sec,2)},"%t":function(){return"\\t"},"%u":function(t){return t.tm_wday||7},"%U":function(t){var e=new Date(t.tm_year+1900,0,1),r=0===e.getDay()?e:gt(e,7-e.getDay()),n=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(p(r,n)<0){var o=vt(_t(n.getFullYear())?wt:yt,n.getMonth()-1)-31,i=31-r.getDate()+o+n.getDate();return d(Math.ceil(i/7),2)}return 0===p(r,e)?"01":"00"},"%V":function(t){var e,r=new Date(t.tm_year+1900,0,4),n=new Date(t.tm_year+1901,0,4),o=h(r),i=h(n),a=gt(new Date(t.tm_year+1900,0,1),t.tm_yday);return p(a,o)<0?"53":p(i,a)<=0?"01":(e=o.getFullYear()<t.tm_year+1900?t.tm_yday+32-o.getDate():t.tm_yday+1-o.getDate(),d(Math.ceil(e/7),2))},"%w":function(t){return t.tm_wday},"%W":function(t){var e=new Date(t.tm_year,0,1),r=1===e.getDay()?e:gt(e,0===e.getDay()?1:7-e.getDay()+1),n=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(p(r,n)<0){var o=vt(_t(n.getFullYear())?wt:yt,n.getMonth()-1)-31,i=31-r.getDate()+o+n.getDate();return d(Math.ceil(i/7),2)}return 0===p(r,e)?"01":"00"},"%y":function(t){return(t.tm_year+1900).toString().substring(2)},"%Y":function(t){return t.tm_year+1900},"%z":function(t){var e=t.tm_gmtoff,r=e>=0;return e=(e=Math.abs(e)/60)/60*100+e%60,(r?"+":"-")+String("0000"+e).slice(-4)},"%Z":function(t){return t.tm_zone},"%%":function(){return"%"}};for(var u in _)a.indexOf(u)>=0&&(a=a.replace(new RegExp(u,"g"),_[u](i)));var v=Dt(a,!1);return v.length>e?0:(function(t,e){S.set(t,e)}(v,t),v.length-1)}var bt=[],kt=function(t,e,r,n){t||(t=this),this.parent=t,this.mount=t.mount,this.mounted=null,this.id=lt.nextInode++,this.name=e,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n};function Dt(t,e,r){var n=r>0?r:C(t)+1,o=new Array(n),i=O(t,o,0,o.length);return e&&(o.length=i),o}Object.defineProperties(kt.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(t){t?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return lt.isDir(this.mode)}},isDevice:{get:function(){return lt.isChrdev(this.mode)}}}),lt.FSNode=kt,lt.staticInit(),z.push({func:function(){Pt()}});var St,Ft={F:function(t,e){return function(t,e){var r;if(0===t)r=Date.now();else{if(1!==t&&4!==t||!rt)return nt(28),-1;r=Q()}return x[e>>2]=r/1e3|0,x[e+4>>2]=r%1e3*1e3*1e3|0,0}(t,e)},h:function(t){return jt(t+ot.SIZE)+ot.SIZE},g:function(t,e,r){throw new it(t).init(e,r),t},K:function(t,e){try{return t=dt.getStr(t),dt.doAccess(t,e)}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),-t.errno}},s:function(t,e,r){dt.varargs=r;try{var n=dt.getStreamFromFD(t);switch(e){case 0:return(o=dt.get())<0?-28:lt.open(n.path,n.flags,0,o).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:var o=dt.get();return n.flags|=o,0;case 12:return o=dt.get(),P[o+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return nt(28),-1;default:return-28}}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),-t.errno}},M:function(t,e){try{var r=dt.getStreamFromFD(t);return dt.doStat(lt.stat,r.path,e)}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),-t.errno}},l:function(){return 42},H:function(t,e,r){dt.varargs=r;try{var n=dt.getStreamFromFD(t);switch(e){case 21509:case 21505:return n.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return n.tty?0:-59;case 21519:if(!n.tty)return-59;var o=dt.get();return x[o>>2]=0,0;case 21520:return n.tty?-28:-59;case 21531:return o=dt.get(),lt.ioctl(n,e,o);case 21523:case 21524:return n.tty?0:-59;default:q("bad ioctl syscall "+e)}}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),-t.errno}},I:function(t,e,r,n,o,i){try{return function(t,e,r,n,o,i){var a;i<<=12;var s=!1;if(0!=(16&n)&&t%16384!=0)return-28;if(0!=(32&n)){if(!(a=Ht(16384,e)))return-48;zt(a,0,e),s=!0}else{var u=lt.getStream(o);if(!u)return-8;var c=lt.mmap(u,t,e,i,r,n);a=c.ptr,s=c.allocated}return dt.mappings[a]={malloc:a,len:e,allocated:s,fd:o,prot:r,flags:n,offset:i},a}(t,e,r,n,o,i)}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),-t.errno}},J:function(t,e){try{return function(t,e){if(-1==(0|t)||0===e)return-28;var r=dt.mappings[t];if(!r)return 0;if(e===r.len){var n=lt.getStream(r.fd);2&r.prot&&dt.doMsync(t,n,e,r.flags,r.offset),lt.munmap(n),dt.mappings[t]=null,r.allocated&&Nt(r.malloc)}return 0}(t,e)}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),-t.errno}},t:function(t,e,r){dt.varargs=r;try{var n=dt.getStr(t),o=r?dt.get():0;return lt.open(n,e,o).fd}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),-t.errno}},L:function(t,e){try{return t=dt.getStr(t),dt.doStat(lt.stat,t,e)}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),-t.errno}},E:function(t){try{return t=dt.getStr(t),lt.unlink(t),0}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),-t.errno}},q:function(){q()},Q:function(t,e,r){var n=function(t,e){var r;for(bt.length=0,e>>=2;r=F[t++];){var n=r<105;n&&1&e&&e++,bt.push(n?M[e++>>1]:x[e]),++e}return bt}(e,r);return tt[t].apply(null,n)},c:function(t,e){return function(t,e){throw Ut(t,e||1),"longjmp"}(t,e)},y:function(t,e,r){F.copyWithin(t,e,e+r)},z:function(t){t>>>=0;var e=F.length;if(t>2147483648)return!1;for(var r,n,o=1;o<=4;o*=2){var i=e*(1+.2/o);if(i=Math.min(i,t+100663296),pt(Math.min(2147483648,((r=Math.max(16777216,t,i))%(n=65536)>0&&(r+=n-r%n),r))))return!0}return!1},C:function(t,e){try{var r=0;return mt().forEach(function(n,o){var i=e+r;x[t+4*o>>2]=i,function(t,e,r){for(var n=0;n<t.length;++n)S[e++>>0]=t.charCodeAt(n);r||(S[e>>0]=0)}(n,i),r+=n.length+1}),0}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),t.errno}},D:function(t,e){try{var r=mt();x[t>>2]=r.length;var n=0;return r.forEach(function(t){n+=t.length+1}),x[e>>2]=n,0}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),t.errno}},e:function(t){!function(t,e){e&&_&&0===t||(_||(o.onExit&&o.onExit(t),b=!0),f(t,new Wt(t)))}(t)},k:function(t){try{var e=dt.getStreamFromFD(t);return lt.close(e),0}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),t.errno}},B:function(t,e){try{var r=dt.getStreamFromFD(t),n=r.tty?2:lt.isDir(r.mode)?3:lt.isLink(r.mode)?7:4;return S[e>>0]=n,0}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),t.errno}},G:function(t,e,r,n){try{var o=dt.getStreamFromFD(t),i=dt.doReadv(o,e,r);return x[n>>2]=i,0}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),t.errno}},x:function(t,e,r,n,o){try{var i=dt.getStreamFromFD(t),a=4294967296*r+(e>>>0);return a<=-9007199254740992||a>=9007199254740992?-61:(lt.llseek(i,a,n),K=[i.position>>>0,(G=i.position,+Math.abs(G)>=1?G>0?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],x[o>>2]=K[0],x[o+4>>2]=K[1],i.getdents&&0===a&&0===n&&(i.getdents=null),0)}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),t.errno}},r:function(t,e,r,n){try{var o=dt.getStreamFromFD(t),i=dt.doWritev(o,e,r);return x[n>>2]=i,0}catch(t){return void 0!==lt&&t instanceof lt.ErrnoError||q(t),t.errno}},a:function(){return 0|E()},P:function(t){var e=Date.now();return x[t>>2]=e/1e3|0,x[t+4>>2]=e%1e3*1e3|0,0},N:function(t,e){var r=It();try{return N.get(t)(e)}catch(t){if(Lt(r),t!==t+0&&"longjmp"!==t)throw t;Ut(1,0)}},w:function(t){var e=It();try{return N.get(t)()}catch(t){if(Lt(e),t!==t+0&&"longjmp"!==t)throw t;Ut(1,0)}},j:function(t,e){var r=It();try{return N.get(t)(e)}catch(t){if(Lt(r),t!==t+0&&"longjmp"!==t)throw t;Ut(1,0)}},d:function(t,e,r){var n=It();try{return N.get(t)(e,r)}catch(t){if(Lt(n),t!==t+0&&"longjmp"!==t)throw t;Ut(1,0)}},i:function(t,e,r,n){var o=It();try{return N.get(t)(e,r,n)}catch(t){if(Lt(o),t!==t+0&&"longjmp"!==t)throw t;Ut(1,0)}},O:function(t,e,r,n,o,i,a){var s=It();try{return N.get(t)(e,r,n,o,i,a)}catch(t){if(Lt(s),t!==t+0&&"longjmp"!==t)throw t;Ut(1,0)}},f:function(t,e){var r=It();try{N.get(t)(e)}catch(t){if(Lt(r),t!==t+0&&"longjmp"!==t)throw t;Ut(1,0)}},p:function(t,e,r){var n=It();try{N.get(t)(e,r)}catch(t){if(Lt(n),t!==t+0&&"longjmp"!==t)throw t;Ut(1,0)}},o:function(t,e,r,n){var o=It();try{N.get(t)(e,r,n)}catch(t){if(Lt(o),t!==t+0&&"longjmp"!==t)throw t;Ut(1,0)}},n:function(t,e,r,n,o){var i=It();try{N.get(t)(e,r,n,o)}catch(t){if(Lt(i),t!==t+0&&"longjmp"!==t)throw t;Ut(1,0)}},m:function(t,e,r,n,o,i){var a=It();try{N.get(t)(e,r,n,o,i)}catch(t){if(Lt(a),t!==t+0&&"longjmp"!==t)throw t;Ut(1,0)}},b:function(t){g(0|t)},A:function(t,e,r,n){return Et(t,e,r,n)},v:function(t){var e=Date.now()/1e3|0;return t&&(x[t>>2]=e),e},u:function(t){return 0!==t&&zt(t,0,16),0}},Pt=(function(){var t={a:Ft};function e(t,e){var r=t.exports;o.asm=r,j((v=o.asm.R).buffer),N=o.asm.S,Y()}function r(t){e(t.instance)}function i(e){return(!m&&l&&"function"==typeof fetch?fetch(Z,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+Z+"'";return t.arrayBuffer()}).catch(function(){return $(Z)}):Promise.resolve().then(function(){return $(Z)})).then(function(e){return WebAssembly.instantiate(e,t)}).then(e,function(t){h("failed to asynchronously prepare wasm: "+t),q(t)})}if(W(),o.instantiateWasm)try{return o.instantiateWasm(t,e)}catch(t){return h("Module.instantiateWasm callback failed with error: "+t),!1}(m||"function"!=typeof WebAssembly.instantiateStreaming||J(Z)||"function"!=typeof fetch?i(r):fetch(Z,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,t).then(r,function(t){return h("wasm streaming compile failed: "+t),h("falling back to ArrayBuffer instantiation"),i(r)})})).catch(n)}(),o.___wasm_call_ctors=function(){return(Pt=o.___wasm_call_ctors=o.asm.T).apply(null,arguments)}),xt=(o.___em_js__array_bounds_check_error=function(){return(o.___em_js__array_bounds_check_error=o.asm.U).apply(null,arguments)},o._emscripten_bind_VoidPtr___destroy___0=function(){return(xt=o._emscripten_bind_VoidPtr___destroy___0=o.asm.V).apply(null,arguments)}),Mt=o._emscripten_bind_Main_layout_3=function(){return(Mt=o._emscripten_bind_Main_layout_3=o.asm.W).apply(null,arguments)},At=o._emscripten_bind_Main_lastError_0=function(){return(At=o._emscripten_bind_Main_lastError_0=o.asm.X).apply(null,arguments)},Rt=o._emscripten_bind_Main_createFile_2=function(){return(Rt=o._emscripten_bind_Main_createFile_2=o.asm.Y).apply(null,arguments)},Tt=o._emscripten_bind_Main_setYInvert_1=function(){return(Tt=o._emscripten_bind_Main_setYInvert_1=o.asm.Z).apply(null,arguments)},Ot=o._emscripten_bind_Main_setNop_1=function(){return(Ot=o._emscripten_bind_Main_setNop_1=o.asm._).apply(null,arguments)},Ct=o._emscripten_bind_Main___destroy___0=function(){return(Ct=o._emscripten_bind_Main___destroy___0=o.asm.$).apply(null,arguments)},jt=o._malloc=function(){return(jt=o._malloc=o.asm.aa).apply(null,arguments)},Nt=o._free=function(){return(Nt=o._free=o.asm.ba).apply(null,arguments)},Bt=o.___errno_location=function(){return(Bt=o.___errno_location=o.asm.ca).apply(null,arguments)},zt=o._memset=function(){return(zt=o._memset=o.asm.da).apply(null,arguments)},It=o.stackSave=function(){return(It=o.stackSave=o.asm.ea).apply(null,arguments)},Lt=o.stackRestore=function(){return(Lt=o.stackRestore=o.asm.fa).apply(null,arguments)},Ut=o._setThrew=function(){return(Ut=o._setThrew=o.asm.ga).apply(null,arguments)},Ht=o._memalign=function(){return(Ht=o._memalign=o.asm.ha).apply(null,arguments)};function Wt(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Yt(t){function r(){St||(St=!0,o.calledRun=!0,b||(o.noFSInit||lt.init.initialized||lt.init(),ut.init(),et(z),lt.ignorePermissions=!1,et(I),e(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),function(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)t=o.postRun.shift(),L.unshift(t);var t;et(L)}()))}U>0||(function(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)t=o.preRun.shift(),B.unshift(t);var t;et(B)}(),U>0||(o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),r()},1)):r()))}if(H=function t(){St||Yt(),St||(H=t)},o.run=Yt,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();function qt(){}function Vt(t){return(t||qt).__cache__}function Jt(t,e){var r=Vt(e),n=r[t];return n||((n=Object.create((e||qt).prototype)).ptr=t,r[t]=n)}_=!0,Yt(),qt.prototype=Object.create(qt.prototype),qt.prototype.constructor=qt,qt.prototype.__class__=qt,qt.__cache__={},o.WrapperObject=qt,o.getCache=Vt,o.wrapPointer=Jt,o.castObject=function(t,e){return Jt(t.ptr,e)},o.NULL=Jt(0),o.destroy=function(t){if(!t.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";t.__destroy__(),delete Vt(t.__class__)[t.ptr]},o.compare=function(t,e){return t.ptr===e.ptr},o.getPointer=function(t){return t.ptr},o.getClass=function(t){return t.__class__};var Xt={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(Xt.needed){for(var t=0;t<Xt.temps.length;t++)o._free(Xt.temps[t]);Xt.temps.length=0,o._free(Xt.buffer),Xt.buffer=0,Xt.size+=Xt.needed,Xt.needed=0}Xt.buffer||(Xt.size+=128,Xt.buffer=o._malloc(Xt.size),k(Xt.buffer)),Xt.pos=0},alloc:function(t,e){k(Xt.buffer);var r,n=e.BYTES_PER_ELEMENT,i=t.length*n;return i=i+7&-8,Xt.pos+i>=Xt.size?(k(i>0),Xt.needed+=i,r=o._malloc(i),Xt.temps.push(r)):(r=Xt.buffer+Xt.pos,Xt.pos+=i),r},copy:function(t,e,r){switch(r>>>=0,e.BYTES_PER_ELEMENT){case 2:r>>>=1;break;case 4:r>>>=2;break;case 8:r>>>=3}for(var n=0;n<t.length;n++)e[r+n]=t[n]}};function Gt(t){if("string"==typeof t){var e=Dt(t),r=Xt.alloc(e,S);return Xt.copy(e,S,r),r}return t}function Kt(){throw"cannot construct a VoidPtr, no constructor in IDL"}function Zt(){throw"cannot construct a Main, no constructor in IDL"}return Kt.prototype=Object.create(qt.prototype),Kt.prototype.constructor=Kt,Kt.prototype.__class__=Kt,Kt.__cache__={},o.VoidPtr=Kt,Kt.prototype.__destroy__=Kt.prototype.__destroy__=function(){var t=this.ptr;xt(t)},Zt.prototype=Object.create(qt.prototype),Zt.prototype.constructor=Zt,Zt.prototype.__class__=Zt,Zt.__cache__={},o.Main=Zt,Zt.prototype.layout=Zt.prototype.layout=function(t,e,r){var n=this.ptr;return Xt.prepare(),t=t&&"object"==typeof t?t.ptr:Gt(t),e=e&&"object"==typeof e?e.ptr:Gt(e),r=r&&"object"==typeof r?r.ptr:Gt(r),T(Mt(n,t,e,r))},Zt.prototype.lastError=Zt.prototype.lastError=function(){var t=this.ptr;return T(At(t))},Zt.prototype.createFile=Zt.prototype.createFile=function(t,e){var r=this.ptr;Xt.prepare(),t=t&&"object"==typeof t?t.ptr:Gt(t),e=e&&"object"==typeof e?e.ptr:Gt(e),Rt(r,t,e)},Zt.prototype.setYInvert=Zt.prototype.setYInvert=function(t){var e=this.ptr;t&&"object"==typeof t&&(t=t.ptr),Tt(e,t)},Zt.prototype.setNop=Zt.prototype.setNop=function(t){var e=this.ptr;t&&"object"==typeof t&&(t=t.ptr),Ot(e,t)},Zt.prototype.__destroy__=Zt.prototype.__destroy__=function(){var t=this.ptr;Ct(t)},t.ready});t.exports=n}),o=Object.freeze(Object.assign(Object.create(null),n,{default:n})),i=function(){return(i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n};function s(t){return{path:t.path,data:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\\n<svg width="'+t.width+'" height="'+t.height+'"></svg>'}}function u(t,e){var r,n=i({images:[],files:[]},e);a(n.files,(r=n.images,r.map(s))).forEach(function(e){return t.Main.prototype.createFile(e.path,e.data)})}var c={layout:function(t,e,n,i){return void 0===e&&(e="svg"),void 0===n&&(n="dot"),t?r(o,null==i?void 0:i.wasmFolder,null==i?void 0:i.wasmBinary).then(function(r){u(r,i),r.Main.prototype.setYInvert((null==i?void 0:i.yInvert)?1:0),r.Main.prototype.setNop((null==i?void 0:i.nop)?null==i?void 0:i.nop:0);var o=r.Main.prototype.layout(t,e,n);if(!o)throw new Error(r.Main.prototype.lastError());return o}):Promise.resolve("")},circo:function(t,e,r){return void 0===e&&(e="svg"),this.layout(t,e,"circo",r)},dot:function(t,e,r){return void 0===e&&(e="svg"),this.layout(t,e,"dot",r)},fdp:function(t,e,r){return void 0===e&&(e="svg"),this.layout(t,e,"fdp",r)},sfdp:function(t,e,r){return void 0===e&&(e="svg"),this.layout(t,e,"sfdp",r)},neato:function(t,e,r){return void 0===e&&(e="svg"),this.layout(t,e,"neato",r)},osage:function(t,e,r){return void 0===e&&(e="svg"),this.layout(t,e,"osage",r)},patchwork:function(t,e,r){return void 0===e&&(e="svg"),this.layout(t,e,"patchwork",r)},twopi:function(t,e,r){return void 0===e&&(e="svg"),this.layout(t,e,"twopi",r)}},f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function l(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var d,p;(function(t,e){t.exports=function(){function t(t){return"function"==typeof t}var e=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=0,n=void 0,o=void 0,i=function(t,e){p[r]=t,p[r+1]=e,2===(r+=2)&&(o?o(h):y())},a="undefined"!=typeof window?window:void 0,s=a||{},u=s.MutationObserver||s.WebKitMutationObserver,c="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var t=setTimeout;return function(){return t(h,1)}}var p=new Array(1e3);function h(){for(var t=0;t<r;t+=2){var e=p[t],n=p[t+1];e(n),p[t]=void 0,p[t+1]=void 0}r=0}var m,_,v,w,y=void 0;function g(t,e){var r=this,n=new this.constructor(k);void 0===n[b]&&N(n);var o=r._state;if(o){var a=arguments[o-1];i(function(){return C(o,n,a,r._result)})}else T(r,n,t,e);return n}function E(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(k);return x(e,t),e}c?y=function(){return process.nextTick(h)}:u?(_=0,v=new u(h),w=document.createTextNode(""),v.observe(w,{characterData:!0}),y=function(){w.data=_=++_%2}):l?((m=new MessageChannel).port1.onmessage=h,y=function(){return m.port2.postMessage(0)}):y=void 0===a?function(){try{var t=Function("return this")().require("vertx");return void 0!==(n=t.runOnLoop||t.runOnContext)?function(){n(h)}:d()}catch(t){return d()}}():d();var b=Math.random().toString(36).substring(2);function k(){}var D=void 0,S=1,F=2;function P(e,r,n){r.constructor===e.constructor&&n===g&&r.constructor.resolve===E?function(t,e){e._state===S?A(t,e._result):e._state===F?R(t,e._result):T(e,void 0,function(e){return x(t,e)},function(e){return R(t,e)})}(e,r):void 0===n?A(e,r):t(n)?function(t,e,r){i(function(t){var n=!1,o=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,function(r){n||(n=!0,e!==r?x(t,r):A(t,r))},function(e){n||(n=!0,R(t,e))},t._label);!n&&o&&(n=!0,R(t,o))},t)}(e,r,n):A(e,r)}function x(t,e){if(t===e)R(t,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(n=e),null===n||"object"!==o&&"function"!==o)A(t,e);else{var r=void 0;try{r=e.then}catch(e){return void R(t,e)}P(t,e,r)}var n,o}function M(t){t._onerror&&t._onerror(t._result),O(t)}function A(t,e){t._state===D&&(t._result=e,t._state=S,0!==t._subscribers.length&&i(O,t))}function R(t,e){t._state===D&&(t._state=F,t._result=e,i(M,t))}function T(t,e,r,n){var o=t._subscribers,a=o.length;t._onerror=null,o[a]=e,o[a+S]=r,o[a+F]=n,0===a&&t._state&&i(O,t)}function O(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,o=void 0,i=t._result,a=0;a<e.length;a+=3)n=e[a],o=e[a+r],n?C(r,n,o,i):o(i);t._subscribers.length=0}}function C(e,r,n,o){var i=t(n),a=void 0,s=void 0,u=!0;if(i){try{a=n(o)}catch(t){u=!1,s=t}if(r===a)return void R(r,new TypeError("A promises callback cannot return that same promise."))}else a=o;r._state!==D||(i&&u?x(r,a):!1===u?R(r,s):e===S?A(r,a):e===F&&R(r,a))}var j=0;function N(t){t[b]=j++,t._state=void 0,t._result=void 0,t._subscribers=[]}var B=function(){function t(t,r){this._instanceConstructor=t,this.promise=new t(k),this.promise[b]||N(this.promise),e(r)?(this.length=r.length,this._remaining=r.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(r),0===this._remaining&&A(this.promise,this._result))):R(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===D&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===E){var o=void 0,i=void 0,a=!1;try{o=t.then}catch(t){a=!0,i=t}if(o===g&&t._state!==D)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(r===z){var s=new r(k);a?R(s,i):P(s,t,o),this._willSettleAt(s,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===D&&(this._remaining--,t===F?R(n,r):this._result[e]=r),0===this._remaining&&A(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;T(t,void 0,function(t){return r._settledAt(S,e,t)},function(t){return r._settledAt(F,e,t)})},t}(),z=function(){function e(t){this[b]=j++,this._result=this._state=void 0,this._subscribers=[],k!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){x(t,e)},function(e){R(t,e)})}catch(e){R(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var r=this.constructor;return t(e)?this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return z.prototype.then=g,z.all=function(t){return new B(this,t).promise},z.race=function(t){var r=this;return e(t)?new r(function(e,n){for(var o=t.length,i=0;i<o;i++)r.resolve(t[i]).then(e,n)}):new r(function(t,e){return e(new TypeError("You must pass an array to race."))})},z.resolve=E,z.reject=function(t){var e=new this(k);return R(e,t),e},z._setScheduler=function(t){o=t},z._setAsap=function(t){i=t},z._asap=i,z.polyfill=function(){var t=void 0;if(void 0!==f)t=f;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=z},z.Promise=z,z}()}(p={path:d,exports:{},require:function(t,e){return l(null==e&&p.path)}},p.exports),p.exports).polyfill();function h(t){return void 0!==t.children}var m=function(t){var e=[];return t.children.forEach(function(t){h(t)?e.push(m(t)):e.push(_(t))}),"subgraph cluster_"+t.id+' {\\nid="'+t.id+'";\\nlabel="'+t.text+'";\\nmargin=16;\\n'+e.join("\\n")+"\\n}"},_=function(t){return t.id+' [id="'+t.id+'" label="'+t.text+'" width='+g(t.width)+" height="+g(t.height)+"]"},v=function(t,e,r,n){return t+" -> "+e+' [id="'+r+'", label="'+n+'"]'},w=function(t){return 96*t/72},y=function(t){return 96*t},g=function(t){return t/96};function E(t){var e=t?t.split(",").map(function(t){return w(+t)}):[0,0,0,0],r=e[0],n=e[1],o=e[2]-r,i=e[3]-n;return{x:r-o/2,y:n-i/2,width:o,height:i}}function b(t,e){var r=t.split(",").map(function(t){return w(+t)}),n=r[0],o=r[1];return{x:-n+e.width,y:-o+e.height}}function k(t,e){if(t.pos){var r=t.pos.substr(2).split(" ").map(function(t){return b(t,e)}).map(function(t){return[t.x-e.width/2,t.y-e.height/2]}),n=r.shift();return function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}(r,[n])}return[]}function D(t,e){self.document=self.document||{currentScript:{src:e.wasmFolder+"/dummy.js"}};var r,n,o={},i=[],a=[],s={},u=[],f=[],l={},d=[],p=[];return t.items.forEach(function(t){return function t(e,r){h(e)?(o[e.id]=e,i.push(e),e.children.forEach(function(e){return t(e,!1)}),r&&a.push(m(e))):(s[e.id]=e,u.push(e),r&&f.push(_(e)))}(t,!0)}),t.links.forEach(function(t){l[t.id]=t,d.push(t),p.push(v(t.source.id,t.target.id,t.id,t.text))}),(r=e.engine,n="digraph G {\\n    graph [fontname=Verdana,fontsize=11.0];\\n    graph [rankdir=TB];\\n    node [shape=rect,fontname=Verdana,fontsize=11.0,fixedsize=true];\\n    edge [fontname=Verdana,fontsize=11.0];\\n\\n"+a.join("\\n")+"\\n\\n"+p.join("\\n")+"\\n\\n"+f.join("\\n")+"\\n}",c[r](n,"json").then(function(t){return JSON.parse(t)})).then(function(t){var e=E(t.bb);return t.objects&&t.objects.forEach(function(t){if(t.nodes){var r=function(t,e){var r=E(t);return{x:-r.x+e.width,y:-r.y+e.height,width:r.width,height:r.height}}(t.bb,e),n=o[t.id];n.x=r.x-e.width/2,n.y=r.y-e.height/2,n.width=r.width,n.height=r.height}else{var i=(u=t.pos,c=t.width,f=t.height,l=b(u,e),d=y(+c),p=y(+f),{x:l.x,y:l.y,width:d,height:p}),a=s[t.id];a&&(a.x=i.x-e.width/2,a.y=i.y-e.height/2)}var u,c,f,l,d,p}),t.edges&&t.edges.forEach(function(t){var r=l[t.id];r&&(r.points=k(t,e))}),{clusters:i,nodes:u,links:d}})}self.onmessage=function(t){D.apply(void 0,t.data).then(function(t){self.postMessage(t)})}}();`;

        const workerBlob = new Blob([workerCode], { type: "application/javascript" });
        const workerUrl = URL.createObjectURL(workerBlob);
        const worker = new Worker(workerUrl);

        worker.onmessage = event => {
            resolve(event.data);
            worker.terminate();
            URL.revokeObjectURL(workerUrl);
        };
        worker.postMessage([data, options]);
    });
}
