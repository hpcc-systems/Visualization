"use strict";
(function(root, factory) {
    if (typeof define === "function" && define.amd) {
        define(["d3", "./CommonXY", "amcharts.xy", "../api/INDChart", "css!./Bar"], factory);
    } else {
        root.amchart_Scatter = factory(root.d3, root.amchart_CommonXY, root.amcharts, root.api_INDChart);
    }
}(this, function(d3, CommonXY, AmCharts, INDChart) {
    function Scatter() {
        CommonXY.call(this);
        this._tag = "div";

        this._type = "Scatter";
        this._gType = "xy";
    }
    Scatter.prototype = Object.create(CommonXY.prototype);
    Scatter.prototype.constructor = Scatter;
    Scatter.prototype._class += " amchart_Scatter";
    Scatter.prototype.implements(INDChart.prototype);

    Scatter.prototype.publish("paletteID", "default", "set", "Palette ID", Scatter.prototype._palette.switch(), {tags:["Basic","Shared"]});

    Scatter.prototype.publish("chartMode", "scatter", "set", "Bullet Type", ["scatter", "bubble"],{tags:["Basic"]});
    Scatter.prototype.publish("sampleData", "ordinal", "set", "Display Sample Data", ["ordinal","linear"]);

    Scatter.prototype.publish("tooltipTemplate","[[category]]<br/>x:[[x]] y:[[y]]", "string", "Tooltip Text");

    var findUniqueCategories = function (data){
        var retArr = [];
        for(var i in data){
            if(retArr.indexOf(data[i][0]) === -1){
                retArr.push(data[i][0]);
            }
        }
        return retArr;
    }

    Scatter.prototype.enter = function(domNode, element) {
        CommonXY.prototype.enter.apply(this, arguments);
    };

    Scatter.prototype.updateChartOptions = function() {
        CommonXY.prototype.updateChartOptions.apply(this, arguments);

        this.buildGraphs(this._gType);

        return this._chart;
    };

    Scatter.prototype.buildGraphs = function(gType) {
        if (typeof(this._chart.graphs) === "undefined") { this._chart.graphs = []; }
        var currentGraphCount = this._chart.graphs.length;
        this._categories = findUniqueCategories(this.data());
        var buildGraphCount = Math.max(currentGraphCount, this._categories.length);

        for(var i = 0; i < buildGraphCount; i++) {
            var gObj = {};

            gObj.balloonText = this.tooltipTemplate();
            gObj.lineAlpha = this.lineOpacity();
            gObj.lineThickness = this.lineWidth();
            gObj.bullet = this.bulletType();
            gObj.bulletSize = this.bulletSize();
            gObj.dashLength = this.dashedLineStyle();
            gObj.lineAlpha = this.lineOpacity();
            gObj.lineColor = this.lineColor();
            gObj.lineThickness = this.lineWidth();

            gObj.type = gType;

//            gObj.colorField = "color";
//            gObj.lineColorField = "linecolor";
            gObj.color = this._palette(i);

            // XY Values
            gObj.categoryField = this._columns[0];
            gObj.xField = this._columns[1]+i;
            gObj.yField = this._columns[2]+i;

            if (typeof(this._chart.graphs[i]) !== "undefined") {
                for (var key in gObj) { this._chart.graphs[i][key] = gObj[key]; }
            } else {
                this._chart.addGraph(gObj);
            }
        }
    };

    Scatter.prototype.update = function(domNode, element) {
        CommonXY.prototype.update.apply(this, arguments);

        this.updateChartOptions();

        this._chart.validateData();
        this._chart.validateNow();
    };

    Scatter.prototype.testData = function(_) {
        var dataArr = [
            {"category":"Forest area (% of land area)","data":{"Afghanistan":{"2010":"2.1","2011":"2.1","2012":"2.1"},"Albania":{"2010":"28.3","2011":"28.3","2012":"28.2"},"Algeria":{"2010":"0.6","2011":"0.6","2012":"0.6"},"American Samoa":{"2010":"88.6","2011":"88.4","2012":"88.2"},"Andorra":{"2010":"34.0","2011":"34.0","2012":"34.0"},"Angola":{"2010":"46.9","2011":"46.8","2012":"46.7"},"Antigua and Barbuda":{"2010":"22.3","2011":"22.3","2012":"22.3"},"Argentina":{"2010":"10.7","2011":"10.7","2012":"10.6"},"Armenia":{"2010":"9.2","2011":"9.1","2012":"8.9"},"Aruba":{"2010":"2.3","2011":"2.3","2012":"2.3"},"Australia":{"2010":"19.4","2011":"19.3","2012":"19.2"},"Austria":{"2010":"47.2","2011":"47.2","2012":"47.3"},"Azerbaijan":{"2010":"11.3","2011":"11.3","2012":"11.3"},"Bahamas, The":{"2010":"51.4","2011":"51.4","2012":"51.4"},"Bahrain":{"2010":"0.7","2011":"0.7","2012":"0.7"},"Bangladesh":{"2010":"11.1","2011":"11.1","2012":"11.0"},"Barbados":{"2010":"19.4","2011":"19.4","2012":"19.4"},"Belarus":{"2010":"42.5","2011":"42.7","2012":"42.9"},"Belgium":{"2010":"22.4","2011":"22.4","2012":"22.5"},"Belize":{"2010":"61.1","2011":"60.6","2012":"60.2"},"Benin":{"2010":"40.4","2011":"40.0","2012":"39.6"},"Bermuda":{"2010":"20.0","2011":"20.0","2012":"20.0"},"Bhutan":{"2010":"85.2","2011":"85.5","2012":"85.8"},"Bolivia":{"2010":"52.8","2011":"52.5","2012":"52.2"},"Bosnia and Herzegovina":{"2010":"42.8","2011":"42.8","2012":"42.8"},"Botswana":{"2010":"20.0","2011":"19.8","2012":"19.6"},"Brazil":{"2010":"62.2","2011":"61.9","2012":"61.6"},"Brunei Darussalam":{"2010":"72.1","2011":"71.8","2012":"71.4"},"Bulgaria":{"2010":"36.2","2011":"36.7","2012":"37.2"},"Burkina Faso":{"2010":"20.6","2011":"20.4","2012":"20.2"},"Burundi":{"2010":"6.7","2011":"6.6","2012":"6.6"},"Cabo Verde":{"2010":"21.0","2011":"21.0","2012":"21.3"},"Cambodia":{"2010":"57.2","2011":"56.5","2012":"55.7"},"Cameroon":{"2010":"42.1","2011":"41.7","2012":"41.2"},"Canada":{"2010":"34.1","2011":"34.1","2012":"34.1"},"Cayman Islands":{"2010":"52.9","2011":"52.9","2012":"52.9"},"Central African Republic":{"2010":"36.3","2011":"36.2","2012":"36.2"},"Chad":{"2010":"9.2","2011":"9.1","2012":"9.0"},"Chile":{"2010":"21.8","2011":"21.9","2012":"21.9"},"China":{"2010":"22.0","2011":"22.3","2012":"22.6"},"Colombia":{"2010":"54.5","2011":"54.4","2012":"54.3"},"Comoros":{"2010":"1.6","2011":"1.4","2012":"1.2"},"Congo, Dem. Rep.":{"2010":"68.0","2011":"67.9","2012":"67.7"},"Congo, Rep.":{"2010":"65.6","2011":"65.6","2012":"65.6"},"Costa Rica":{"2010":"51.0","2011":"51.5","2012":"51.9"},"Cote d'Ivoire":{"2010":"32.7","2011":"32.7","2012":"32.7"},"Croatia":{"2010":"34.3","2011":"34.4","2012":"34.4"},"Cuba":{"2010":"27.0","2011":"27.3","2012":"27.6"},"Curacao":{"2010":"","2011":"","2012":""},"Cyprus":{"2010":"18.7","2011":"18.8","2012":"18.8"},"Czech Republic":{"2010":"34.4","2011":"34.4","2012":"34.5"},"Denmark":{"2010":"12.8","2011":"12.9","2012":"12.9"},"Djibouti":{"2010":"0.2","2011":"0.2","2012":"0.2"},"Dominica":{"2010":"59.5","2011":"59.2","2012":"58.8"},"Dominican Republic":{"2010":"40.8","2011":"40.8","2012":"40.8"},"Ecuador":{"2010":"39.7","2011":"38.9","2012":"38.1"},"Egypt, Arab Rep.":{"2010":"0.1","2011":"0.1","2012":"0.1"},"El Salvador":{"2010":"13.9","2011":"13.6","2012":"13.4"},"Equatorial Guinea":{"2010":"58.0","2011":"57.5","2012":"57.1"},"Eritrea":{"2010":"15.2","2011":"15.1","2012":"15.1"},"Estonia":{"2010":"52.3","2011":"52.1","2012":"51.8"},"Ethiopia":{"2010":"12.3","2011":"12.2","2012":"12.0"},"Faeroe Islands":{"2010":"0.1","2011":"0.1","2012":"0.1"},"Fiji":{"2010":"55.5","2011":"55.7","2012":"55.9"},"Finland":{"2010":"72.9","2011":"72.9","2012":"72.9"},"France":{"2010":"29.1","2011":"29.2","2012":"29.3"},"French Polynesia":{"2010":"42.3","2011":"43.7","2012":"45.1"},"Gabon":{"2010":"85.4","2011":"85.4","2012":"85.4"},"Gambia, The":{"2010":"47.4","2011":"47.6","2012":"47.8"},"Georgia":{"2010":"39.5","2011":"39.4","2012":"39.4"},"Germany":{"2010":"31.8","2011":"31.8","2012":"31.8"},"Ghana":{"2010":"21.7","2011":"21.2","2012":"20.7"},"Greece":{"2010":"30.3","2011":"30.5","2012":"30.7"},"Greenland":{"2010":"0.0","2011":"0.0","2012":"0.0"},"Grenada":{"2010":"50.0","2011":"50.0","2012":"50.0"},"Guam":{"2010":"47.9","2011":"47.9","2012":"47.9"},"Guatemala":{"2010":"34.1","2011":"33.6","2012":"33.1"},"Guinea":{"2010":"26.6","2011":"26.5","2012":"26.3"},"Guinea-Bissau":{"2010":"71.9","2011":"71.6","2012":"71.2"},"Guyana":{"2010":"77.2","2011":"77.2","2012":"77.2"},"Haiti":{"2010":"3.7","2011":"3.6","2012":"3.6"},"Honduras":{"2010":"46.4","2011":"45.3","2012":"44.3"},"Hong Kong SAR, China":{"2010":"","2011":"","2012":""},"Hungary":{"2010":"22.4","2011":"22.5","2012":"22.6"},"Iceland":{"2010":"0.3","2011":"0.3","2012":"0.3"},"India":{"2010":"23.0","2011":"23.1","2012":"23.1"},"Indonesia":{"2010":"52.1","2011":"51.7","2012":"51.4"},"Iran, Islamic Rep.":{"2010":"6.8","2011":"6.8","2012":"6.8"},"Iraq":{"2010":"1.9","2011":"1.9","2012":"1.9"},"Ireland":{"2010":"10.7","2011":"10.9","2012":"11.0"},"Isle of Man":{"2010":"6.1","2011":"6.1","2012":"6.1"},"Israel":{"2010":"7.1","2011":"7.1","2012":"7.1"},"Italy":{"2010":"31.1","2011":"31.4","2012":"31.6"},"Jamaica":{"2010":"31.1","2011":"31.1","2012":"31.0"},"Japan":{"2010":"68.5","2011":"68.5","2012":"68.6"},"Jordan":{"2010":"1.1","2011":"1.1","2012":"1.1"},"Kazakhstan":{"2010":"1.2","2011":"1.2","2012":"1.2"},"Kenya":{"2010":"6.1","2011":"6.1","2012":"6.1"},"Kiribati":{"2010":"15.0","2011":"15.0","2012":"15.0"},"Korea, Dem. Rep.":{"2010":"47.1","2011":"46.0","2012":"45.0"},"Korea, Rep.":{"2010":"64.0","2011":"63.9","2012":"63.8"},"Kuwait":{"2010":"0.4","2011":"0.4","2012":"0.4"},"Kyrgyz Republic":{"2010":"5.0","2011":"5.1","2012":"5.1"},"Lao PDR":{"2010":"68.2","2011":"67.9","2012":"67.6"},"Latvia":{"2010":"53.9","2011":"54.1","2012":"54.3"},"Lebanon":{"2010":"13.4","2011":"13.4","2012":"13.4"},"Lesotho":{"2010":"1.4","2011":"1.5","2012":"1.5"},"Liberia":{"2010":"44.9","2011":"44.6","2012":"44.3"},"Libya":{"2010":"0.1","2011":"0.1","2012":"0.1"},"Liechtenstein":{"2010":"43.1","2011":"43.1","2012":"43.1"},"Lithuania":{"2010":"34.5","2011":"34.6","2012":"34.7"},"Luxembourg":{"2010":"33.5","2011":"33.5","2012":"33.5"},"Macao SAR, China":{"2010":"","2011":"","2012":""},"Macedonia, FYR":{"2010":"39.6","2011":"39.8","2012":"39.9"},"Madagascar":{"2010":"21.6","2011":"21.5","2012":"21.4"},"Malawi":{"2010":"34.3","2011":"34.0","2012":"33.6"},"Malaysia":{"2010":"62.3","2011":"62.0","2012":"61.7"},"Maldives":{"2010":"3.0","2011":"3.0","2012":"3.0"},"Mali":{"2010":"10.2","2011":"10.2","2012":"10.1"},"Malta":{"2010":"0.9","2011":"0.9","2012":"0.9"},"Marshall Islands":{"2010":"70.2","2011":"70.2","2012":"70.2"},"Mauritania":{"2010":"0.2","2011":"0.2","2012":"0.2"},"Mauritius":{"2010":"17.2","2011":"17.3","2012":"17.3"},"Mexico":{"2010":"33.3","2011":"33.3","2012":"33.2"},"Micronesia, Fed. Sts.":{"2010":"91.6","2011":"91.7","2012":"91.7"},"Moldova":{"2010":"11.8","2011":"11.9","2012":"12.0"},"Monaco":{"2010":"0.0","2011":"","2012":""},"Mongolia":{"2010":"7.0","2011":"7.0","2012":"6.9"},"Montenegro":{"2010":"40.4","2011":"40.4","2012":"40.4"},"Morocco":{"2010":"11.5","2011":"11.5","2012":"11.5"},"Mozambique":{"2010":"49.6","2011":"49.4","2012":"49.1"},"Myanmar":{"2010":"48.6","2011":"48.2","2012":"47.7"},"Namibia":{"2010":"8.9","2011":"8.8","2012":"8.7"},"Nepal":{"2010":"25.4","2011":"25.4","2012":"25.4"},"Netherlands":{"2010":"10.8","2011":"10.8","2012":"10.8"},"New Caledonia":{"2010":"45.9","2011":"45.9","2012":"45.9"},"New Zealand":{"2010":"31.4","2011":"31.4","2012":"31.3"},"Nicaragua":{"2010":"25.9","2011":"25.3","2012":"24.7"},"Niger":{"2010":"1.0","2011":"0.9","2012":"0.9"},"Nigeria":{"2010":"9.9","2011":"9.5","2012":"9.0"},"Northern Mariana Islands":{"2010":"65.9","2011":"65.5","2012":"65.2"},"Norway":{"2010":"27.6","2011":"27.8","2012":"28.0"},"Oman":{"2010":"0.0","2011":"0.0","2012":"0.0"},"Pakistan":{"2010":"2.2","2011":"2.1","2012":"2.1"},"Palau":{"2010":"87.6","2011":"87.6","2012":"87.6"},"Panama":{"2010":"43.7","2011":"43.6","2012":"43.4"},"Papua New Guinea":{"2010":"63.4","2011":"63.1","2012":"62.8"},"Paraguay":{"2010":"44.3","2011":"43.8","2012":"43.4"},"Peru":{"2010":"53.1","2011":"53.0","2012":"52.9"},"Philippines":{"2010":"25.7","2011":"25.9","2012":"26.1"},"Poland":{"2010":"30.5","2011":"30.6","2012":"30.7"},"Portugal":{"2010":"37.7","2011":"37.8","2012":"37.8"},"Puerto Rico":{"2010":"62.2","2011":"63.2","2012":"64.2"},"Qatar":{"2010":"0.0","2011":"0.0","2012":"0.0"},"Romania":{"2010":"28.6","2011":"28.7","2012":"28.9"},"Russian Federation":{"2010":"49.4","2011":"49.4","2012":"49.4"},"Rwanda":{"2010":"17.6","2011":"18.0","2012":"18.4"},"Samoa":{"2010":"60.4","2011":"60.4","2012":"60.4"},"San Marino":{"2010":"0.0","2011":"0.0","2012":"0.0"},"Sao Tome and Principe":{"2010":"28.1","2011":"28.1","2012":"28.1"},"Saudi Arabia":{"2010":"0.5","2011":"0.5","2012":"0.5"},"Senegal":{"2010":"44.0","2011":"43.8","2012":"43.6"},"Serbia":{"2010":"31.0","2011":"31.6","2012":"32.1"},"Seychelles":{"2010":"88.5","2011":"88.5","2012":"88.5"},"Sierra Leone":{"2010":"37.8","2011":"37.5","2012":"37.2"},"Singapore":{"2010":"3.3","2011":"3.3","2012":"3.3"},"Sint Maarten (Dutch part)":{"2010":"","2011":"","2012":""},"Slovak Republic":{"2010":"40.2","2011":"40.2","2012":"40.2"},"Slovenia":{"2010":"62.2","2011":"62.3","2012":"62.4"},"Solomon Islands":{"2010":"79.1","2011":"78.9","2012":"78.7"},"Somalia":{"2010":"10.8","2011":"10.6","2012":"10.5"},"South Africa":{"2010":"7.6","2011":"7.6","2012":"7.6"},"South Sudan":{"2010":"","2011":"","2012":""},"Spain":{"2010":"36.4","2011":"36.8","2012":"37.1"},"Sri Lanka":{"2010":"29.7","2011":"29.4","2012":"29.2"},"St. Kitts and Nevis":{"2010":"42.3","2011":"42.3","2012":"42.3"},"St. Lucia":{"2010":"77.0","2011":"77.0","2012":"77.0"},"St. Martin (French part)":{"2010":"","2011":"","2012":""},"St. Vincent and the Grenadines":{"2010":"68.5","2011":"68.7","2012":"68.9"},"Sudan":{"2010":"29.4","2011":"23.2","2012":""},"Suriname":{"2010":"94.6","2011":"94.6","2012":"94.6"},"Swaziland":{"2010":"32.7","2011":"33.0","2012":"33.2"},"Sweden":{"2010":"68.7","2011":"68.7","2012":"69.2"},"Switzerland":{"2010":"31.4","2011":"31.5","2012":"31.6"},"Syrian Arab Republic":{"2010":"2.7","2011":"2.7","2012":"2.7"},"Taiwan, China":{"2010":"","2011":"","2012":""},"Tajikistan":{"2010":"2.9","2011":"2.9","2012":"2.9"},"Tanzania":{"2010":"37.7","2011":"37.3","2012":"36.8"},"Thailand":{"2010":"37.1","2011":"37.2","2012":"37.2"},"Timor-Leste":{"2010":"49.9","2011":"49.1","2012":"48.4"},"Togo":{"2010":"5.3","2011":"4.9","2012":"4.9"},"Tonga":{"2010":"12.5","2011":"12.5","2012":"12.5"},"Trinidad and Tobago":{"2010":"44.1","2011":"44.0","2012":"43.9"},"Tunisia":{"2010":"6.5","2011":"6.6","2012":"6.7"},"Turkey":{"2010":"14.7","2011":"14.9","2012":"15.0"},"Turkmenistan":{"2010":"8.8","2011":"8.8","2012":"8.8"},"Turks and Caicos Islands":{"2010":"36.2","2011":"36.2","2012":"36.2"},"Tuvalu":{"2010":"33.3","2011":"33.3","2012":"33.3"},"Uganda":{"2010":"15.0","2011":"14.5","2012":"14.1"},"Ukraine":{"2010":"16.8","2011":"16.8","2012":"16.8"},"United Arab Emirates":{"2010":"3.8","2011":"3.8","2012":"3.8"},"United Kingdom":{"2010":"11.9","2011":"11.9","2012":"12.0"},"United States":{"2010":"33.2","2011":"33.3","2012":"33.3"},"Uruguay":{"2010":"10.0","2011":"10.2","2012":"10.5"},"Uzbekistan":{"2010":"7.7","2011":"7.7","2012":"7.7"},"Vanuatu":{"2010":"36.1","2011":"36.1","2012":"36.1"},"Venezuela, RB":{"2010":"52.5","2011":"52.1","2012":"51.8"},"Vietnam":{"2010":"44.5","2011":"45.0","2012":"45.4"},"Virgin Islands (U.S.)":{"2010":"57.7","2011":"57.4","2012":"56.9"},"West Bank and Gaza":{"2010":"1.5","2011":"1.5","2012":"1.5"},"Yemen, Rep.":{"2010":"1.0","2011":"1.0","2012":"1.0"},"Zambia":{"2010":"66.5","2011":"66.3","2012":"66.1"},"Zimbabwe":{"2010":"40.4","2011":"39.5","2012":"38.7"}}},
            {"category":"Agricultural land (% of land area)","data":{"Afghanistan":{"2010":"58.1","2011":"58.1","2012":"58.1"},"Albania":{"2010":"43.8","2011":"43.8","2012":"43.8"},"Algeria":{"2010":"17.4","2011":"17.4","2012":"17.4"},"American Samoa":{"2010":"24.5","2011":"24.5","2012":"24.5"},"Andorra":{"2010":"42.8","2011":"43.4","2012":"43.0"},"Angola":{"2010":"46.8","2011":"47.3","2012":"47.5"},"Antigua and Barbuda":{"2010":"20.5","2011":"20.5","2012":"20.5"},"Argentina":{"2010":"53.6","2011":"53.9","2012":"54.4"},"Armenia":{"2010":"60.9","2011":"59.6","2012":"59.1"},"Aruba":{"2010":"11.1","2011":"11.1","2012":"11.1"},"Australia":{"2010":"51.9","2011":"53.3","2012":"52.8"},"Austria":{"2010":"38.4","2011":"38.5","2012":"38.3"},"Azerbaijan":{"2010":"57.7","2011":"57.7","2012":"57.7"},"Bahamas, The":{"2010":"1.5","2011":"1.4","2012":"1.4"},"Bahrain":{"2010":"11.3","2011":"11.3","2012":"11.3"},"Bangladesh":{"2010":"71.0","2011":"70.1","2012":"70.1"},"Barbados":{"2010":"34.9","2011":"32.6","2012":"32.6"},"Belarus":{"2010":"43.9","2011":"43.7","2012":"43.3"},"Belgium":{"2010":"44.8","2011":"44.1","2012":"44.0"},"Belize":{"2010":"6.9","2011":"6.9","2012":"7.0"},"Benin":{"2010":"30.5","2011":"31.3","2012":"32.8"},"Bermuda":{"2010":"14.8","2011":"14.8","2012":"14.8"},"Bhutan":{"2010":"13.6","2011":"13.6","2012":"13.6"},"Bolivia":{"2010":"34.3","2011":"34.3","2012":"34.6"},"Bosnia and Herzegovina":{"2010":"42.0","2011":"42.2","2012":"42.3"},"Botswana":{"2010":"45.6","2011":"45.7","2012":"45.7"},"Brazil":{"2010":"32.7","2011":"32.9","2012":"33.0"},"Brunei Darussalam":{"2010":"2.5","2011":"2.5","2012":"2.5"},"Bulgaria":{"2010":"46.5","2011":"46.9","2012":"47.2"},"Burkina Faso":{"2010":"44.1","2011":"43.0","2012":"44.1"},"Burundi":{"2010":"71.4","2011":"73.3","2012":"75.3"},"Cabo Verde":{"2010":"18.6","2011":"18.6","2012":"18.6"},"Cambodia":{"2010":"32.0","2011":"32.0","2012":"32.6"},"Cameroon":{"2010":"20.5","2011":"20.6","2012":"20.6"},"Canada":{"2010":"7.0","2011":"6.9","2012":"7.2"},"Cayman Islands":{"2010":"11.3","2011":"11.3","2012":"11.3"},"Central African Republic":{"2010":"8.2","2011":"8.2","2012":"8.2"},"Chad":{"2010":"39.3","2011":"39.7","2012":"39.7"},"Chile":{"2010":"21.2","2011":"21.2","2012":"21.3"},"China":{"2010":"54.8","2011":"54.8","2012":"54.8"},"Colombia":{"2010":"38.3","2011":"37.6","2012":"38.4"},"Comoros":{"2010":"82.8","2011":"84.4","2012":"84.9"},"Congo, Dem. Rep.":{"2010":"11.4","2011":"11.5","2012":"11.5"},"Congo, Rep.":{"2010":"31.0","2011":"31.0","2012":"31.0"},"Costa Rica":{"2010":"36.5","2011":"37.0","2012":"36.9"},"Cote d'Ivoire":{"2010":"64.8","2011":"64.8","2012":"64.8"},"Croatia":{"2010":"23.8","2011":"23.7","2012":"23.7"},"Cuba":{"2010":"62.5","2011":"60.2","2012":"60.2"},"Curacao":{"2010":"","2011":"","2012":""},"Cyprus":{"2010":"12.3","2011":"13.4","2012":"13.5"},"Czech Republic":{"2010":"54.8","2011":"54.8","2012":"54.7"},"Denmark":{"2010":"61.9","2011":"63.4","2012":"61.8"},"Djibouti":{"2010":"73.4","2011":"73.4","2012":"73.4"},"Dominica":{"2010":"34.7","2011":"34.7","2012":"34.7"},"Dominican Republic":{"2010":"50.8","2011":"51.5","2012":"51.7"},"Ecuador":{"2010":"30.2","2011":"29.6","2012":"30.2"},"Egypt, Arab Rep.":{"2010":"3.7","2011":"3.6","2012":"3.6"},"El Salvador":{"2010":"74.3","2011":"74.7","2012":"75.6"},"Equatorial Guinea":{"2010":"10.5","2011":"10.1","2012":"10.1"},"Eritrea":{"2010":"75.2","2011":"75.2","2012":"75.2"},"Estonia":{"2010":"22.4","2011":"22.3","2012":"22.6"},"Ethiopia":{"2010":"35.7","2011":"36.3","2012":"36.5"},"Faeroe Islands":{"2010":"2.1","2011":"2.1","2012":"2.1"},"Fiji":{"2010":"23.3","2011":"23.3","2012":"23.3"},"Finland":{"2010":"7.5","2011":"7.5","2012":"7.5"},"France":{"2010":"52.8","2011":"52.7","2012":"52.7"},"French Polynesia":{"2010":"12.2","2011":"12.4","2012":"12.4"},"Gabon":{"2010":"20.0","2011":"20.0","2012":"20.0"},"Gambia, The":{"2010":"60.8","2011":"60.8","2012":"59.8"},"Georgia":{"2010":"35.7","2011":"35.5","2012":"35.5"},"Germany":{"2010":"47.9","2011":"48.0","2012":"47.8"},"Ghana":{"2010":"68.6","2011":"69.1","2012":"69.0"},"Greece":{"2010":"63.4","2011":"63.4","2012":"63.3"},"Greenland":{"2010":"0.6","2011":"0.6","2012":"0.6"},"Grenada":{"2010":"32.4","2011":"32.4","2012":"32.4"},"Guam":{"2010":"33.3","2011":"33.3","2012":"33.3"},"Guatemala":{"2010":"40.9","2011":"41.2","2012":"41.3"},"Guinea":{"2010":"58.2","2011":"58.2","2012":"58.6"},"Guinea-Bissau":{"2010":"58.0","2011":"58.0","2012":"58.0"},"Guyana":{"2010":"8.5","2011":"8.5","2012":"8.5"},"Haiti":{"2010":"67.9","2011":"66.4","2012":"64.2"},"Honduras":{"2010":"28.9","2011":"28.9","2012":"28.9"},"Hong Kong SAR, China":{"2010":"5.2","2011":"5.2","2012":"4.9"},"Hungary":{"2010":"59.0","2011":"59.0","2012":"59.0"},"Iceland":{"2010":"18.7","2011":"18.7","2012":"18.7"},"India":{"2010":"60.4","2011":"60.4","2012":"60.3"},"Indonesia":{"2010":"30.7","2011":"31.2","2012":"31.2"},"Iran, Islamic Rep.":{"2010":"29.9","2011":"30.0","2012":"30.2"},"Iraq":{"2010":"18.1","2011":"18.1","2012":"17.6"},"Ireland":{"2010":"66.3","2011":"66.1","2012":"65.8"},"Isle of Man":{"2010":"76.1","2011":"74.7","2012":"67.4"},"Israel":{"2010":"23.3","2011":"23.8","2012":"24.2"},"Italy":{"2010":"48.7","2011":"47.1","2012":"46.7"},"Jamaica":{"2010":"41.5","2011":"41.5","2012":"41.5"},"Japan":{"2010":"12.6","2011":"12.5","2012":"12.5"},"Jordan":{"2010":"11.3","2011":"11.3","2012":"11.7"},"Kazakhstan":{"2010":"77.3","2011":"77.5","2012":"77.0"},"Kenya":{"2010":"48.0","2011":"48.2","2012":"48.2"},"Kiribati":{"2010":"42.0","2011":"42.0","2012":"42.0"},"Korea, Dem. Rep.":{"2010":"22.3","2011":"21.8","2012":"21.8"},"Korea, Rep.":{"2010":"18.2","2011":"18.1","2012":"18.4"},"Kuwait":{"2010":"8.5","2011":"8.6","2012":"8.5"},"Kyrgyz Republic":{"2010":"55.3","2011":"55.3","2012":"55.2"},"Lao PDR":{"2010":"10.3","2011":"10.6","2012":"10.7"},"Latvia":{"2010":"29.0","2011":"29.2","2012":"29.6"},"Lebanon":{"2010":"62.6","2011":"63.3","2012":"71.7"},"Lesotho":{"2010":"76.6","2011":"76.2","2012":"75.3"},"Liberia":{"2010":"27.6","2011":"28.1","2012":"28.1"},"Libya":{"2010":"8.7","2011":"8.7","2012":"8.7"},"Liechtenstein":{"2010":"39.4","2011":"37.5","2012":"37.5"},"Lithuania":{"2010":"44.2","2011":"44.8","2012":"45.3"},"Luxembourg":{"2010":"50.6","2011":"50.7","2012":"50.7"},"Macao SAR, China":{"2010":"","2011":"","2012":""},"Macedonia, FYR":{"2010":"44.4","2011":"44.3","2012":"50.2"},"Madagascar":{"2010":"71.2","2011":"71.2","2012":"71.2"},"Malawi":{"2010":"60.3","2011":"59.2","2012":"60.8"},"Malaysia":{"2010":"22.8","2011":"23.2","2012":"23.6"},"Maldives":{"2010":"23.3","2011":"23.3","2012":"23.3"},"Mali":{"2010":"33.6","2011":"34.1","2012":"34.1"},"Malta":{"2010":"32.3","2011":"32.3","2012":"32.2"},"Marshall Islands":{"2010":"72.2","2011":"72.2","2012":"72.2"},"Mauritania":{"2010":"38.5","2011":"38.5","2012":"38.5"},"Mauritius":{"2010":"44.8","2011":"43.8","2012":"42.9"},"Mexico":{"2010":"54.9","2011":"54.9","2012":"54.9"},"Micronesia, Fed. Sts.":{"2010":"31.4","2011":"31.4","2012":"31.4"},"Moldova":{"2010":"75.0","2011":"74.9","2012":"74.9"},"Monaco":{"2010":"","2011":"","2012":""},"Mongolia":{"2010":"73.1","2011":"73.1","2012":"73.0"},"Montenegro":{"2010":"38.1","2011":"38.1","2012":"38.1"},"Morocco":{"2010":"67.2","2011":"67.5","2012":"68.1"},"Mozambique":{"2010":"63.5","2011":"63.5","2012":"63.5"},"Myanmar":{"2010":"19.2","2011":"19.2","2012":"19.3"},"Namibia":{"2010":"47.1","2011":"47.1","2012":"47.1"},"Nepal":{"2010":"28.8","2011":"28.8","2012":"28.7"},"Netherlands":{"2010":"55.6","2011":"55.1","2012":"54.6"},"New Caledonia":{"2010":"10.9","2011":"10.4","2012":"10.1"},"New Zealand":{"2010":"43.3","2011":"43.2","2012":"42.8"},"Nicaragua":{"2010":"41.8","2011":"42.1","2012":"42.1"},"Niger":{"2010":"34.7","2011":"35.1","2012":"35.4"},"Nigeria":{"2010":"76.9","2011":"78.0","2012":"79.1"},"Northern Mariana Islands":{"2010":"6.5","2011":"6.5","2012":"6.5"},"Norway":{"2010":"2.8","2011":"2.7","2012":"2.7"},"Oman":{"2010":"4.8","2011":"4.8","2012":"4.8"},"Pakistan":{"2010":"34.1","2011":"35.2","2012":"35.1"},"Palau":{"2010":"10.9","2011":"10.9","2012":"10.9"},"Panama":{"2010":"30.4","2011":"30.5","2012":"30.5"},"Papua New Guinea":{"2010":"2.6","2011":"2.6","2012":"2.6"},"Paraguay":{"2010":"53.4","2011":"53.8","2012":"54.1"},"Peru":{"2010":"18.8","2011":"18.8","2012":"19.0"},"Philippines":{"2010":"40.9","2011":"41.0","2012":"41.6"},"Poland":{"2010":"47.7","2011":"48.3","2012":"47.4"},"Portugal":{"2010":"40.1","2011":"39.7","2012":"39.7"},"Puerto Rico":{"2010":"21.8","2011":"22.0","2012":"22.2"},"Qatar":{"2010":"5.7","2011":"5.7","2012":"5.7"},"Romania":{"2010":"61.5","2011":"60.7","2012":"59.7"},"Russian Federation":{"2010":"13.1","2011":"13.1","2012":"13.1"},"Rwanda":{"2010":"74.2","2011":"74.6","2012":"75.3"},"Samoa":{"2010":"12.4","2011":"12.4","2012":"12.4"},"San Marino":{"2010":"16.7","2011":"16.7","2012":"16.7"},"Sao Tome and Principe":{"2010":"50.5","2011":"50.7","2012":"51.8"},"Saudi Arabia":{"2010":"80.7","2011":"80.7","2012":"80.7"},"Senegal":{"2010":"49.4","2011":"46.8","2012":"46.8"},"Serbia":{"2010":"57.7","2011":"57.9","2012":"57.8"},"Seychelles":{"2010":"6.5","2011":"6.5","2012":"6.5"},"Sierra Leone":{"2010":"54.5","2011":"56.2","2012":"56.8"},"Singapore":{"2010":"1.1","2011":"1.0","2012":"1.0"},"Sint Maarten (Dutch part)":{"2010":"","2011":"","2012":""},"Slovak Republic":{"2010":"40.4","2011":"40.1","2012":"40.1"},"Slovenia":{"2010":"24.0","2011":"22.8","2012":"23.8"},"Solomon Islands":{"2010":"3.8","2011":"3.8","2012":"3.8"},"Somalia":{"2010":"70.3","2011":"70.3","2012":"70.3"},"South Africa":{"2010":"79.9","2011":"79.4","2012":"79.4"},"South Sudan":{"2010":"","2011":"","2012":""},"Spain":{"2010":"55.2","2011":"54.2","2012":"54.0"},"Sri Lanka":{"2010":"41.8","2011":"43.5","2012":"42.9"},"St. Kitts and Nevis":{"2010":"21.9","2011":"23.1","2012":"23.1"},"St. Lucia":{"2010":"17.4","2011":"17.4","2012":"17.4"},"St. Martin (French part)":{"2010":"","2011":"","2012":""},"St. Vincent and the Grenadines":{"2010":"25.6","2011":"25.6","2012":"25.6"},"Sudan":{"2010":"57.3","2011":"45.7","2012":"47.4"},"Suriname":{"2010":"0.5","2011":"0.5","2012":"0.5"},"Swaziland":{"2010":"71.0","2011":"71.0","2012":"71.0"},"Sweden":{"2010":"7.5","2011":"7.5","2012":"7.5"},"Switzerland":{"2010":"38.8","2011":"38.8","2012":"38.7"},"Syrian Arab Republic":{"2010":"75.7","2011":"75.8","2012":"75.8"},"Taiwan, China":{"2010":"","2011":"","2012":""},"Tajikistan":{"2010":"34.6","2011":"34.7","2012":"34.8"},"Tanzania":{"2010":"42.3","2011":"43.7","2012":"45.9"},"Thailand":{"2010":"41.2","2011":"41.2","2012":"42.8"},"Timor-Leste":{"2010":"25.0","2011":"25.1","2012":"25.8"},"Togo":{"2010":"67.4","2011":"67.4","2012":"70.8"},"Tonga":{"2010":"43.1","2011":"43.1","2012":"43.1"},"Trinidad and Tobago":{"2010":"10.5","2011":"10.5","2012":"10.5"},"Tunisia":{"2010":"64.6","2011":"64.8","2012":"64.9"},"Turkey":{"2010":"50.7","2011":"49.7","2012":"49.9"},"Turkmenistan":{"2010":"72.4","2011":"72.0","2012":"72.0"},"Turks and Caicos Islands":{"2010":"1.1","2011":"1.1","2012":"1.1"},"Tuvalu":{"2010":"60.0","2011":"60.0","2012":"60.0"},"Uganda":{"2010":"70.4","2011":"71.1","2012":"71.4"},"Ukraine":{"2010":"71.2","2011":"71.3","2012":"71.3"},"United Arab Emirates":{"2010":"4.8","2011":"4.7","2012":"4.7"},"United Kingdom":{"2010":"71.2","2011":"70.9","2012":"71.0"},"United States":{"2010":"44.6","2011":"44.5","2012":"44.7"},"Uruguay":{"2010":"86.5","2011":"87.2","2012":"87.2"},"Uzbekistan":{"2010":"62.7","2011":"62.6","2012":"62.7"},"Vanuatu":{"2010":"15.3","2011":"15.3","2012":"15.3"},"Venezuela, RB":{"2010":"24.5","2011":"24.5","2012":"24.5"},"Vietnam":{"2010":"34.7","2011":"34.8","2012":"35.0"},"Virgin Islands (U.S.)":{"2010":"11.4","2011":"11.4","2012":"11.4"},"West Bank and Gaza":{"2010":"41.3","2011":"43.3","2012":"43.4"},"Yemen, Rep.":{"2010":"44.7","2011":"44.4","2012":"44.6"},"Zambia":{"2010":"31.5","2011":"31.8","2012":"32.1"},"Zimbabwe":{"2010":"41.9","2011":"42.4","2012":"41.9"}}},
            {"category":"CO2 emissions (kt)","data":{"Afghanistan":{"2010":"8,471","2011":"12,251"},"Albania":{"2010":"4,415","2011":"4,668"},"Algeria":{"2010":"119,277","2011":"121,755"},"American Samoa":{"2010":"","2011":""},"Andorra":{"2010":"517","2011":"491"},"Angola":{"2010":"29,743","2011":"29,710"},"Antigua and Barbuda":{"2010":"524","2011":"513"},"Argentina":{"2010":"179,001","2011":"190,035"},"Armenia":{"2010":"4,217","2011":"4,961"},"Aruba":{"2010":"2,457","2011":"2,439"},"Australia":{"2010":"368,170","2011":"369,040"},"Austria":{"2010":"67,975","2011":"65,203"},"Azerbaijan":{"2010":"30,678","2011":"33,458"},"Bahamas, The":{"2010":"2,464","2011":"1,907"},"Bahrain":{"2010":"23,252","2011":"23,439"},"Bangladesh":{"2010":"56,153","2011":"57,070"},"Barbados":{"2010":"1,518","2011":"1,566"},"Belarus":{"2010":"62,222","2011":"63,303"},"Belgium":{"2010":"109,093","2011":"97,766"},"Belize":{"2010":"554","2011":"550"},"Benin":{"2010":"5,152","2011":"4,987"},"Bermuda":{"2010":"477","2011":"392"},"Bhutan":{"2010":"488","2011":"561"},"Bolivia":{"2010":"15,350","2011":"16,120"},"Bosnia and Herzegovina":{"2010":"21,148","2011":"23,747"},"Botswana":{"2010":"5,233","2011":"4,855"},"Brazil":{"2010":"419,754","2011":"439,413"},"Brunei Darussalam":{"2010":"8,603","2011":"9,743"},"Bulgaria":{"2010":"44,129","2011":"49,339"},"Burkina Faso":{"2010":"1,683","2011":"1,933"},"Burundi":{"2010":"194","2011":"209"},"Cabo Verde":{"2010":"293","2011":"425"},"Cambodia":{"2010":"4,188","2011":"4,496"},"Cameroon":{"2010":"6,707","2011":"5,662"},"Canada":{"2010":"496,105","2011":"485,463"},"Cayman Islands":{"2010":"565","2011":"583"},"Central African Republic":{"2010":"264","2011":"286"},"Chad":{"2010":"517","2011":"539"},"Chile":{"2010":"72,258","2011":"79,409"},"China":{"2010":"8,256,969","2011":"9,019,518"},"Colombia":{"2010":"78,584","2011":"72,423"},"Comoros":{"2010":"132","2011":"158"},"Congo, Dem. Rep.":{"2010":"3,253","2011":"3,425"},"Congo, Rep.":{"2010":"1,925","2011":"2,248"},"Costa Rica":{"2010":"7,569","2011":"7,844"},"Cote d'Ivoire":{"2010":"5,886","2011":"6,447"},"Croatia":{"2010":"20,891","2011":"20,554"},"Cuba":{"2010":"38,360","2011":"35,922"},"Curacao":{"2010":"","2011":""},"Cyprus":{"2010":"7,708","2011":"7,521"},"Czech Republic":{"2010":"111,169","2011":"109,486"},"Denmark":{"2010":"46,571","2011":"40,377"},"Djibouti":{"2010":"517","2011":"473"},"Dominica":{"2010":"136","2011":"125"},"Dominican Republic":{"2010":"21,364","2011":"21,888"},"Ecuador":{"2010":"34,250","2011":"35,728"},"Egypt, Arab Rep.":{"2010":"204,677","2011":"220,790"},"El Salvador":{"2010":"6,307","2011":"6,685"},"Equatorial Guinea":{"2010":"4,679","2011":"6,689"},"Eritrea":{"2010":"513","2011":"521"},"Estonia":{"2010":"18,339","2011":"18,650"},"Ethiopia":{"2010":"6,619","2011":"7,543"},"Faeroe Islands":{"2010":"631","2011":"568"},"Fiji":{"2010":"1,294","2011":"1,236"},"Finland":{"2010":"61,844","2011":"54,767"},"France":{"2010":"357,437","2011":"338,805"},"French Polynesia":{"2010":"884","2011":"858"},"Gabon":{"2010":"2,244","2011":"2,237"},"Gambia, The":{"2010":"473","2011":"422"},"Georgia":{"2010":"6,531","2011":"7,932"},"Germany":{"2010":"750,697","2011":"729,458"},"Ghana":{"2010":"10,103","2011":"10,081"},"Greece":{"2010":"86,717","2011":"84,048"},"Greenland":{"2010":"664","2011":"708"},"Grenada":{"2010":"260","2011":"253"},"Guam":{"2010":"","2011":""},"Guatemala":{"2010":"11,368","2011":"11,258"},"Guinea":{"2010":"2,486","2011":"2,596"},"Guinea-Bissau":{"2010":"238","2011":"246"},"Guyana":{"2010":"1,720","2011":"1,782"},"Haiti":{"2010":"2,120","2011":"2,211"},"Honduras":{"2010":"8,108","2011":"8,412"},"Hong Kong SAR, China":{"2010":"36,289","2011":"40,275"},"Hungary":{"2010":"50,748","2011":"48,492"},"Iceland":{"2010":"1,962","2011":"1,881"},"India":{"2010":"1,950,950","2011":"2,074,345"},"Indonesia":{"2010":"436,982","2011":"563,985"},"Iran, Islamic Rep.":{"2010":"571,605","2011":"586,599"},"Iraq":{"2010":"111,447","2011":"133,655"},"Ireland":{"2010":"40,176","2011":"36,069"},"Isle of Man":{"2010":"","2011":""},"Israel":{"2010":"68,892","2011":"69,523"},"Italy":{"2010":"405,361","2011":"397,994"},"Jamaica":{"2010":"7,191","2011":"7,756"},"Japan":{"2010":"1,168,919","2011":"1,187,657"},"Jordan":{"2010":"21,181","2011":"22,259"},"Kazakhstan":{"2010":"247,214","2011":"261,761"},"Kenya":{"2010":"12,420","2011":"13,568"},"Kiribati":{"2010":"62","2011":"62"},"Korea, Dem. Rep.":{"2010":"72,493","2011":"73,578"},"Korea, Rep.":{"2010":"566,717","2011":"589,426"},"Kuwait":{"2010":"90,846","2011":"91,030"},"Kyrgyz Republic":{"2010":"6,153","2011":"6,615"},"Lao PDR":{"2010":"1,272","2011":"1,203"},"Latvia":{"2010":"8,313","2011":"7,800"},"Lebanon":{"2010":"20,091","2011":"20,488"},"Lesotho":{"2010":"2,259","2011":"2,200"},"Liberia":{"2010":"803","2011":"891"},"Libya":{"2010":"66,057","2011":"39,021"},"Liechtenstein":{"2010":"59","2011":"51"},"Lithuania":{"2010":"13,377","2011":"13,740"},"Luxembourg":{"2010":"10,968","2011":"10,832"},"Macao SAR, China":{"2010":"1,199","2011":"1,166"},"Macedonia, FYR":{"2010":"8,603","2011":"9,336"},"Madagascar":{"2010":"2,087","2011":"2,450"},"Malawi":{"2010":"1,214","2011":"1,206"},"Malaysia":{"2010":"224,589","2011":"225,693"},"Maldives":{"2010":"1,074","2011":"1,104"},"Mali":{"2010":"1,236","2011":"1,250"},"Malta":{"2010":"2,618","2011":"2,512"},"Marshall Islands":{"2010":"103","2011":"103"},"Mauritania":{"2010":"2,138","2011":"2,310"},"Mauritius":{"2010":"3,916","2011":"3,916"},"Mexico":{"2010":"445,064","2011":"466,549"},"Micronesia, Fed. Sts.":{"2010":"121","2011":"128"},"Moldova":{"2010":"4,936","2011":"4,980"},"Monaco":{"2010":"","2011":""},"Mongolia":{"2010":"11,511","2011":"19,079"},"Montenegro":{"2010":"2,582","2011":"2,571"},"Morocco":{"2010":"55,958","2011":"56,538"},"Mozambique":{"2010":"2,875","2011":"3,282"},"Myanmar":{"2010":"8,988","2011":"10,440"},"Namibia":{"2010":"3,179","2011":"2,776"},"Nepal":{"2010":"4,331","2011":"4,334"},"Netherlands":{"2010":"181,927","2011":"168,007"},"New Caledonia":{"2010":"3,920","2011":"3,854"},"New Zealand":{"2010":"31,749","2011":"31,232"},"Nicaragua":{"2010":"4,624","2011":"4,899"},"Niger":{"2010":"1,353","2011":"1,423"},"Nigeria":{"2010":"85,221","2011":"88,026"},"Northern Mariana Islands":{"2010":"","2011":""},"Norway":{"2010":"56,794","2011":"45,533"},"Oman":{"2010":"56,292","2011":"64,855"},"Pakistan":{"2010":"162,793","2011":"163,453"},"Palau":{"2010":"216","2011":"224"},"Panama":{"2010":"8,867","2011":"9,666"},"Papua New Guinea":{"2010":"4,664","2011":"5,229"},"Paraguay":{"2010":"5,075","2011":"5,299"},"Peru":{"2010":"57,858","2011":"53,069"},"Philippines":{"2010":"81,701","2011":"82,012"},"Poland":{"2010":"317,082","2011":"317,287"},"Portugal":{"2010":"49,589","2011":"49,725"},"Puerto Rico":{"2010":"","2011":""},"Qatar":{"2010":"75,280","2011":"83,875"},"Romania":{"2010":"79,336","2011":"84,832"},"Russian Federation":{"2010":"1,742,540","2011":"1,808,073"},"Rwanda":{"2010":"590","2011":"664"},"Samoa":{"2010":"205","2011":"235"},"San Marino":{"2010":"","2011":""},"Sao Tome and Principe":{"2010":"99","2011":"103"},"Saudi Arabia":{"2010":"533,094","2011":"520,278"},"Senegal":{"2010":"8,273","2011":"7,858"},"Serbia":{"2010":"45,878","2011":"49,185"},"Seychelles":{"2010":"689","2011":"598"},"Sierra Leone":{"2010":"726","2011":"898"},"Singapore":{"2010":"13,480","2011":"22,394"},"Sint Maarten (Dutch part)":{"2010":"","2011":""},"Slovak Republic":{"2010":"36,241","2011":"34,374"},"Slovenia":{"2010":"15,427","2011":"15,405"},"Solomon Islands":{"2010":"198","2011":"198"},"Somalia":{"2010":"612","2011":"576"},"South Africa":{"2010":"454,950","2011":"477,242"},"South Sudan":{"2010":"","2011":""},"Spain":{"2010":"270,881","2011":"270,676"},"Sri Lanka":{"2010":"13,388","2011":"15,233"},"St. Kitts and Nevis":{"2010":"260","2011":"268"},"St. Lucia":{"2010":"403","2011":"407"},"St. Martin (French part)":{"2010":"","2011":""},"St. Vincent and the Grenadines":{"2010":"235","2011":"238"},"Sudan":{"2010":"15,779","2011":"16,579"},"Suriname":{"2010":"2,395","2011":"1,911"},"Swaziland":{"2010":"1,038","2011":"1,049"},"Sweden":{"2010":"52,574","2011":"52,145"},"Switzerland":{"2010":"38,753","2011":"36,597"},"Syrian Arab Republic":{"2010":"61,576","2011":"57,671"},"Taiwan, China":{"2010":"","2011":""},"Tajikistan":{"2010":"2,835","2011":"2,783"},"Tanzania":{"2010":"6,850","2011":"7,301"},"Thailand":{"2010":"298,142","2011":"303,371"},"Timor-Leste":{"2010":"183","2011":"183"},"Togo":{"2010":"1,720","2011":"2,098"},"Tonga":{"2010":"117","2011":"103"},"Trinidad and Tobago":{"2010":"50,916","2011":"49,574"},"Tunisia":{"2010":"26,743","2011":"25,643"},"Turkey":{"2010":"298,002","2011":"320,840"},"Turkmenistan":{"2010":"57,268","2011":"62,218"},"Turks and Caicos Islands":{"2010":"191","2011":"191"},"Tuvalu":{"2010":"","2011":""},"Uganda":{"2010":"3,590","2011":"3,799"},"Ukraine":{"2010":"304,497","2011":"286,228"},"United Arab Emirates":{"2010":"167,597","2011":"178,484"},"United Kingdom":{"2010":"492,192","2011":"448,236"},"United States":{"2010":"5,408,869","2011":"5,305,570"},"Uruguay":{"2010":"6,454","2011":"7,774"},"Uzbekistan":{"2010":"105,489","2011":"114,861"},"Vanuatu":{"2010":"117","2011":"143"},"Venezuela, RB":{"2010":"197,512","2011":"188,817"},"Vietnam":{"2010":"153,149","2011":"173,211"},"Virgin Islands (U.S.)":{"2010":"","2011":""},"West Bank and Gaza":{"2010":"2,035","2011":"2,248"},"Yemen, Rep.":{"2010":"25,717","2011":"22,295"},"Zambia":{"2010":"2,673","2011":"3,047"},"Zimbabwe":{"2010":"9,028","2011":"9,861"}}},
        ];
        var dataSetX = dataArr[0];
        var dataSetY = dataArr[1];
        
        this.tooltipTemplate("<b>[[category]]</b><br/><b>[[year]]</b><br/>Forest:<b>[[x]]%</b><br/>Agricultural:<b>[[y]]%</b>")
        
        this.xAxisTitle(dataSetX.category);
        this.yAxisTitle(dataSetY.category);
        
        this.columns(["Category", "X", "Y"]);
        this.data(_joinData(dataSetX.data,dataSetY.data));
        return this;
        
        function _joinData(d1,d2){
            var ret = [];
            for(var i in d1){
                if(ret.length < 30){
                    if(typeof (d2[i]) !== 'undefined'){
                        for(var j in d1[i]){
                            if(typeof (d2[i][j]) !== 'undefined'){
                                ret.push([i, d1[i][j], d2[i][j], j]);
                            }
                        }
                    }
                }
            }
            return ret;
        }
    };


    Scatter.prototype.formatData = function(dataArr) {
        var context = this;
        var dataProvider = [];
        var catObj = {};
//        console.log('dataArr:');
//        console.log(dataArr);
        dataArr.forEach(function(dataRow) {
            if(typeof (catObj[dataRow[0]]) === 'undefined'){
                catObj[dataRow[0]] = [];
            }
            catObj[dataRow[0]].push([dataRow[0],dataRow[1],dataRow[2],dataRow[3]]);
        });
//        console.log('catObj:');
//        console.log(catObj);
        for(var category in catObj){
            var dataProviderObj = {};
            for(var idx in catObj[category]){
                dataProviderObj['category'] = catObj[category][idx][0];
                dataProviderObj[context._columns[1]+idx] = catObj[category][idx][1];
                dataProviderObj[context._columns[2]+idx] = catObj[category][idx][2];
                dataProviderObj['year'] = catObj[category][idx][3];
            }
            dataProvider.push(dataProviderObj);
        }
//        console.log('dataObjArr:');
//        console.log(dataProvider);
        return dataProvider;
    };

    return Scatter;
}));